(window.webpackJsonp=window.webpackJsonp||[]).push([[42,3,6,7],{"./node_modules/@babel/runtime/helpers/construct.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js");function a(t,n,s){return o()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&r(a,n.prototype),a},a.apply(null,arguments)}e.exports=a},"./node_modules/@babel/runtime/helpers/isNativeFunction.js":function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},"./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js":function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/isNativeFunction.js"),s=n("./node_modules/@babel/runtime/helpers/construct.js");function i(t){var n="function"==typeof Map?new Map:void 0;return e.exports=i=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return s(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},i(t)}e.exports=i},"./node_modules/serialize-javascript/index.js":function(e,t,n){"use strict";var r=Math.floor(1099511627776*Math.random()).toString(16),o=new RegExp('"@__(F|R|D|M|S|U)-'+r+'-(\\d+)__@"',"g"),a=/\{\s*\[native code\]\s*\}/g,s=/function.*?\(/,i=/.*?=>.*?/,l=/[<>\/\u2028\u2029]/g,c=["*","async"],u={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function d(e){return u[e]}e.exports=function e(t,n){n||(n={}),"number"!=typeof n&&"string"!=typeof n||(n={space:n});var u,m=[],p=[],f=[],g=[],b=[],h=[];return n.ignoreFunction&&"function"==typeof t&&(t=void 0),void 0===t?String(t):"string"!=typeof(u=n.isJSON&&!n.space?JSON.stringify(t):JSON.stringify(t,n.isJSON?null:function(e,t){if(n.ignoreFunction&&function(e){var t=[];for(var n in e)"function"==typeof e[n]&&t.push(n);for(var r=0;r<t.length;r++)delete e[t[r]]}(t),!t&&void 0!==t)return t;var o=this[e],a=typeof o;if("object"===a){if(o instanceof RegExp)return"@__R-"+r+"-"+(p.push(o)-1)+"__@";if(o instanceof Date)return"@__D-"+r+"-"+(f.push(o)-1)+"__@";if(o instanceof Map)return"@__M-"+r+"-"+(g.push(o)-1)+"__@";if(o instanceof Set)return"@__S-"+r+"-"+(b.push(o)-1)+"__@"}return"function"===a?"@__F-"+r+"-"+(m.push(o)-1)+"__@":"undefined"===a?"@__U-"+r+"-"+(h.push(o)-1)+"__@":t},n.space))?String(u):(!0!==n.unsafe&&(u=u.replace(l,d)),0===m.length&&0===p.length&&0===f.length&&0===g.length&&0===b.length&&0===h.length?u:u.replace(o,(function(t,r,o){return"D"===r?'new Date("'+f[o].toISOString()+'")':"R"===r?"new RegExp("+e(p[o].source)+', "'+p[o].flags+'")':"M"===r?"new Map("+e(Array.from(g[o].entries()),n)+")":"S"===r?"new Set("+e(Array.from(b[o].values()),n)+")":"U"===r?"undefined":function(e){var t=e.toString();if(a.test(t))throw new TypeError("Serializing native function: "+e.name);if(s.test(t))return t;if(i.test(t))return t;var n=t.indexOf("("),r=t.substr(0,n).trim().split(" ").filter((function(e){return e.length>0}));return r.filter((function(e){return-1===c.indexOf(e)})).length>0?(r.indexOf("async")>-1?"async ":"")+"function"+(r.join("").indexOf("*")>-1?"*":"")+t.substr(n):t}(m[o])})))}},"./src/components/analytics/ParselyReporter.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),l=n.n(i),c=n("./node_modules/react/index.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./src/components/session/RequireFlag.tsx"),m=n("./src/components/session/WithFlag.tsx"),p=n("./src/components/session/WithViewer.tsx"),f=n("./src/framework/source/SourceContext.tsx"),g=n("./src/util/hooks/useScript.tsx"),b=n("./src/util/hooks/useTimer.tsx");function h(){var e=Object(b.a)();return function(t){var n=t.resource,r=t.callback,o=t.max,a=t.ms;return function t(n){var r=n.resource,o=n.callback,a=n.max,s=n.ms,i=n.tries;if(i<a)try{o(r())}catch(n){e((function(){return t({resource:r,callback:o,max:a,ms:2*s,tries:i+1})}),s)}}({resource:n,callback:r,max:o||Number.POSITIVE_INFINITY,ms:a||1,tries:0})}}function v(e){var t=e.currentLocation,n=e.referrer,r=e.referrerSource,o=function(e){return e?e.mediumMemberAt?"member":"user":"visitor"}(e.viewer);return E(t,n,r,o),null}var E=function(e,t,n,r){var a=Object(g.a)("//d1z2jf7jlzjs58.cloudfront.net/keys/medium.com/p.js",{id:"parsely-cf"}),s=o()(a,2),i=s[0],l=s[1],u=h();c.useEffect((function(){i&&!l&&u({resource:function(){return window.PARSELY.beacon},callback:function(){return window.PARSELY.beacon.trackPageView({url:x(e,n),urlref:t,js:1,data:{viewerStatus:r}})},max:10})}),[e,t,i,l])};function x(e,t){if(!e)return"";if(!t)return e;var n=new URL(e),r=Object(f.c)(t),a=r.name,s=r.dimension;if(a&&n.searchParams.set("utm_medium",a),s){var i=s.split("."),l=o()(i,3),c=l[0],u=l[1],d=l[2];c&&n.searchParams.set("utm_source",c),u&&n.searchParams.set("utm_term",u),d&&n.searchParams.set("utm_content",d)}return n.toString()}var y=Object(u.c)((function(e){var t=e.config.isAmp,n=e.client.isBot,r=e.navigation;return{isAmp:t,isBot:n,currentLocation:r.currentLocation,referrer:r.referrer,referrerSource:r.referrerSource}}))((function(e){var t=e.isBot,n=e.isAmp,r=l()(e,["isBot","isAmp"]);return t||n?null:c.createElement(d.a,{name:"enable_parsely"},c.createElement(m.a,{name:"dont_track_user"},(function(e){return e?null:c.createElement(c.Fragment,null,c.createElement("script",null,"window.PARSELY = window.PARSELY || {autotrack: false}"),c.createElement(p.b,null,(function(e){return c.createElement(v,s()({},r,{viewer:e}))})))})))}))},"./src/components/audio/AudioPlayback.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return N}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n.n(u),m=n("./src/components/session/WithViewer.tsx"),p=n("./src/components/upsell/UpsellClickable.tsx"),f=n("./src/framework/design-system/components/index.ts"),g=n("./src/framework/design-system/type/index.ts"),b=n("./src/framework/reporter/index.ts"),h=n("./src/framework/source/index.ts"),v=n("./src/framework/style/index.ts"),E=n("./src/framework/track/UpsellPresentationTracker.tsx"),x=n("./src/svg/audio-21px.svg");function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O=d.a.createElement("g",{transform:"translate(5 4)",fillRule:"evenodd"},d.a.createElement("rect",{width:6,height:17,rx:2}),d.a.createElement("rect",{x:9,width:6,height:17,rx:2})),j=function(e){return d.a.createElement("svg",y({width:25,height:25},e),O)};function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _=d.a.createElement("path",{d:"M7 4v17.03a.5.5 0 0 0 .8.4l11.1-8.1a1 1 0 0 0 0-1.62L7.8 3.6A.5.5 0 0 0 7 4z"}),S=function(e){return d.a.createElement("svg",w({width:25,height:25},e),_)};function P(){var e=o()(["\n  fragment AudioPlayback_post on Post {\n    id\n    audioVersionUrl\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    ...UpsellClickable_post\n  }\n  ","\n"]);return P=function(){return e},e}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={duration:0,elapsed:0,playing:!1},T=function(e,t){switch(t.type){case"load":return k({},e,{duration:t.duration});case"play":return k({},e,{playing:!0});case"pause":return k({},e,{playing:!1});case"seek":return k({},e,{elapsed:t.clickedTime});case"progress":return k({},e,{elapsed:t.elapsed});case"end":return k({},e,{playing:!1});default:return e}},R={"0%":{visibility:"hidden"},"1%":{visibility:"visible",opacity:0},"100%":{opacity:1}},L={"0%":{opacity:1,visibility:"visible"},"99%":{opacity:0},"100%":{visibility:"hidden"}},A=function(e){var t=e.postId,n=e.audioVersionUrl,r=Object(v.useCx)(),o=u.useReducer(T,I),a=s()(o,2),i=a[0],l=a[1],c=i.duration,d=i.elapsed,m=i.playing,p=Object(v.useKeyframes)({fadeInKeyframesName:R,fadeOutKeyframesName:L}),h=p.fadeInKeyframesName,E=p.fadeOutKeyframesName,x=u.useState(!1),y=s()(x,2),O=y[0],w=y[1],_=u.useState(!1),P=s()(_,2),C=P[0],k=P[1],A=u.useCallback((function(){w((function(e){return k(!!e),!1}))}),[]),M=u.useCallback((function(){w((function(e){return k(!e),!0}))}),[]),B=Object(b.c)();u.useEffect((function(){var e=document.getElementById("audio-player");function t(){l({type:"load",duration:e.duration})}function n(){l({type:"progress",elapsed:e.currentTime})}function r(){l({type:"end"})}return e.addEventListener("canplay",t),e.addEventListener("timeupdate",n),e.addEventListener("ended",r),function(){e.removeEventListener("canplay",t),e.removeEventListener("timeupdate",n),e.removeEventListener("ended",r)}}),[]),u.useEffect((function(){var e=document.getElementById("audio-player");Math.round(d)!==Math.round(e.currentTime)&&document.hasFocus()&&(e.currentTime=d)}),[d]);var D=function(e){var t=e.children,n=e.onClick,r=Object(v.useCx)();return u.createElement("button",{onMouseUp:n,className:r((function(e){return{borderRadius:"4px",padding:"8px",borderWidth:"1px",borderStyle:"solid",boxSizing:"border-box",display:"inline-block",textDecoration:"none",":focus":{outline:"none"},color:e.baseColor.text.normal,fill:e.baseColor.fill.normal,background:0,borderColor:e.baseColor.border.dark,":hover":{cursor:"pointer",color:e.baseColor.text.darker,fill:e.baseColor.fill.darker,borderColor:e.baseColor.border.darker}}}))},t)};return u.createElement(f.a,{display:"flex",justifyContent:"center",margin:"20px 0"},u.createElement("audio",{id:"audio-player"},u.createElement("source",{src:n})),u.createElement(f.a,{display:"flex",alignItems:"center",flexGrow:"1"},u.createElement(f.a,{marginRight:"16px"},u.createElement((function(e){var n=e.playing,r=u.useCallback((function(){var e=document.getElementById("audio-player");n?(B.event("audio.end",{postId:t}),e.pause(),l({type:"pause"})):(B.event("audio.start",{postId:t}),e.play(),l({type:"play"}))}),[n]);return u.createElement(D,{onClick:r},n?u.createElement(j,null):u.createElement(S,null))}),{playing:m})),u.createElement(f.a,{display:"flex",flexDirection:"column",flexGrow:"1"},u.createElement(g.b,{scale:"M",color:"DARKER"},"Listen to this story"),u.createElement((function(e){var t=e.duration,n=e.elapsed,o=e.isProgressBeanVisible,a=e.onMouseEnterProgressBar,s=e.onMouseLeaveProgressBar,i=e.onTimeUpdate,l=n&&t?Math.max(0,Math.min(n/t*100,100)):0;function c(e){var t=~~(e%60);return[~~(e/60),t<10?"0"+t:t].join(":")}function d(e){var n=e.pageX,r=document.getElementById("audio-player-progress-bar"),o=n-(r.getBoundingClientRect().left+window.scrollX);return t/r.offsetWidth*o}var m=[function(e){return{backgroundColor:e.baseColor.fill.normal,position:"relative",marginLeft:"-5px",height:"10px",width:"10px",borderRadius:"50%",left:"".concat(l,"%"),cursor:"pointer",opacity:o?1:0}}];return C&&m.push({animation:"".concat(o?h:E," .2s ease-in-out forwards")}),u.createElement(f.a,{display:"flex",alignItems:"center"},u.createElement(f.a,{width:"28px",marginRight:"12px",textAlign:"left"},u.createElement(g.b,{scale:"M"},n?c(n):"--:--")),u.createElement("div",{className:r((function(e){return{display:"flex",justifyContent:"flex-start",alignItems:"center",flexGrow:1,height:"2px",cursor:"pointer",background:"linear-gradient(to right, ".concat(e.baseColor.fill.normal," ").concat(l,"%, ").concat(e.baseColor.background.normal," 0)")}})),id:"audio-player-progress-bar",onMouseDown:function(e){function t(e){i(d(e))}i(d(e)),document.addEventListener("mousemove",t),document.addEventListener("mouseup",(function(){document.removeEventListener("mousemove",t),s()}))},onMouseEnter:a,onMouseLeave:s},u.createElement("div",{className:r(m),onAnimationEnd:function(){return k(!1)}})),u.createElement(f.a,{width:"28px",marginLeft:"12px",textAlign:"right"},u.createElement(g.b,{scale:"M"},t?c(t):"--:--")))}),{elapsed:d,duration:c,isProgressBeanVisible:O,onMouseEnterProgressBar:M,onMouseLeaveProgressBar:A,onTimeUpdate:function(e){return l({type:"seek",clickedTime:Math.max(0,Math.min(e,c))})}}))))},M=function(e){return{fill:e.baseColor.fill.light,marginLeft:"15px",marginRight:"15px"}},B=function(e){var t=e.post,n=Object(v.useCx)();return u.createElement(f.s,{columns:8,display:"flex",flexShrink:"0",margin:"30px 0",padding:"20px 12px",backgroundColor:"BASE_LIGHT"},u.createElement(x.a,{className:n(M)}),u.createElement(g.b,{scale:"S",color:"DARKER",tag:"span"},"Psst... there’s an audio version of this story."," ",u.createElement(p.a,{post:t,linkStyle:"OBVIOUS"},"Upgrade to listen")))};function D(e){var t=e.post,n=t.id,r=t.audioVersionUrl,o=(t.content||{}).isLockedPreviewOnly;return u.createElement(f.a,{marginTop:"30px"},u.createElement(m.b,null,(function(e){return e&&!!e.mediumMemberAt||!o?u.createElement(A,{postId:n,audioVersionUrl:r}):u.createElement(h.b,{source:{dimension:"audio_exclusive",name:"upgrade_membership",postId:n}},u.createElement(E.a,null,u.createElement(B,{post:t})))})))}var N=Object(c.gql)(P(),p.b)},"./src/components/broadcast-banner/BroadcastBanner.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(i),c=n("./node_modules/lodash/cloneDeep.js"),u=n.n(c),d=n("./node_modules/react/index.js"),m=n("./src/components/broadcast-banner/useCdcMessaging.tsx"),p=n("./node_modules/react-redux/es/index.js"),f=n("./src/components/session/useFlag.tsx"),g=n("./src/components/cta/TextCTA.tsx"),b=n("./src/framework/design-system/components/index.ts"),h=n("./src/framework/style/index.ts"),v=n("./src/svg/exclamation-25px.svg");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){return{width:"20px",height:"20px",fill:e.baseColor.text.lighter}},O=function(e){for(var t=u()(e),n=t.markups,r=t.text,o=[r],a=0,i=Object.entries(n);a<i.length;a++){var c=l()(i[a],2),d=c[0],m=c[1],p=o.pop();if(!p||"string"!=typeof p){o=[r];break}var f=p.substring(0,m.start),g=p.substring(m.start,m.end),b=p.substring(m.end);o=[].concat(s()(o),[f,x({text:g},m),b]);for(var h=Number(d)+1;h<n.length;h++)n[h].start=n[h].start-m.end,n[h].end=n[h].end-m.end}return o},j=function(e){var t=e.parsedMessage;return d.createElement(b.a,{marginLeft:"8px",maxWidth:"calc(100% - 33px)"},t.map((function(e,t){return"string"==typeof e?d.createElement(d.Fragment,{key:"parsedBroadcastMessage-".concat(t)},e):d.createElement(b.m,{key:"parsedBroadcastMessage-".concat(t),linkStyle:"OBVIOUS",href:e.href,target:"_blank"},e.text)})))},w=function(e){var t=e.tier,n=e.topics,r=e.tags,o=e.isLocked,a=e.postId,s=e.isTopicPage,i=e.postPublishDate,l=Object(h.useCx)(),c=Object(m.a)({tier:t,topics:n,tags:r,flag:"covid_19_cdc_banner",isLocked:o,postId:a,isTopicPage:s,postPublishDate:i}),u=c.shouldShowCdcMessaging,E=c.message,x=function(e){var t=e.postId,n=void 0===t?null:t,r=e.tags,o=void 0===r?[]:r,a=e.topics,s=void 0===a?[]:a,i=e.flag,l=Boolean(Object(f.a)(i)),c=Object(p.f)((function(e){return{sharedGetOutTheVoteMessaging:e.config.sharedVoteMessaging,isUs:e.client.isUs}}),p.d),u=c.sharedGetOutTheVoteMessaging,d=c.isUs,m=u.TAGS,g=u.TOPICS,b=u.MESSAGE,h=u.EXCLUDE_POSTS,v=m.map((function(e){return e.toLowerCase()})),E=g.map((function(e){return e.toLowerCase()})),x=h.includes(n||""),y=o.map((function(e){return v.includes((null==e?void 0:e.toLowerCase())||"")})).includes(!0),O=s.map((function(e){return E.includes((null==e?void 0:e.toLowerCase())||"")})).includes(!0);return{shouldShowVoteMessaging:l&&d&&(y||O)&&!x,voteMessage:b}}({topics:n,tags:r,flag:"vote_banner",postId:a}),w=x.shouldShowVoteMessaging,_=x.voteMessage,S=d.useCallback((function(){return O(E)}),[E]),P=d.useCallback((function(){return O(_)}),[_]);if(!u&&!w)return null;var C=u?S():P();return d.createElement(g.b,{scale:g.a.S},d.createElement(b.a,{display:"flex"},d.createElement(v.a,{className:l(y)}),d.createElement(j,{parsedMessage:C})))}},"./src/components/broadcast-banner/useCdcMessaging.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("./node_modules/react-redux/es/index.js"),o=n("./src/components/session/useFlag.tsx"),a={1:"tierA",2:"tierA",other:"tierA"},s=function(e){var t=e.tags,n=void 0===t?[]:t,s=e.topics,i=void 0===s?[]:s,l=e.tier,c=e.flag,u=e.isLocked,d=e.isTopicPage,m=e.postId,p=e.postPublishDate,f=Boolean(Object(o.a)(c)),g=Boolean(Object(o.a)("enable_unbound")),b=Object(r.f)((function(e){return{sharedCdcMessaging:e.config.sharedCdcMessaging}}),r.d).sharedCdcMessaging,h=b.COVID_APPLICABLE_TAG_SLUGS,v=b.COVID_APPLICABLE_TOPIC_NAMES,E=b.COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE,x=b.COVID_MESSAGES,y=b.COVID_BANNER_POST_ID_OVERRIDE_WHITELIST,O={shouldShowCdcMessaging:!1,message:x[a.other]};if(y.includes(m||""))return O;if(p&&p<15778368e5)return O;var j=h.map((function(e){return e.toLowerCase()})),w=(d?E:v).map((function(e){return e.toLowerCase()})),_=n.map((function(e){return j.includes((null==e?void 0:e.toLowerCase())||"")})).includes(!0),S=i.map((function(e){return w.includes((null==e?void 0:e.toLowerCase())||"")})).includes(!0);return{shouldShowCdcMessaging:f&&!(!_&&!S),message:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,i=r.some((function(e){return t.includes(e?e.toLowerCase():"")}));return i&&o&&[1,2].includes(n||0)?s?e.unbound:e.paywall:null==n?e[a.other]:e[a[n]||"tierB"]}(x,w,l,i,u,g)}}},"./src/components/collection/CollectionFollowButton.tsx":function(e,t,n){"use strict";n.d(t,"c",(function(){return I})),n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return H}));var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./src/components/session/WithViewer.tsx"),p=n("./src/components/style/BaseThemeProvider.tsx"),f=n("./src/components/susi/SusiClickable.tsx"),g=n("./src/framework/design-system/components/index.ts"),b=n("./src/framework/design-system/components/portal/ui/Toast.tsx"),h=n("./src/framework/design-system/type/index.ts"),v=n("./src/framework/reporter/index.ts"),E=n("./src/framework/source/index.ts"),x=n("./src/framework/style/index.ts"),y=n("./src/framework/track/index.ts"),O=n("./src/svg/arrow-down-21px.svg"),j=n("./src/util/routes.ts");function w(){var e=l()(["\n  mutation UnsubscribeCollectionEmailsMutation($id: ID!) {\n    unsubscribeCollectionEmails(collectionId: $id) {\n      __typename\n      id\n      isUserSubscribedToCollectionEmails\n    }\n  }\n"]);return w=function(){return e},e}function _(){var e=l()(["\n  mutation SubscribeCollectionEmailsMutation($id: ID!) {\n    subscribeCollectionEmails(collectionId: $id) {\n      __typename\n      id\n      isUserSubscribedToCollectionEmails\n    }\n  }\n"]);return _=function(){return e},e}function S(){var e=l()(["\n  mutation UnfollowCollectionMutation($id: ID!) {\n    unfollowCollection(targetCollectionId: $id) {\n      __typename\n      id\n      viewerIsFollowing\n    }\n  }\n"]);return S=function(){return e},e}function P(){var e=l()(["\n  mutation FollowCollectionMutation($id: ID!) {\n    followCollection(targetCollectionId: $id) {\n      __typename\n      id\n      viewerIsFollowing\n      isUserSubscribedToCollectionEmails\n    }\n  }\n"]);return P=function(){return e},e}function C(){var e=l()(["\n  fragment CollectionFollowButton_collection on Collection {\n    __typename\n    id\n    viewerIsFollowing\n    name\n    viewerIsSubscribedToLetters\n    canToggleEmail\n    slug\n    isUserSubscribedToCollectionEmails\n    ...collectionUrl_collection\n    ...SusiClickable_collection\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function k(){var e=l()(["\n  fragment CollectionFollowButton_post on Post {\n    __typename\n    id\n  }\n"]);return k=function(){return e},e}var I=Object(c.gql)(k()),T=Object(c.gql)(C(),j.L,f.b),R=function(e){var t=e.children,n=e.extraTopPadding,r=e.extraBottomPadding,o=e.padding,a=e.margin,s=e.borderTop;return u.createElement(g.a,{padding:o||"".concat(n?"20px":"5px"," 20px ").concat(r?"20px":"5px"," 20px"),margin:a,borderTop:s?"BASE_LIGHTER":"NONE"},t)},L=Object(c.gql)(P()),A=Object(c.gql)(S()),M=Object(c.gql)(_()),B=Object(c.gql)(w()),D=function(e){return{followCollectionMutation:function(e){var t=Object(c.useMutation)(L),n=s()(t,1)[0];return u.useCallback((function(){return n({variables:{id:e.id},optimisticResponse:{followCollection:{__typename:"Collection",id:e.id,viewerIsFollowing:!0,isUserSubscribedToCollectionEmails:!1}}})}),[e])}(e),unfollowCollectionMutation:function(e){var t=Object(c.useMutation)(A),n=s()(t,1)[0];return u.useCallback((function(){return n({variables:{id:e.id},optimisticResponse:{unfollowCollection:{__typename:"Collection",id:e.id,viewerIsFollowing:!1}}})}),[e])}(e),subscribeCollectionEmailsMutation:function(e){var t=Object(c.useMutation)(M),n=s()(t,1)[0];return u.useCallback((function(){return n({variables:{id:e.id},optimisticResponse:{subscribeCollectionEmails:{__typename:"Collection",id:e.id,isUserSubscribedToCollectionEmails:!0}}})}),[e])}(e),unsubscribeCollectionEmailsMutation:function(e){var t=Object(c.useMutation)(B),n=s()(t,1)[0];return u.useCallback((function(){return n({variables:{id:e.id},optimisticResponse:{unsubscribeCollectionEmails:{__typename:"Collection",id:e.id,isUserSubscribedToCollectionEmails:!1}}})}),[e])}(e)}},N=function(e){return function(t){return e?{fill:t.baseColor.text.lighter,marginLeft:"2px",width:"18px",height:"auto",position:"absolute",bottom:"0"}:{fill:"inherit",marginLeft:"6px"}}},H=function(e){var t=e.buttonSize,n=e.collection,r=e.isPopoverVisible,a=e.isToastVisible,i=e.post,l=e.simpleButton,c=e.isLinkStyle,j=Object(x.useCx)(),w=Object(d.f)((function(e){return e.config.isAmp})),_=n&&n.name?n.name:"",S=Object(v.c)(),P=Object(E.d)(),C=u.useState(!!r),k=s()(C,2),I=k[0],T=k[1],L=u.useState(!!a),A=s()(L,2),M=A[0],B=A[1],H=D(n),V=H.followCollectionMutation,z=H.unfollowCollectionMutation,q=H.subscribeCollectionEmailsMutation,G=H.unsubscribeCollectionEmailsMutation,W=u.useCallback((function(){T(!1)}),[]);u.useEffect((function(){return y.a.on("scroll",W),function(){y.a.off("scroll",W)}}),[W]);var $=u.useCallback((function(){n.viewerIsFollowing||(S.event("collection.followed",{collectionId:n.id,followSource:P}),V()),T(!0)}),[n]),K=u.useCallback((function(){S.event("collection.unfollowed",{collectionId:n.id,followSource:P}),z(),T(!1)}),[]),Y=u.useCallback((function(){T(!1)}),[]),Q=u.useCallback((function(e){S.event("client.action",{action:"toggle-subscribe-collection-emails",eventType:"click",classAttribute:"checkbox"}),e.target.checked?q():G(),B(!0)}),[]),X=u.useCallback((function(){B(!1)}),[]);if(w)return null;if(l)return F(n,i,$,K);var J=!!n.isUserSubscribedToCollectionEmails;return u.createElement(E.b,{source:{susiEntry:"follow_card"}},u.createElement(g.p,{isVisible:!!I,hide:Y,popoverRenderFn:function(){return u.createElement(g.a,{width:"280px",display:"flex",flexDirection:"column"},u.createElement(R,{extraTopPadding:!0},u.createElement(h.c,{scale:"XS"},"You‘re following ",_)),u.createElement(R,null,u.createElement(h.b,{scale:"M"},"You‘ll now see more stories from ",_," across Medium.")),n.canToggleEmail&&u.createElement(R,null,u.createElement(h.b,{scale:"M"},u.createElement("label",null,u.createElement(g.a,{display:"inline",marginRight:"5px"},u.createElement("input",{type:"checkbox",onChange:Q,checked:J})),"Receive emails from this publication"))),u.createElement(R,{extraBottomPadding:!0},u.createElement(h.b,{scale:"M"},u.createElement(g.m,{onClick:K,linkStyle:"OBVIOUS",inline:!0},"Unfollow publication"))))}},u.createElement((function(e){var t=e.children,r=e.buttonSize,o=void 0===r?"SMALL":r,a=e.buttonStyle,s=e.linkStyle,l=void 0===s?null:s;return u.createElement(m.b,null,(function(e){return e?null!=l?u.createElement(g.m,{onClick:$,linkStyle:l},t):u.createElement(g.b,{size:o,onClick:$,buttonStyle:a},t):u.createElement(f.a,{collection:n,buttonStyle:"OBVIOUS",linkStyle:"OBVIOUS",isButton:!c,buttonSize:o,operation:"register",actionUrl:U(n,i)||""},t)}))}),o()({buttonStyle:n.viewerIsFollowing?"STRONG":"OBVIOUS",linkStyle:c?n.viewerIsFollowing?"SUBTLE":"OBVIOUS":null},t),u.createElement(g.a,{display:"flex",flexDirection:"row"},n.viewerIsFollowing?"Following":"Follow",n.viewerIsFollowing&&u.createElement("span",{className:j({position:"relative"})},u.createElement(O.a,{className:j(N(c))}))))),u.createElement(p.b,null,u.createElement(b.a,{isVisible:!!M,hide:X,duration:2e3},u.createElement(h.b,{scale:"M"},J?"You‘ll now receive emails from ".concat(_,"."):"You‘ll no longer receive emails from ".concat(_,".")))))},U=function(e,t){return e.slug&&(t&&t.id?Object(j.bc)(e.slug,t.id):Object(j.ac)(e.slug))},F=function(e,t,n,r){return u.createElement(E.b,{source:{susiEntry:"follow_card"}},u.createElement(m.b,null,(function(o){return o?u.createElement(g.b,{size:"REGULAR",onClick:e.viewerIsFollowing?r:n,buttonStyle:e.viewerIsFollowing?"STRONG":"OBVIOUS"},e.viewerIsFollowing?"Following":"Follow"):u.createElement(f.a,{collection:e,buttonStyle:"OBVIOUS",isButton:!0,buttonSize:"REGULAR",operation:"register",actionUrl:U(e,t)||""},e.viewerIsFollowing?"Following":"Follow")})))}},"./src/components/collection/CollectionLogo.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/publisher/auroraHooks.ts"),l=n("./src/components/ui/image/index.ts"),c=n("./src/framework/design-system/components/index.ts"),u=n("./src/framework/design-system/type/useTypeRules.ts"),d=n("./src/framework/style/index.ts"),m=n("./src/schema-types/globalTypes.ts"),p=n("./src/util/miroImage.ts");function f(){var e=o()(["\n  fragment CollectionLogo_image on ImageMetadata {\n    id\n    originalHeight\n    originalWidth\n  }\n"]);return f=function(){return e},e}function g(){var e=o()(["\n  fragment CollectionLogo_collection on Collection {\n    ...auroraHooks_publisher\n    name\n    isAuroraVisible\n    logo {\n      id\n      originalWidth\n      originalHeight\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function b(e){var t=e.clamp,n=void 0===t?1:t,r=e.collection,o=e.maxWidth,a=e.maxHeight,f=e.textScale,g=void 0===f?"S":f,b=e.withTextColorSubtle,h=void 0!==b&&b,v=e.customNameColor,E=e.customLogoImage,x=e.nameTreatment,y=Object(d.useCx)(),O=Object(u.a)({name:"heading",scale:g,clamp:n}),j=function(e,t){return function(n){return{color:t||n.baseColor.text[e]}}}(h?"normal":"dark",v),w=Object(i.f)(r)&&void 0!==E?E:r.logo;if(!w||!w.id||x===m.j.NAME_TREATMENT_TEXT)return s.createElement("span",{className:y([O,j])},r.name||"");var _=w.id,S=w.originalWidth||100,P=w.originalHeight||100;if(o&&S>o){var C=S/o;S=Math.floor(S/C),P=Math.floor(P/C)}if(a&&P>a){var k=P/a;S=Math.floor(S/k),P=Math.floor(P/k)}return s.createElement(c.a,{width:"".concat(S,"px"),height:"".concat(P,"px")},s.createElement(l.c,{miroId:_,alt:r.name||"Publication logo",width:S,height:P,strategy:p.a.Resample}))}var h=Object(a.gql)(g(),i.a);Object(a.gql)(f())},"./src/components/collection/CollectionMetabar.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return ee})),n.d(t,"a",(function(){return te})),n.d(t,"c",(function(){return ne}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/@babel/runtime/helpers/extends.js"),p=n.n(m),f=n("./src/components/collection/CollectionLogo.tsx"),g=n("./src/framework/design-system/components/index.ts"),b=n("./src/framework/design-system/type/createClampRule.ts"),h=n("./src/framework/design-system/type/createLeadingTrimRule.ts"),v=n("./src/framework/design-system/type/createSizeRule.ts"),E=n("./src/framework/design-system/util/style/responsiveStyles.ts"),x=n("./src/framework/style/index.ts"),y=function(e){var t=e.fontConfig,n=e.scale,r=e.tag,o=e.children,a=e.additionalRules,s=e.clamp,i=e.leadingTrim,c=Object(x.useCx)(),d=r,m={fontFamily:t.family,fontWeight:t.weight},p=Object(E.b)((function(e){var n=l()(e,1)[0];return t.lineHeight[n]}),n),f=Object(v.a)({fontConfig:t,scale:n}),g=s?Object(b.a)({clamp:s,lineHeight:p}):void 0,y=i?Object(h.a)({fontConfig:t,scale:n}):void 0;return u.createElement(d,{className:c([m,f,g,y,a])},o)},O=n("./src/styles/breakpoints.ts");function j(){var e=o()(["\n  fragment CollectionNavItems_collection on Collection {\n    navItems {\n      title\n      url\n      type\n    }\n  }\n"]);return j=function(){return e},e}var w=function(e){var t;return t={listStyleType:"none",margin:0,lineHeight:"40px",whiteSpace:"nowrap",overflowX:"auto",display:"flex",alignItems:"flex-start"},s()(t,O.sm(e),{display:"none"}),s()(t,"marginTop","".concat(20,"px")),s()(t,"paddingTop","".concat(20,"px")),s()(t,"height","".concat(80,"px")),t},_={display:"flex",alignItems:"center",height:"".concat(20,"px"),marginRight:"15px",marginLeft:"15px",":first-child":{marginLeft:0}},S=function(e){return{height:"".concat(20,"px"),minWidth:"1px",backgroundColor:e.baseColor.border.normal}};function P(e){var t=e.navItems,n=e.withTextColorSubtle,r=Object(x.useCx)(),o=Object(x.useTheme)();return t?u.createElement("ul",{className:r(w)},t.map((function(e,t){return e.url&&u.createElement(u.Fragment,{key:t},"EXTERNAL_LINK_NAV_ITEM"===e.type&&u.createElement("span",{className:r(S)}),u.createElement("li",{className:r(_)},u.createElement(y,{fontConfig:o.newFonts.detail,scale:"S",tag:"span",additionalRules:(a=n?"lighter":"normal",function(e){return{color:e.baseColor.text[a],textTransform:"uppercase",letterSpacing:"1px"}})},u.createElement(g.m,{href:e.url},e.title))));var a}))):null}var C=Object(c.gql)(j()),k=n("./src/components/navigation/Anchor.tsx"),I=n("./src/framework/design-system/typedefs/responsiveStyles.ts"),T=n("./src/util/routes.ts"),R=n("./src/util/theme.ts");function L(){var e=o()(["\n  fragment CollectionMetabarBottom_collection on Collection {\n    slug\n    ...CollectionNavItems_collection\n    ...CollectionLogo_collection\n    ...collectionUrl_collection\n    ...ThemeUtilTintBackground_collection\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return L=function(){return e},e}var A=Object(c.gql)(L(),C,f.b,T.L,R.a),M=Object(d.c)((function(e){return{currentLocation:e.navigation.currentLocation}}))((function(e){var t=e.collection,n=e.currentLocation,r=e.shouldShowCollectionLogo,o=void 0===r||r,a=e.withBorderTop,i=void 0!==a&&a,l=e.withTextColorSubtle,c=void 0!==l&&l,d=e.breakpoint,m=void 0===d?I.a.sm:d,b=t.navItems.slice().length>0;return u.createElement(g.a,p()({backgroundColor:"BACKGROUND",display:b?"block":"none",borderTop:i?"BASE_LIGHTER":"NONE"},s()({},m,{display:"block"})),u.createElement(g.o,null,u.createElement(g.a,{display:"flex",alignItems:"center",height:"54px",overflow:"hidden"},o?u.createElement(g.a,{flexShrink:"0",marginRight:"40px"},u.createElement(k.a,{href:Object(T.K)(t,n)},u.createElement(f.a,{collection:t,maxWidth:300,maxHeight:36,textScale:"S",withTextColorSubtle:c}))):null,u.createElement(g.a,{flexShrink:"1",overflow:"auto"},u.createElement(P,{navItems:t.navItems,withTextColorSubtle:c})))))})),B=n("./src/components/metabar/Logo.tsx"),D=n("./src/components/metabar/MetabarActions.tsx"),N=n("./src/components/metabar/MetabarActionsLO.tsx"),H=n("./src/components/metabar/OpenInApp.tsx"),U=n("./src/components/metabar/constants.ts"),F=n("./src/components/session/WithViewer.tsx"),V=n("./src/styles/zIndex.ts");function z(){var e=o()(["\n  fragment CollectionMetabarTop_collection on Collection {\n    slug\n    ...CollectionLogo_collection\n    ...collectionUrl_collection\n    ...MetabarActions_publisher\n  }\n  ","\n  ","\n  ","\n"]);return z=function(){return e},e}var q=Object(c.gql)(z(),f.b,T.L,D.b),G=Object(d.c)((function(e){return{authDomain:e.config.authDomain,currentLocation:e.navigation.currentLocation}}))((function(e){var t=e.authDomain,n=e.collection,r=e.currentLocation,o=e.isAmp,a=e.post,i=e.shouldShowCollectionLogo,l=e.withMonogramDark,c=e.setIsMetabarLocked,d=e.breakpoint,m=void 0===d?I.a.sm:d,b=e.hideOpenInAppLink,h=void 0!==b&&b;return u.createElement(g.a,{backgroundColor:"BACKGROUND"},u.createElement(g.o,null,u.createElement(g.a,p()({display:"flex",alignItems:"center",height:"".concat(U.a,"px")},s()({},m,{display:"flex",height:"".concat(U.c,"px")})),u.createElement(g.a,{display:"flex",alignItems:"center",flexGrow:"1",zIndex:V.a.metabar},u.createElement(k.a,{href:"https://".concat(t,"/"),"aria-label":"Homepage"},u.createElement(B.a,{contrast:l?"dark":"normal"})),i&&u.createElement(u.Fragment,null,u.createElement(g.a,p()({height:"24px",width:"1px",marginLeft:"15px",marginRight:"14px",borderLeft:"BASE_LIGHT"},s()({},m,{display:"none"}))),u.createElement(g.a,s()({},m,{display:"none"}),u.createElement(k.a,{href:Object(T.K)(n,r)},u.createElement(f.a,{collection:n,maxWidth:240,maxHeight:36,textScale:"M"})))),u.createElement(F.b,null,(function(e){return!h&&e?u.createElement(H.a,{postId:a&&a.id,collectionSlug:n.slug}):u.createElement(u.Fragment,null)}))),u.createElement(g.a,{flexGrow:"0",zIndex:V.a.metabar},o?u.createElement(N.a,{withoutConversionButton:!0,post:a,publisher:n}):u.createElement(D.c,{post:a,publisher:n,withoutConversionButton:!0,setIsMetabarLocked:c})))))})),W=n("./src/components/metabar/MetabarLayout.tsx"),$=n("./src/components/session/useFlag.tsx"),K=n("./src/metadata/Favicon.tsx");function Y(){var e=o()(["\n  fragment CollectionMetabar_collection on Collection {\n    id\n    colorBehavior\n    isAuroraVisible\n    favicon {\n      id\n    }\n    ...CollectionMetabarTop_collection\n    ...CollectionMetabarBottom_collection\n    ...collectionDefaultBackgroundTheme_collection\n    ...collectionTintBackgroundTheme_collection\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return Y=function(){return e},e}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){return U.a+(e?U.b:0)}function J(e){return U.c+(e?U.b:0)}function Z(e){var t,n=e.post,r=e.collection,o=e.isAmp,a=e.isFixed,s=e.behavior,i=e.shouldShowBottomMetabar,c=void 0===i||i,m=e.hideOpenInAppLink,p=Object(x.useTheme)(),f=u.useState(!1),b=l()(f,2),h=b[0],v=b[1],E=u.useState(!1),y=l()(E,2),O=y[0],j=y[1],w=Object(d.f)((function(e){return e.client.isNativeMedium})),_="ACCENT_COLOR"===r.colorBehavior,S=r.navItems&&r.navItems.length>0,P=c&&S,C=!(P||O),k=_||P||O,I=!!Object($.a)("make_nav_sticky")&&O;if(u.useEffect((function(){window.innerWidth<p.breakpoints.md&&j(!0)}),[]),w)return null;var T=c&&u.createElement(g.x,{theme:_?Object(R.c)(r,p):Object(R.e)(r,p)},u.createElement(M,{collection:r,withBorderTop:_,withTextColorSubtle:_}));return u.createElement(u.Fragment,null,u.createElement(W.a,{height:X(S&&c),heightSm:J(!I&&c),isFixed:I||a,isLocked:I||h,behavior:s,marginBottom:0,marginBottomSm:0},u.createElement(K.a,{faviconImageId:null==r||null===(t=r.favicon)||void 0===t?void 0:t.id}),u.createElement(g.x,{theme:k?Object(R.c)(r,p):Object(R.e)(r,p)},u.createElement(G,{post:n,collection:r,isAmp:o,shouldShowCollectionLogo:C,withMonogramDark:k,setIsMetabarLocked:v,hideOpenInAppLink:m})),!I&&T),I&&T)}function ee(e){var t,n=e.post,r=e.collection,o=e.isAmp,a=e.isFixed,i=e.behavior,c=e.shouldShowCollectionLogo,m=void 0===c||c,p=e.shouldShowBottomMetabar,f=void 0===p||p,b=e.hideOpenInAppLink,h=Object(x.useTheme)(),v=!!Object($.a)("make_nav_sticky"),E="ACCENT_COLOR"===r.colorBehavior,y=E?Object(R.c)(r,h):Object(R.e)(r,h),O=u.useState(!1),j=l()(O,2),w=j[0],_=j[1],S=v&&w,P=E?"#E5E5E5":y.baseColor.border.light,C=u.useState(!1),k=l()(C,2),T=k[0],L=k[1],A=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{navItems:[]}),B=A.navItems&&A.navItems.length>0,D=f&&(m||B),N=Object(d.f)((function(e){return e.client.isNativeMedium}));if(u.useEffect((function(){window.innerWidth<h.breakpoints.md&&_(!0)}),[]),N)return null;var H=function(e){return{borderTop:"1px solid ".concat(e.baseColor.border.lighter),opacity:.4}},U=u.createElement(M,{collection:A,shouldShowCollectionLogo:m,withBorderTop:E,withTextColorSubtle:E,breakpoint:I.a.xs});return u.createElement(u.Fragment,null,u.createElement(W.a,{borderColor:P,height:X(B&&f),heightSm:J(!S&&m&&f),isFixed:S||a,isLocked:S||T,behavior:i,marginBottom:0,marginBottomSm:0,breakpoint:I.a.xs},u.createElement(K.a,{faviconImageId:null==r||null===(t=r.favicon)||void 0===t?void 0:t.id}),u.createElement(g.x,{theme:y},u.createElement(g.a,{backgroundColor:"BACKGROUND"},u.createElement(G,{post:n,collection:A,isAmp:o,shouldShowCollectionLogo:m&&(!B||!f),withMonogramDark:!E,setIsMetabarLocked:L,breakpoint:I.a.xs,hideOpenInAppLink:b}),D&&!E?u.createElement(x.WithCx,null,(function(e){return u.createElement("div",{className:e(H)})})):null,!S&&D&&U))),S&&D&&u.createElement(g.x,{theme:y},u.createElement(g.a,{backgroundColor:"BACKGROUND"},U)))}function te(e){return e.collection.isAuroraVisible?u.createElement(ee,e):u.createElement(Z,e)}var ne=Object(c.gql)(Y(),q,A,R.d,R.f)},"./src/components/collection/PublisherLogo.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/ui/image/index.ts"),l=n("./src/framework/design-system/components/index.ts"),c=n("./src/framework/design-system/type/useTypeRules.ts"),u=n("./src/framework/style/index.ts"),d=n("./src/schema-types/globalTypes.ts"),m=n("./src/util/miroImage.ts");function p(){var e=o()(["\n  fragment PublisherLogo_image on ImageMetadata {\n    id\n    originalHeight\n    originalWidth\n  }\n"]);return p=function(){return e},e}function f(e){var t=e.clamp,n=void 0===t?1:t,r=e.maxWidth,o=e.maxHeight,a=e.textScale,p=void 0===a?"S":a,f=e.withTextColorSubtle,g=void 0!==f&&f,b=e.customNameColor,h=e.name,v=e.logo,E=e.nameTreatment,x=e.leadingTrim,y=void 0!==x&&x,O=e.withWordBreak,j=void 0!==O&&O,w=Object(u.useCx)(),_=Object(c.a)({name:"heading",scale:p,clamp:n,leadingTrim:y}),S=function(e,t){return function(n){return{color:t||n.baseColor.text[e]}}}(g?"normal":"dark",b),P=j?{wordBreak:"break-word"}:{};if(!v||!v.id||E===d.j.NAME_TREATMENT_TEXT)return s.createElement("span",{className:w([_,S,P])},h||"");var C=v.id,k=v.originalWidth||100,I=v.originalHeight||100;if(r&&k>r){var T=k/r;k=Math.floor(k/T),I=Math.floor(I/T)}if(o&&I>o){var R=I/o;k=Math.floor(k/R),I=Math.floor(I/R)}return s.createElement(l.a,{width:"".concat(k,"px"),height:"".concat(I,"px")},s.createElement(i.c,{miroId:C,alt:h||"Publication logo",width:k,height:I,strategy:m.a.Resample}))}var g=Object(a.gql)(p())},"./src/components/collection/package/TruncatedPostCard.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return Se})),n.d(t,"b",(function(){return ke}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),p=n.n(m),f=n("./node_modules/react-redux/es/index.js"),g=n("./src/components/mutations/DeletePostMutation.tsx"),b=n("./src/components/post/footer/actions/PubStatusMutations.tsx"),h=n("./src/components/publisher/publisherHelpers.tsx"),v=n("./src/components/ui/PopoverMenu.tsx"),E=n("./src/framework/design-system/components/index.ts"),x=n("./src/framework/style/index.ts"),y=n("./src/svg/overflow-dots-filled-25px.svg"),O=n("./src/util/function.ts"),j=n("./src/util/hooks/useToggle.tsx"),w=n("./src/util/routes.ts");function _(){var e=o()(["\n  fragment TruncatedPostCardEditorWriterButton_post on Post {\n    id\n    collection {\n      id\n      name\n      slug # Needed for rejectPostFromPub (not currently exposed as a reusable fragment)\n    }\n    ...useIsPinnedInContext_post\n  }\n  ","\n"]);return _=function(){return e},e}var S=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},P=function(e){var t=e.post,n=e.publisherContext,r=e.isEditor,o=e.isWriter,a=Object(x.useCx)(),i=Object(f.f)((function(e){return e.config.authDomain})),l=t.id,c=t.collection,d=c||{id:"",name:""},m=d.id,_=d.name,P=Object(j.a)(!1),C=p()(P,3),k=C[0],I=C[1],T=C[2],R=Object(h.b)(t,n),L=p()(R,2),A=L[0],M=L[1],B=u.useCallback((function(){T(),M().then((function(){return window.location.reload()}))}),[T,M]),D=Object(b.b)(t),N=Object(j.a)(!1),H=p()(N,3),U=H[0],F=H[1],V=H[2],z=u.useCallback((function(){D(c).then((function(){return window.location.reload()}))}),[m,D]),q=Object(g.a)(l),G=p()(q,1)[0],W=Object(j.a)(!1),$=p()(W,3),K=$[0],Y=$[1],Q=$[2],X=u.useCallback((function(){G().then((function(){return window.location.reload()}))}),[G]),J={buttonStyle:"ERROR",cancelText:"Cancel"};return u.createElement(u.Fragment,null,u.createElement(E.f,s()({},J,{isVisible:U,onConfirm:z,hide:V,titleText:"Remove story",confirmText:"Remove",isDestructiveAction:!0}),"Are you sure you want to remove this story from ",_,"?"),u.createElement(E.f,s()({},J,{isVisible:K,onConfirm:X,hide:Q,titleText:"Delete story",confirmText:"Delete",isDestructiveAction:!0}),"Are you sure you want to delete this story?"),u.createElement(E.p,{hide:T,isVisible:k,popoverRenderFn:function(){return u.createElement(v.a,null,(r||o&&"User"===n)&&u.createElement(v.b,null,u.createElement(E.m,{onClick:B},A?"Unpin":"Pin"," story")),u.createElement(v.b,null,u.createElement(E.m,{href:Object(w.Db)(i,l)},"Edit story")),u.createElement(v.c,null),u.createElement(v.b,null,u.createElement(E.m,{href:Object(w.Hb)(i,l)},"Story settings")),u.createElement(v.b,null,u.createElement(E.m,{href:Object(w.Oc)(i,l)},"View stats")),u.createElement(v.c,null),m&&u.createElement(v.b,null,u.createElement(E.m,{onClick:F},"Remove story from publication")),o&&u.createElement(v.b,null,u.createElement(E.m,{onClick:Object(O.a)(T,Y)},"Delete story")))}},u.createElement(E.m,{onClick:I,ariaLabel:"More options"},u.createElement(y.a,{className:a(S)}))))},C=Object(c.gql)(_(),h.c),k=n("./src/components/mutations/UserBlockMutation.tsx"),I=n("./src/components/mutations/UserReportStoryMutation.tsx"),T=n("./src/components/mutations/UserUnblockMutation.tsx"),R=n("./src/components/mute/useMute.tsx"),L=n("./src/components/session/useFlag.tsx"),A=n("./src/components/user/UserBlockConfirmDialog.tsx"),M=n("./src/components/user/UserReportStoryDialog.tsx");function B(){var e=o()(["\n  fragment TruncatedPostCardReaderButton_post on Post {\n    id\n    collection {\n      id\n    }\n    creator {\n      id\n      isBlocking\n      isMuting\n    }\n  }\n"]);return B=function(){return e},e}var D=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},N=function(e){var t,n=e.post,r=e.viewer,o=Object(x.useCx)(),a=n.creator,s=n.id,i=a||{},l=i.id,c=i.isMuting,d=i.isBlocking,m=null===(t=n.collection)||void 0===t?void 0:t.id,f=Object(j.a)(!1),g=p()(f,3),b=g[0],h=g[1],w=g[2],_=Object(L.a)("enable_mute"),S=Object(R.a)(l,m),P=S.muteAuthor,C=S.unmuteAuthor,B=Object(j.a)(!1),N=p()(B,3),H=N[0],U=N[1],F=N[2],V=Object(j.a)(!1),z=p()(V,3),q=z[0],G=z[1],W=z[2];return m&&l?u.createElement(u.Fragment,null,u.createElement(I.a,{targetAuthorId:l,targetPostId:s,isBlocking:d,onOptimisticComplete:W},(function(e){var t=e.mutate;return u.createElement(M.a,{onSubmit:t,isVisible:q,hide:W})})),d?null:u.createElement(k.a,{targetUserId:l,viewerId:r.id,onCompleted:F},(function(e){var t=e.mutate;return u.createElement(A.a,{onConfirm:t,isVisible:H,hide:F})})),u.createElement(E.p,{hide:w,isVisible:b,popoverRenderFn:function(){return u.createElement(v.a,null,_&&u.createElement(v.b,null,u.createElement(E.m,{onClick:Object(O.a)(w,c?C:P)},c?"Unmute":"Mute"," this author")),u.createElement(v.b,null,d?u.createElement(T.a,{targetUserId:l,viewerId:r.id},(function(e){var t=e.mutate;return u.createElement(E.m,{onClick:Object(O.a)(w,t)},"Unblock this author")})):u.createElement(E.m,{onClick:Object(O.a)(w,U)},"Block this author")),u.createElement(v.b,null,u.createElement(E.m,{onClick:Object(O.a)(w,G)},"Report this story")))}},u.createElement(E.m,{onClick:h,ariaLabel:"More options"},u.createElement(y.a,{className:o(D)})))):null},H=Object(c.gql)(B()),U=n("./src/components/session/useViewer.tsx");function F(){var e=o()(["\n  fragment TruncatedPostCardOverflowButton_post on Post {\n    collection {\n      viewerIsEditor\n    }\n    creator {\n      id\n    }\n    ...TruncatedPostCardEditorWriterButton_post\n    ...TruncatedPostCardReaderButton_post\n  }\n  ","\n  ","\n"]);return F=function(){return e},e}var V=function(e){var t,n,r=e.post,o=e.publisherContext,a=Object(U.b)().value,s=!!(null===(t=r.collection)||void 0===t?void 0:t.viewerIsEditor),i=(null==a?void 0:a.id)===(null===(n=r.creator)||void 0===n?void 0:n.id);return a?s||i?u.createElement(P,{post:r,isEditor:s,isWriter:i,publisherContext:o}):u.createElement(N,{post:r,viewer:a}):null},z=Object(c.gql)(F(),C,H),q=n("./src/components/sequence/NormalizeSequenceBodyModel.ts"),G=n("./src/schema-types/globalTypes.ts");function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $=function(e,t){var n;return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{markups:[{anchorType:G.b.LINK,type:G.i.A,start:0,end:(null==e||null===(n=e.text)||void 0===n?void 0:n.length)||0,href:t,userId:null,linkMetadata:null}]}):e},K=function(e,t){var n=Object(q.e)(e).titleIndex;return e.map((function(e,r){return r===n?$(e,t):e}))};function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Q=d.a.createElement("path",{d:"M18.77 6.72l-1.4 1.4V2.98A2.98 2.98 0 0 0 14.39 0H8.63a.72.72 0 0 0 0 1.44h5.76a1.54 1.54 0 0 1 1.54 1.54v5.14l-1.4-1.4a.72.72 0 0 0-1 1.01l2.62 2.63.1.09h.07l.06.04h.56l.06-.04h.06l.1-.08 2.63-2.64a.72.72 0 0 0-1.02-1zM1.24 3.85l1.4-1.4v5.14a2.98 2.98 0 0 0 2.98 2.98h5.97a.72.72 0 1 0 0-1.44H5.62A1.54 1.54 0 0 1 4.08 7.6V2.45l1.4 1.4a.72.72 0 1 0 1-1.01L3.87.2l-.1-.09H3.7L3.63.08h-.56L3 .12h-.04l-.1.09L.22 2.84a.72.72 0 0 0 1 1.03l.02-.02z",fill:"#292929"}),X=function(e){return d.a.createElement("svg",Y({width:20,height:11,viewBox:"0 0 20 11",fill:"none"},e),Q)};function J(){var e=o()(["\n  fragment RepostingButton_post on Post {\n    id\n  }\n"]);return J=function(){return e},e}var Z=Object(c.gql)(J()),ee=function(e){var t=e.post.id,n=Object(f.f)((function(e){return e.config.authDomain})),r=Object(w.rb)(n,t);return u.createElement(E.m,{href:r},u.createElement(X,null))},te=n("./src/components/post/body/PostBody.tsx"),ne=n("./src/components/post/bookmark/index.ts"),re=n("./src/components/post/footer/PostFooterSocialPopover.tsx"),oe=n("./src/components/post/multivote/MultiVote.tsx"),ae=n("./src/components/post/postHelpers.ts"),se=n("./src/components/publisher/CardByline.tsx"),ie=n("./src/components/responses/ResponsesIconButton.tsx"),le=n("./src/framework/design-system/type/index.ts"),ce=n("./src/framework/source/index.ts"),ue=n("./src/framework/track/index.ts"),de=n("./src/framework/track/PostReadTracker.tsx");n("./src/framework/reporter/ReporterContext.tsx");var me=u.createContext(null),pe=function(e){var t=e.event,n=e.children;return u.createElement(me.Provider,{value:{event:t}},n)},fe=n("./src/util/hooks/useIsEligibleToViewNewResponses.tsx"),ge=n("./src/util/navigation.ts"),be=n("./src/util/numbers.ts");function he(){var e=o()(["\n  fragment TruncatedPostCard_post on Post {\n    id\n    creator {\n      ...TruncatedPostCard_user\n    }\n    collection {\n      ...CardByline_collection\n    }\n    extendedPreviewContent(\n      truncationConfig: {\n        previewParagraphsWordCountThreshold: 100\n        minimumWordLengthForTruncation: 150\n        truncateAtEndOfSentence: true\n        showFullImageCaptions: true\n      }\n    ) {\n      bodyModel {\n        ...TruncatedPostCard_bodyModel\n      }\n      isFullContent\n    }\n    firstPublishedAt\n    isLocked\n    isShortform\n    latestPublishedAt\n    mediumUrl\n    postResponses {\n      count\n    }\n    previewContent {\n      subtitle\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n    }\n    readingTime\n    title\n    visibility\n    ...CardByline_post\n    ...TruncatedPostCardOverflowButton_post\n    ...MultiVote_post\n    ...ResponsesIconButton_post\n    ...PostFooterSocialPopover_post\n    ...BookmarkButton_post\n    ...RepostingButton_post\n    ...PostPresentationTracker_post\n    ...PostScrollTracker_post\n    ...PostReadTracker_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return he=function(){return e},e}function ve(){var e=o()(["\n  fragment TruncatedPostCard_user on User {\n    __typename\n    name\n    username\n    ...CardByline_user\n  }\n  ","\n"]);return ve=function(){return e},e}function Ee(){var e=o()(["\n  fragment TruncatedPostCard_bodyModel on RichText {\n    ...PostBody_bodyModel\n  }\n  ","\n"]);return Ee=function(){return e},e}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(e){return{border:0,height:"1px",backgroundColor:e.baseColor.border.lighter,margin:0}},je={xs:{marginTop:"32px"},sm:{marginTop:"32px"},md:{marginTop:"40px"},lg:{marginTop:"40px"},xl:{marginTop:"40px"}},we={xs:{marginTop:"30px",marginBottom:"30px"},sm:{marginTop:"30px",marginBottom:"30px"},md:{marginTop:"50px",marginBottom:"50px"},lg:{marginTop:"50px",marginBottom:"50px"},xl:{marginTop:"50px",marginBottom:"50px"}},_e=function(e){var t=e.post,n=e.publisher,r=t.mediumUrl,o=t.readingTime,a="".concat(Object(be.f)(o||0)," min read");if(!r)return null;var s="Collection"!==n.__typename&&t.collection?"Read more in ".concat(t.collection.name):"Read more",i=Object(ge.a)(r,{readmore:"1"});return u.createElement(E.a,{marginTop:"34px"},u.createElement(E.m,{href:i},u.createElement(le.b,{color:"ACCENT",scale:"M"},s," ",a?" · ".concat(a):"")))},Se=function(e){var t,n,r,o=e.excludeMargin,a=void 0!==o&&o,i=e.includeBottomDivider,l=void 0!==i&&i,c=e.isFirst,d=void 0!==c&&c,m=e.publisher,p=e.post,f=e.hideAuthor,g=void 0!==f&&f,b=e.index,h=Object(x.useCx)(),v=Object(L.a)("enable_reposting"),y=u.useRef(null);Object(ue.h)(y,p);var O=u.useRef(null),j=Object(U.b)().value;Object(de.b)(!!j,O,p);var w,_=Object(fe.a)(),S=(null==p||null===(t=p.postResponses)||void 0===t?void 0:t.count)||0,P=p.id,C=p.clapCount,k=p.collection,I=p.extendedPreviewContent,T=p.isLocked,R=p.isShortform,A=p.firstPublishedAt,M=p.latestPublishedAt,B=p.mediumUrl,D=p.pinnedAt,N=p.visibility,H=Object(ce.e)(),F=Object(ce.c)(ye({},H,{index:b}));B&&H&&(w=Object(ge.a)(B,{source:F}));var z=null==p||null===(n=p.extendedPreviewContent)||void 0===n?void 0:n.bodyModel;if(!z)return null;var q=ye({},z,{paragraphs:K(z.paragraphs,w||B)}),G=!!D&&!!M,W=G?M:A,$=G?"Updated ":"",Y=!(null==p||null===(r=p.extendedPreviewContent)||void 0===r?void 0:r.isFullContent),Q=!d&&u.createElement("hr",{className:h(Oe)}),X=l&&u.createElement("hr",{className:h(Oe)}),J=d?je:we,Z=a?"full":"inset",le={postId:P,collectionId:null==k?void 0:k.id,isFullPost:null==I?void 0:I.isFullContent,postVisibility:Object(ae.a)(N),context:2,pinned:Boolean(D)},me="User"===(null==m?void 0:m.__typename)&&p.collection?p.collection:p.creator,be=m||p.creator;return u.createElement(ce.b,{source:{index:b},extendSource:!0},u.createElement(E.a,s()({boxSizing:"content-box",marginLeft:"auto",marginRight:"auto"},a?{}:J),u.createElement(ce.b,{source:{index:b},extendSource:!0},u.createElement(E.o,{size:Z},Q,u.createElement(ue.b,{post:p,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!Y,suppressEvents:!1,reportClientViewedOnFullPost:!0,postClientViewedContext:2,pinned:!!D},u.createElement(E.a,{marginTop:Q?"24px":void 0},me&&u.createElement(se.a,{publisher:me,hideAuthor:g,href:B||void 0,isOneLine:!0,datePrefix:$,publishedAt:W,showStar:!!T&&!R,post:p}),u.createElement(E.a,{marginTop:"12px",ref:y},u.createElement(pe,{event:{eventName:"post.permalinkClicked",data:ye({},le,{interfaceElement:"title"})}},u.createElement(te.f,{ref:Y?null:O,bodyModel:q,isAuroraPostPageEnabled:!0,richTextStyle:"CARD"})))),Y&&B&&be&&u.createElement(_e,{post:p,publisher:be}),p&&u.createElement(E.a,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"36px"},u.createElement(E.a,{display:"flex",alignItems:"center"},u.createElement(ce.b,{source:{susiEntry:"clap_preview"},extendSource:!0},u.createElement(oe.a,{post:p,buttonStyle:"SUBTLE",hasDialog:!0,shouldHideClapsText:!0})),_&&u.createElement(E.a,{display:"flex",alignItems:"center",xl:{marginLeft:C?"24px":"12px"},lg:{marginLeft:C?"24px":"12px"},md:{marginLeft:C?"16px":"8px"},sm:{marginLeft:C?"16px":"8px"},xs:{marginLeft:C?"16px":"8px"},paddingTop:"3px"},u.createElement(E.m,{href:B+"?responsesOpen=true"},u.createElement(ie.a,{location:"preview",postId:p.id,shouldHideResponsesText:!0,responsesCount:S,setIsResponsesSidebarVisible:function(){},allowResponses:p.allowResponses,isLimitedState:p.isLimitedState})))),u.createElement(E.a,{display:"flex",alignItems:"center",justifyContent:"flex-end"},v&&u.createElement(E.a,{marginRight:"12px"},u.createElement(ee,{post:p})),u.createElement(E.a,{marginRight:"12px"},u.createElement(re.a,{post:p,source:{name:"collection_home"}})),u.createElement(E.a,{marginRight:"12px"},u.createElement(ce.b,{source:{susiEntry:"bookmark_preview"},extendSource:!0},u.createElement(ne.a,{post:p}))),(null==m?void 0:m.__typename)&&u.createElement(V,{post:p,publisherContext:m.__typename}))))))),l&&u.createElement(E.o,{size:Z},X))},Pe=Object(c.gql)(Ee(),te.a),Ce=Object(c.gql)(ve(),se.e),ke=Object(c.gql)(he(),se.c,Pe,Ce,z,oe.b,ie.b,re.b,ne.b,Z,ue.c,ue.e,se.b,de.a)},"./src/components/collection/package/header/calculateLogoDimensions.ts":function(e,t,n){"use strict";function r(e,t,n){var r=n/t||0,o={xs:{maxHeight:32,maxWidth:320},md:{maxHeight:40,maxWidth:400},xl:{maxHeight:60,maxWidth:600}};return r<=2.5?o={xs:{maxHeight:50,maxWidth:125},md:{maxHeight:70,maxWidth:175},xl:{maxHeight:90,maxWidth:225}}:r<5&&(o={xs:{maxHeight:40,maxWidth:200},md:{maxHeight:50,maxWidth:250},xl:{maxHeight:70,maxWidth:350}}),o[e]}n.d(t,"a",(function(){return r}))},"./src/components/collection/package/interim-components/ClickableWrapper.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("./node_modules/react/index.js"),o=n("./src/framework/design-system/components/index.ts"),a=function(e){var t=e.children,n=e.className,a=void 0===n?"":n,s=e.href,i=e.onClick;return s?r.createElement(o.d,{className:a,href:s,onClick:i},t):t}},"./src/components/collection/theming/CustomBackgroundWrapper.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./src/components/collection/theming/customStyleSheet.ts"),m=n("./src/framework/design-system/components/Box.tsx");function p(){var e=o()(["\n  fragment CustomBackgroundWrapper_customStyleSheet on CustomStyleSheet {\n    id\n    global {\n      colorPalette {\n        background {\n          ...getHexFromColorValue_colorValue\n        }\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f=function(e){var t=e.children,n=e.customStyleSheet,r=l()(e,["children","customStyleSheet"]);return u.useMemo((function(){var e,t;return Object(d.k)(null==n||null===(e=n.global)||void 0===e||null===(t=e.colorPalette)||void 0===t?void 0:t.background)}),[n])?u.createElement(m.a,s()({backgroundColor:"BACKGROUND"},r),t):u.createElement(u.Fragment,null,t)},g=Object(c.gql)(p(),d.l)},"./src/components/collection/theming/CustomStyleWrapper.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("./node_modules/react/index.js"),o=n("./src/framework/style/index.ts"),a=function(e){var t=e.children,n=e.rule,a=Object(o.useCx)(),s=n?a(n):"";return s?r.createElement("div",{className:s},t):r.createElement(r.Fragment,null,t)}},"./src/components/collection/theming/Foldable.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n("./src/framework/design-system/components/index.ts"),i=n("./src/framework/design-system/type/index.ts"),l=n("./src/framework/style/index.ts"),c=n("./src/svg/arrow-down-21px.svg"),u=n("./src/util/hooks/useToggle.tsx"),d=function(e){var t=e.children,n=e.title,r=e.titleComponent,d=e.width,m=e.arrowFill,p=Object(l.useCx)(),f=Object(u.a)(!1),g=o()(f,4),b=g[0],h=g[3],v=function(e){var t=a.useRef(null),n=a.useState("0px"),r=o()(n,2),s=r[0],i=r[1],l=a.useState(!1),c=o()(l,2),u=c[0],d=c[1];return a.useEffect((function(){var n=t.current;n&&(e?(i("".concat(n.getBoundingClientRect().height,"px")),d(!0),setTimeout((function(){i("auto"),d(!1)}),300)):"auto"===s&&(i("".concat(n.getBoundingClientRect().height,"px")),d(!0),setTimeout((function(){return i("0px")}),50),setTimeout((function(){return d(!1)}),300)))}),[e]),{height:s,isAnimating:u,ref:t}}(b),E=v.ref,x=v.height,y=v.isAnimating;return a.createElement(a.Fragment,null,a.createElement("button",{className:p({width:d||"100%",height:"100%",border:"none",textAlign:"left",outline:"none",cursor:"pointer",padding:"0px"}),onClick:h,disabled:y},a.createElement(s.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},r||a.createElement(i.c,{scale:"XS"},n||""),a.createElement(c.a,{className:p((function(e){return{transition:"".concat(300,"ms transform"),transform:b?"rotate(180deg)":"rotate(0)",fill:m||e.baseColor.fill.normal}}))}))),a.createElement("div",{className:p({transition:"".concat(300,"ms height"),height:x,overflow:!b||y?"hidden":"visible",opacity:b?1:0})},a.createElement("div",{ref:E,className:p({opacity:b?1:0,transition:"".concat(300,"ms opacity"),display:"flex",justifyContent:"space-between",flexDirection:"column",flexFlow:"wrap"})},t)))}},"./src/components/cta/HighlightCTA.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n("./src/components/cta/TextCTA.tsx"),i=n("./src/framework/design-system/components/index.ts"),l=n("./src/framework/design-system/type/index.ts"),c=n("./src/framework/style/index.ts"),u=n("./src/styles/breakpoints.ts"),d=n("./src/styles/colors.ts"),m=function(e){var t=e.children,n=e.scale,r=void 0===n?s.a.L:n,m=Object(c.useCx)();return a.createElement("div",{className:m((function(e){return o()({background:Object(d.y)(.05),borderRadius:"4px",margin:"24px -16px",position:"relative"},u.sm(e),{margin:"24px -12px 0"})}))},a.createElement(i.a,{display:"flex",justifyContent:"space-between",maxWidth:"740px",padding:"16px",sm:{padding:"12px"}},a.createElement(l.b,{scale:r,color:"DARKER"},t)))}},"./src/components/cta/TextCTA.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r,o=n("./node_modules/react/index.js"),a=n("./src/framework/design-system/components/index.ts"),s=n("./src/framework/design-system/type/index.ts");!function(e){e.S="S",e.L="L"}(r||(r={}));var i=function(e){var t=e.children,n=e.scale,i=void 0===n?r.L:n;return o.createElement(a.a,{margin:"40px 0",sm:{margin:"36px 0"}},o.createElement(s.b,{scale:i},t))}},"./src/components/editor/editorHelpers.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return x})),n.d(t,"h",(function(){return O})),n.d(t,"m",(function(){return j})),n.d(t,"n",(function(){return w})),n.d(t,"i",(function(){return _})),n.d(t,"l",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"k",(function(){return k})),n.d(t,"j",(function(){return I})),n.d(t,"d",(function(){return T})),n.d(t,"g",(function(){return R}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/lodash/flattenDeep.js"),l=n.n(i),c=n("./node_modules/slate/dist/index.es.js"),u=n("./src/schema-types/globalTypes.ts");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p,f=250,g=5;!function(e){e[e.Link=0]="Link"}(p||(p={}));var b=["numbered-list","bulleted-list","bq"];function h(e){if(!e.children)return[];if(e.children.every((function(e){return function(e){return c.h.isText(e)||"link"===e.type}(e)}))){var t=c.c.string(e),n=!(null==e?void 0:e.name),r=n?y():e.name,o=function(e){switch(e){case"oli":return 10;case"uli":return 9;case"bq-line":return 6;case"image":return 4;case"title":return 3;default:return 1}}(e.type);if("image"===e.type)return[{type:n?1:3,paragraph:{name:r,type:o,text:t,markups:[],layout:1,metadata:{id:e.imageProps.miroId,originalWidth:e.imageProps.width,originalHeight:e.imageProps.height}},verifySameName:!n}];if(!t.length&&!e.name)return[];if(!t.length&&e.name)return[{type:2,paragraph:{name:e.name}}];var a=e.children.reduce((function(e,t){var n=s()(e,2),r=n[0],o=n[1],a=c.c.string(t).length;return t.italic&&o.push({type:2,start:r,end:r+a}),t.bold&&o.push({type:1,start:r,end:r+a}),"link"===t.type&&o.push({type:3,start:r,end:r+a,href:t.url,title:"",rel:"",anchorType:0}),[r+a,o]}),[0,[]]);return[{type:n?1:3,paragraph:{markups:s()(a,2)[1],name:r,text:t,type:o},verifySameName:!n}]}return l()(e.children.map(h).filter((function(e){return e.length})))}function v(e,t){return e.map((function(e,n){return e.index=n+t,e}))}var E=function(e){var t=[];return e.map((function(e){return t.includes(e.name)?m({},e,{name:void 0}):(e.name&&t.push(e.name),e)}))};function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,r=[];if(n){var o=y();r=[{type:8,index:0,section:{name:o,startIndex:0}}]}var a=e.children,s=E(a);e.children=s;var i=0;if(!s[0].name&&"title"!==s[0].type){var l=y();r.push({type:1,index:0,paragraph:{name:l,type:3,text:"",markups:[]}}),i=1}var c=h(e),u=v(c,i);return r.concat(u)}function y(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")}var O=function(e,t){e.selection&&w(e,t)},j=function(e,t){var n=t||e.selection;c.i.unwrapNodes(e,{match:function(e){return"link"===e.type},at:n})},w=function(e,t){(function(e){var t=c.a.nodes(e,{match:function(e){return"link"===e.type}});return!!s()(t,1)[0]})(e)&&j(e);var n=e.selection,r=n&&c.g.isCollapsed(n),o={type:"link",url:t,children:r?[{text:t}]:[]};r?c.i.insertNodes(e,o):(c.i.wrapNodes(e,o,{split:!0}),c.i.collapse(e,{edge:"end"}))},_=function(e,t,n){var r=n||e.selection,o=c.a.nodes(e,{match:function(e){return!0===e[t]||e.type===t},at:r,mode:"all"});return!!s()(o,1)[0]},S=function(e,t){_(e,t)?c.a.removeMark(e,t):c.a.addMark(e,t,!0)},P=function(e){switch(e){case"bq":return"bq-line";case"numbered-list":return"oli";case"bulleted-list":default:return"uli"}},C=function(){if("undefined"!=typeof window){var e=window.getSelection(),t=e&&!e.isCollapsed&&e.getRangeAt(0);return t&&t.getBoundingClientRect()}},k=function(e,t,n){var r=n||e.selection,o=_(e,t,n),a=b.includes(t),s=c.g.isRange(r)?c.a.rangeRef(e,r):c.f.isPoint(r)?c.a.pointRef(e,r):c.a.pathRef(e,r);if(c.i.unwrapNodes(e,{at:r,match:function(e){return b.includes(e.type)},split:!0}),s.current&&(c.i.setNodes(e,{type:o?"paragraph":a?P(t):t},{at:s.current}),!o&&a)){var i={type:t,children:[]};c.i.wrapNodes(e,i,{at:s.current})}},I=function(e,t){["bold","italic"].forEach((function(n){_(e,n,t)&&c.i.unsetNodes(e,n,{at:t})})),["link","numbered-list","bulleted-list","bq"].forEach((function(n){_(e,n,t)&&c.i.unwrapNodes(e,{at:t,match:function(e){return e.type===n}})}))},T=function(e){if(e){var t=function(e){if(!e||!e.children.length)return!1;var t=c.a.point(e,[0],{edge:"start"}),n=e.children.length;return{anchor:t,focus:c.a.point(e,[n-1],{edge:"end"})}}(e);t&&(c.i.removeNodes(e,{at:t}),c.i.insertNodes(e,{children:[{text:""}]}))}},R=function(e){return e.paragraphs.map((function(e){var t=e.markups,n=e.name,r=e.text;if(e.type===u.m.H3)return{children:[{text:r}],name:n,type:"title"};if(!(null==t?void 0:t.length))return{children:[{text:r}],name:n};var o=new Set;o.add(0),o.add(r.length),t.forEach((function(e){var t=e.start,n=e.end;o.add(t),o.add(n)}));var a=Array.from(o);return{children:a.sort((function(e,t){return e-t})).slice(1).map((function(e,n,o){var s=n?o[n-1]:a[0],i=e,l=t.filter((function(e){return e.start<=s&&i<=e.end})),c={text:r.substring(s,i)};return l.forEach((function(e){var t=e.href;switch(e.type){case u.i.STRONG:("link"===c.type?c.children[0]:c).bold=!0;break;case u.i.EM:("link"===c.type?c.children[0]:c).italic=!0;break;case u.i.A:c={type:"link",url:t,children:[c]}}})),c})),name:n}}))}},"./src/components/editor/getSlateBodyFromPostBodyModel_bodyModel.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js");function s(){var e=o()(["\n  fragment getSlateBodyFromPostBodyModel_bodyModel on RichText {\n    paragraphs {\n      id\n      name\n      text\n      type\n      markups {\n        type\n        start\n        end\n        href\n        anchorType\n        userId\n        linkMetadata {\n          httpStatus\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var i=Object(a.gql)(s())},"./src/components/error/PostResultError.tsx":function(e,t,n){"use strict";n.d(t,"c",(function(){return k})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return T}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/susi/RedirectToSignIn.tsx"),l=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),c=n.n(l),u=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),p=n.n(m),f=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(f),b=n("./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),h=function(e){function t(){return c()(this,t),d()(this,p()(t).call(this,"Expected postResult to exist.\n       For more detail, try checking for GraphQL server errors with the same x-request-id."))}return g()(t,e),t}(n.n(b)()(Error)),v=n("./src/screens/ContentErrorScreen.tsx"),E=n("./src/screens/ErrorScreen.tsx"),x=n("./src/screens/NotFoundScreen.tsx"),y=n("./src/screens/SuspendedScreen.tsx");function O(){var e=o()(["\n  fragment UnavailableForLegalReasonsScreen_unavailableForLegalReasons on UnavailableForLegalReasons {\n    lumenId\n  }\n"]);return O=function(){return e},e}function j(e){var t=e.errorData;return s.createElement(v.a,{code:451,title:"451 Not available — Medium",description:"This story is subject to a DMCA copyright or other legal or government claim.",lumenId:t.lumenId})}var w=Object(a.gql)(O());function _(){var e=o()(["\n  fragment WithheldInCountryScreen_withheldInCountry on WithheldInCountry {\n    lumenId\n  }\n"]);return _=function(){return e},e}function S(e){var t=e.errorData;return s.createElement(v.a,{code:451,title:"451 Not available in your country — Medium",description:"This page is not available in your country.",lumenId:t.lumenId})}var P=Object(a.gql)(_());function C(){var e=o()(["\n  fragment PostResultError_postResult on PostResult {\n    __typename\n    ... on Post {\n      id\n    }\n    ... on UnavailableForLegalReasons {\n      ...UnavailableForLegalReasonsScreen_unavailableForLegalReasons\n    }\n    ... on WithheldInCountry {\n      ...WithheldInCountryScreen_withheldInCountry\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}var k=function(e){return!e||"Post"!==e.__typename},I=function(e){var t=e.postResult;if(!t)return s.createElement(E.a,{error:new h});switch(t.__typename){case"Unauthorized":return s.createElement(i.a,{opt_isDraft:!0});case"NotFound":return s.createElement(x.a,null);case"AccountDeleted":return s.createElement(v.a,{code:410,title:"410 Deleted by author — Medium",description:"User deactivated or deleted their account."});case"AccountSuspended":return s.createElement(y.a,{suspension:"account"});case"PostSuspended":return s.createElement(y.a,{suspension:"post"});case"Blocked":return s.createElement(v.a,{code:403,title:"403 Blocked — Medium",description:"This user had blocked you from following them or viewing their stories."});case"RemovedByUser":return s.createElement(v.a,{code:410,title:"410 Deleted by author — Medium",description:"The author deleted this Medium story."});case"UnavailableForLegalReasons":return s.createElement(j,{errorData:t});case"WithheldInCountry":return s.createElement(S,{errorData:t});default:return s.createElement(E.a,{error:new Error("Unsupported postResult: ".concat(t.__typename))})}},T=Object(a.gql)(C(),w,P)},"./src/components/footer/GlobalFooter.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n("./node_modules/react-redux/es/index.js"),i=n("./src/components/metabar/Logo.tsx"),l=n("./src/components/session/useFlag.tsx"),c=n("./src/components/session/useViewer.tsx"),u=n("./src/components/ui/AndroidAppDownloadButton.tsx"),d=n("./src/components/ui/IosAppDownloadButton.tsx"),m=n("./src/framework/design-system/components/index.ts"),p=n("./src/framework/design-system/type/index.ts"),f=n("./src/framework/style/index.ts"),g=n("./src/styles/colors.ts"),b=n("./src/util/routes.ts");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=e.authDomain,n=e.productName;return a.createElement(m.a,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},a.createElement(m.a,{paddingBottom:"8px"},a.createElement(m.m,{href:Object(b.qb)(t)},a.createElement(p.c,{scale:"S"},"Become a member"))),a.createElement(p.b,{scale:"M"},"Get unlimited access to the best stories on ".concat(n," — and support writers while you’re at it. Just $5/month. "),a.createElement(m.m,{href:Object(b.qb)(t),inline:!0,linkStyle:"OBVIOUS"},"Upgrade")))}var x=function(e){var t=e.authDomain,n=e.productName;return a.createElement(m.a,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},a.createElement(m.a,{paddingBottom:"8px"},a.createElement(m.m,{href:Object(b.ic)(t,"members")},a.createElement(p.c,{scale:"S"},"Explore your membership"))),a.createElement(p.b,{scale:"M"},"Thank you for being a member of ".concat(n,". You get unlimited access to insightful\n          stories from amazing thinkers and storytellers. "),a.createElement(m.m,{href:Object(b.ic)(t,"members"),inline:!0,linkStyle:"OBVIOUS"},"Browse")))},y=function(e){var t=e.authDomain,n=e.productName;return a.createElement(m.a,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},a.createElement(m.a,{paddingBottom:"8px"},a.createElement(m.m,{href:Object(b.yb)(t,n)},a.createElement(p.c,{scale:"S"},"Share your thinking."))),a.createElement(p.b,{scale:"M"},"If you have a story to tell, knowledge to share, or a perspective to offer — welcome home.\n        It’s easy and free to post your thinking on any topic. ",a.createElement(m.m,{href:Object(b.yb)(t,n),inline:!0,linkStyle:"OBVIOUS"},"Write on ".concat(n))))},O=function(e){var t=e.slimFooter,n=Object(s.f)((function(e){return{authDomain:e.config.authDomain,productName:e.config.productName}}),s.d),r=n.authDomain,o=n.productName,h=!!Object(l.a)("enable_footer_app_buttons"),O=!!Object(l.a)("enable_unbound"),j=Object(f.useTheme)(),w=Object(c.b)().value,_=v({},j,{baseColor:v({},j.baseColor,{background:{light:g.y(.76),normal:g.y(.84),dark:g.y(.9)},border:{lighter:g.A(.1),light:g.A(.2),normal:g.A(.34),dark:g.A(.54),darker:g.A(.84)},fill:{lighter:g.A(.7),light:g.A(.8),normal:g.A(.98),dark:g.A(.99),darker:g.A(1)},text:{lighter:g.A(.7),light:g.A(.8),normal:g.A(.98),dark:g.A(.99),darker:g.A(1)}})});return a.createElement(m.x,{theme:_},a.createElement(m.a,{backgroundColor:"BASE_DARK",padding:"".concat(t?"32px":"60px"," 0"),sm:{padding:"32px 0"}},a.createElement(m.o,null,t?null:a.createElement(m.a,{borderBottom:"BASE_DARK",display:"flex",justifyContent:"space-between",marginBottom:"32px",paddingBottom:"48px",sm:{display:"none"}},a.createElement(m.a,{display:"flex",justifyContent:"space-between",margin:"0 -12px"},a.createElement(m.a,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},a.createElement(m.a,{paddingBottom:"8px"},a.createElement(m.m,{href:Object(b.a)({authDomain:r,autoplay:!0})},a.createElement(p.c,{scale:"S"},O?"Learn more.":"Discover ".concat(o)))),a.createElement(p.b,{scale:"M"},O?"".concat(o," is an open platform where 170 million readers come to find insightful and dynamic thinking.\n                        Here, expert and undiscovered voices alike dive into the heart of any topic and bring new ideas to the surface. "):"Welcome to a place where words matter. On ".concat(o,", smart voices and\n                        original ideas take center stage - with no ads in sight. "),a.createElement(m.m,{href:Object(b.a)({authDomain:r,autoplay:!0}),inline:!0,linkStyle:"OBVIOUS"},O?"Learn more":"Watch"))),a.createElement(m.a,{flexGrow:"1",flexShrink:"1",flexBasis:"0",margin:"0 12px"},a.createElement(m.a,{paddingBottom:"8px"},a.createElement(m.m,{href:Object(b.jc)(r)},a.createElement(p.c,{scale:"S"},"Make ",o," yours",O&&"."))),a.createElement(p.b,{scale:"M"},O?"Follow the writers, publications, and topics that matter to you, and you’ll see them on your homepage and in your inbox. ":"Follow all the topics you care about, and we’ll deliver the best stories for you to your homepage and inbox. ",a.createElement(m.m,{href:Object(b.jc)(r),inline:!0,linkStyle:"OBVIOUS"},"Explore"))),O?a.createElement(y,{authDomain:r,productName:o}):w&&w.mediumMemberAt?a.createElement(x,{authDomain:r,productName:o}):a.createElement(E,{authDomain:r,productName:o}))),a.createElement(m.a,{display:"flex",flexDirection:"column"},a.createElement(m.a,{alignItems:"center",display:"flex",justifyContent:"space-between"},a.createElement(m.m,{href:"https://".concat(r,"/"),ariaLabel:"Go to homepage"},a.createElement(i.e,{fill:g.B})),a.createElement(p.b,{scale:"M"},a.createElement(m.a,{display:"flex",justifyContent:"space-between",paddingTop:"8px",width:"200px",sm:{display:"flex",width:"140px"}},a.createElement(p.b,{color:"DARKER",scale:"L"},a.createElement(m.m,{href:Object(b.a)({authDomain:r}),inline:!0},"About")),a.createElement(p.b,{color:"DARKER",scale:"L"},a.createElement(m.m,{href:Object(b.bb)(),inline:!0},"Help")),a.createElement(p.b,{color:"DARKER",scale:"L"},a.createElement(m.m,{href:Object(b.hb)(),inline:!0},"Legal"))))),h&&a.createElement(a.Fragment,null,a.createElement(m.a,{display:"none",sm:{display:"flex",marginBottom:"16px",marginTop:"30px"}},a.createElement(p.b,{color:"LIGHTER",scale:"L"},"Get the Medium app")),a.createElement(m.a,{display:"none",sm:{display:"flex",flexDirection:"row",marginBottom:"16px",width:"100%"}},a.createElement(m.a,{marginRight:"16px"},a.createElement(d.a,{entryPoint:"postPageFooter"})),a.createElement(m.a,null,a.createElement(u.a,{entryPoint:"postPageFooter"}))))))))}},"./src/components/meter/ContentWall.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("./node_modules/react/index.js"),o=n("./src/framework/design-system/components/index.ts"),a=n("./src/styles/colors.ts"),s=function(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement(o.a,{marginTop:"-240px",background:"linear-gradient(".concat(Object(a.A)(0),",\n        ").concat(Object(a.A)(.5),",\n        ").concat(Object(a.A)(1),")"),height:"250px",position:"relative",width:"100%"}),r.createElement(o.a,{backgroundColor:"BACKGROUND"},r.createElement(o.a,{margin:"auto",maxWidth:"760px",sm:{margin:"0 18px 0"}},t)))}},"./src/components/meter/MeterController.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return W})),n.d(t,"c",(function(){return $})),n.d(t,"b",(function(){return K}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/typeof.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/@babel/runtime/helpers/extends.js"),p=n.n(m),f=n("./node_modules/pluralize/pluralize.js"),g=n.n(f),b=n("./src/components/cta/HighlightCTA.tsx"),h=n("./src/components/optimizely/OptimizelyWrapper.tsx"),v=n("./src/framework/design-system/components/index.ts"),E=function(e){var t=e.featureString,n=e.link,r=e.text,o=e.showTrialMeter;return u.createElement(h.a,{featureString:t,target:o?"cc-trial-highlight-box":"highlight-box"},u.createElement(b.a,null,u.createElement(h.a,{featureString:t,target:o?"cc-trial-copy":"copy",tag:"span"},r," "),u.createElement(v.a,{display:"inline",whiteSpace:"nowrap"},u.createElement(h.a,{featureString:t,target:o?"cc-trial-link":"link",tag:"span"},n))))},x=n("./src/components/session/useFlag.tsx"),y=n("./src/components/session/useViewer.tsx"),O=n("./src/components/susi/helpers/types.ts"),j=n("./src/components/upsell/UpsellClickable.tsx"),w=n("./src/framework/reporter/index.ts"),_=n("./src/framework/source/index.ts"),S=n("./src/framework/track/UpsellPresentationTracker.tsx"),P=n("./src/util/routes.ts");function C(){var e=o()(["\n  fragment LIHighlightMeter_post on Post {\n    id\n    ...UpsellClickable_post\n  }\n  ","\n"]);return C=function(){return e},e}var k=function(e,t,n){return e<=0?u.createElement(u.Fragment,null,"This is your ",u.createElement("b",null,"last")," free ",(t||n)&&"member-only"," story this month."):u.createElement(u.Fragment,null,"You have ",u.createElement("b",null,e)," free ",(t||n)&&"member-only"," ",g()("story",e)," left this month.")},I=function(e){var t=e.meterCount,n=e.meterLimit,r=e.post,o=Object(d.f)((function(e){return e.config.productName})),a=Object(y.b)().value,s=Object(w.c)(),i=null==a?void 0:a.isMembershipTrialEligible,l=!(!Object(x.a)("enable_trial_upsell")||!i),c=!!Object(x.a)("enable_unbound"),m="li-highlight-meter-".concat(t);u.useEffect((function(){s.event("meter.viewed",{uiType:O.a.LIHighlightCTA,postId:r.id,meterCount:t,userId:null==a?void 0:a.id}),i&&s.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var f=Object(d.f)((function(e){return{authDomain:e.config.authDomain}})).authDomain,g=u.createElement(S.a,{tag:"span"},u.createElement(j.a,p()({linkStyle:"OBVIOUS",post:r,inline:!!c},l&&{redirectUrl:Object(P.Ab)(f)}),l?"Start your free trial":c?"See the benefits of ".concat(o," membership"):"Upgrade for unlimited access."));return u.createElement(_.b,{source:{dimension:"post_counter",name:"upgrade_membership",postId:r.id}},u.createElement(E,{featureString:m,text:k(n-t,l,c),link:g,showTrialMeter:l}))},T=Object(c.gql)(C(),j.b),R=n("./src/components/susi/SusiClickable.tsx");function L(){var e=o()(["\n  fragment LOHighlightMeter_post on Post {\n    id\n  }\n"]);return L=function(){return e},e}var A=function(e,t){switch(e){case 1:return t?u.createElement(u.Fragment,null,"You have ",u.createElement("b",null,"2")," free member-only stories left this month."):u.createElement(u.Fragment,null,"You have ",u.createElement("b",null,"2")," free stories left this month.");case 2:return t?u.createElement(u.Fragment,null,"You have ",u.createElement("b",null,"1")," free member-only story left this month."):u.createElement(u.Fragment,null,"You have ",u.createElement("b",null,"1")," free story left this month.");case 3:return t?u.createElement(u.Fragment,null,"This is your ",u.createElement("b",null,"last")," free member-only story this month."):u.createElement(u.Fragment,null,"This is your ",u.createElement("b",null,"last")," free story this month.");default:return t?u.createElement(u.Fragment,null,"You've read all your free member-only stories this month."):u.createElement(u.Fragment,null,"You've read all your free stories this month.")}},M=function(e){var t=e.meterCount,n=e.post,r=Object(d.f)((function(e){return e.config.productName})),o=!!Object(x.a)("enable_unbound"),a=function(e){switch(e){case 3:return"metered_view_3";case 2:return"metered_view_2";case 1:default:return"smart_meter"}}(t),s=Object(w.c)(),i="lo-highlight-meter-".concat(t);u.useEffect((function(){s.event("meter.viewed",{uiType:O.a.LOHighlightCTA,postId:n.id,meterCount:t})}),[]);var l=u.createElement(R.a,{linkStyle:"OBVIOUS",inline:!!o,operation:"register"},o?"Sign up for ".concat(r," and get an extra one"):"Sign up and get an extra one for free.");return u.createElement(_.b,{source:{susiEntry:a,postId:n.id}},u.createElement(E,{featureString:i,text:A(t,o),link:l,showTrialMeter:!1}))},B=Object(c.gql)(L()),D=n("./src/components/read-next/ReadNext.tsx"),N=n("./src/components/session/WithViewer.tsx"),H=n("./src/components/susi/susi-modal/SusiContainer.tsx"),U=n("./src/screens/helpers/visits.ts"),F=n("./src/store/actions/branch.ts");function V(){var e=o()(["\n  fragment MeterController_meteringInfo on MeteringInfo {\n    postIds\n    maxUnlockCount\n  }\n"]);return V=function(){return e},e}function z(){var e=o()(["\n  fragment MeterController_post on Post {\n    creator {\n      id\n    }\n    isLocked\n    lockedSource\n    ...LIHighlightMeter_post\n    ...LOHighlightMeter_post\n    ...SusiContainer_post\n  }\n  ","\n  ","\n  ","\n"]);return z=function(){return e},e}var q=function(e){var t=e.meteringInfo,n=e.post,r=e.viewer,o=u.useState(!1),a=l()(o,2),s=a[0],i=a[1],c=t.maxUnlockCount||3,d=t.postIds.length;return d<=c?Object(U.q)()&&Object(D.b)(r)?(Object(U.j)(),null):(s||i(!0),u.createElement(I,{meterCount:d,post:n,meterLimit:c})):null},G=function(e){var t=e.meterCount,n=e.post,r=u.useState(!1),o=l()(r,2),a=o[0],s=o[1];switch(t){case 1:case 2:case 3:return a||s(!0),u.createElement(M,{meterCount:t,post:n});default:return null}},W=function(e){var t=e.meteringInfo,n=e.post,r=Object(d.e)(),o=u.useState(!1),a=l()(o,2),i=a[0],m=a[1];u.useEffect((function(){void 0!==("undefined"==typeof document?"undefined":s()(document))&&m(!0),r(Object(F.f)(!1))}),[]);var p=Object(c.useQuery)(N.a),f=p.loading,g=p.error,b=p.data,h=(b=void 0===b?{viewer:void 0}:b).viewer;if(f||g)return u.createElement(u.Fragment,null);var v=h&&h.mediumMemberAt||void 0,E=n&&n.creator&&n.creator.id||void 0,x=h&&h.id||void 0,y=h?v||E===x:"LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource,O=!i||!n.isLocked||!t.postIds.includes(n.id)||y,j=h?u.createElement(q,{meteringInfo:t,post:n,viewer:h}):u.createElement(G,{meterCount:t.postIds.length,post:n});return u.createElement(u.Fragment,null,!O&&j)},$=Object(c.gql)(z(),T,B,H.e),K=Object(c.gql)(V())},"./src/components/meter/PayWall.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return T}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/components/meter/ContentWall.tsx"),c=n("./src/components/optimizely/OptimizelyWrapper.tsx"),u=n("./src/components/session/useFlag.tsx"),d=n("./src/components/session/useViewer.tsx"),m=n("./src/components/style/BaseThemeProvider.tsx"),p=n("./src/components/susi/alternate-user/AlternateUserEmail.tsx"),f=n("./src/components/susi/alternate-user/AlternateUserSocial.tsx"),g=n("./src/components/susi/alternate-user/NotYou.tsx"),b=n("./src/components/susi/alternate-user/SusiAlternateUserController.tsx"),h=n("./src/components/upsell/UpsellClickable.tsx"),v=n("./src/framework/design-system/components/index.ts"),E=n("./src/framework/design-system/type/index.ts"),x=n("./src/framework/design-system/type/Detail.tsx"),y=n("./src/framework/reporter/index.ts"),O=n("./src/framework/source/index.ts"),j=n("./src/framework/track/UpsellPresentationTracker.tsx"),w=n("./src/screens/helpers/users.ts"),_=n("./src/store/actions/navigation.ts"),S=n("./src/util/routes.ts");function P(){var e=o()(["\n  fragment PayWall_post on Post {\n    id\n  }\n"]);return P=function(){return e},e}var C=function(e){var t=e.optimizelyFeatureString,n=e.post,r=e.viewer,o=e.showTrialPaywall,a=e.authDomain,i=!!Object(u.a)("enable_lite_pay_page"),l=!!Object(u.a)("enable_new_checkout_flow");return s.createElement(O.b,{source:{dimension:"post_limit",name:"upgrade_membership",postId:n.id}},s.createElement(j.a,null,s.createElement(v.a,{display:"inline-block",textAlign:"center"},s.createElement(c.a,{featureString:t,target:o?"trial-upsell-button":"upsell-button-".concat(r&&r.hasPastMemberships?"resume-membership":"upgrade")},s.createElement(h.a,{isButton:!0,buttonStyle:o?"BRAND":"STRONG",width:o||r&&r.hasPastMemberships?"182px":"104px",redirectUrl:i&&(o||l)?Object(S.Ab)(a):Object(S.Bb)(a)},o?"Start your free trial":r&&r.hasPastMemberships?"Resume membership":"Upgrade")))))},k=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=Object(i.e)();return s.createElement(s.Fragment,null,s.createElement(v.a,{display:"flex",sm:{flexDirection:"column"}},s.createElement(v.a,{display:"flex",flexDirection:"row",justifyContent:"center"},n.facebook||n.google||n.twitter?s.createElement(f.a,{userSocialLogins:n}):s.createElement(p.a,{onSuccess:function(){return r(Object(_.s)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:n.userId},(function(e){var t=e.handleSubmit;return s.createElement(v.b,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")})))),t&&s.createElement(v.a,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},s.createElement(x.a,{scale:"M"},s.createElement(g.a,{declineSuggestedAccount:t,isSocial:!!n&&!!(n.facebook||n.google||n.twitter)}))))},I=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=e.suggestedAccountEventData,o=e.showSuggestedAccount,a=e.postId;return s.createElement(O.b,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:a}},s.createElement(j.a,{eventData:r},s.createElement(v.a,{display:"inline-block",textAlign:"center"},s.createElement(k,{declineSuggestedAccount:t,showSuggestedAccount:o,userSocialLogins:n}),s.createElement(v.a,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},s.createElement(x.a,{scale:"L"},s.createElement(h.a,{eventData:r,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},T=function(e){var t=e.post,n=Object(i.f)((function(e){return{sessionUserId:e.session.user.id,authDomain:e.config.authDomain,productName:e.config.productName}}),i.d),r=n.productName,o=n.sessionUserId,a=n.authDomain,p=Object(d.b)().value,f=Object(y.c)(),g=null==p?void 0:p.isMembershipTrialEligible,h=!(!Object(u.a)("enable_trial_upsell")||!g),O=!!Object(u.a)("enable_unbound");s.useEffect((function(){g&&f.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var j="paywall";return s.createElement(m.b,null,s.createElement(l.a,null,s.createElement(b.a,{postRenderCallback:function(){}},(function(e){var n,i=e.loading,l=e.showSuggestedAccount,u=e.declineSuggestedAccount,d=e.userSocialLogins;return i?s.createElement(s.Fragment,null):(l&&(j="suggested-account-paywall"),l&&(n={alternateUserSuggestionShown:l,alternateUserSuggestionAccountType:Object(w.a)(d),alternateUserSuggestionTargetUserId:!!d&&d.userId,alternateUserSuggestionSourceUserId:p?p.id:o}),s.createElement(s.Fragment,null,s.createElement(c.a,{featureString:j,target:h?"trial-background-color":"background-color"},s.createElement(v.a,{display:"flex",minHeight:"350px",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},s.createElement(v.a,{display:"flex",flexDirection:"column",padding:"48px 50px",sm:{padding:"28px 16px 32px",textAlign:"center"}},s.createElement(c.a,{featureString:j,target:h?"webCCTrialHeading":"fewerClicksHeading"},s.createElement(E.d,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},function(e,t,n){var r=n.enableUnbound,o=n.showSuggestedAccount,a=n.showTrialPaywall,i=t?Object(w.b)(t):null;return i=i&&i.length<=13?i:null,o?"Switch to your member account for unlimited reading.":a?s.createElement(v.a,{textAlign:"center",sm:{marginBottom:"5px",textAlign:"center"}},i?"".concat(i,", keep reading."):"Keep reading."):r?s.createElement(v.a,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},"How to read this story — and everything else on ",e,"."):s.createElement(v.a,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},i?"".concat(i,", get unlimited access."):"Get unlimited access.")}(r,p&&p.name,{enableUnbound:O,showSuggestedAccount:l,showTrialPaywall:h}))),s.createElement(x.a,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},!l&&!h&&s.createElement(s.Fragment,null,s.createElement(c.a,{featureString:j,target:"second-header-fewer-clicks"},s.createElement(v.a,{marginTop:"8px",marginBottom:"28px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},O?"Not every story on ".concat(r," is free, like this one. Become a member to get unlimited access and support the voices you want to hear more from."):"You've read all of your free stories this month. Become a member to keep reading.")),s.createElement(v.a,{display:"flex",justifyContent:"flex-start",sm:{justifyContent:"center"}},s.createElement(C,{optimizelyFeatureString:j,post:t,viewer:p,showTrialPaywall:h,authDomain:a}))),s.createElement(c.a,{featureString:j,target:h?"subtitle-copy-web-cc-trial":"subtitle-copy-fewer-clicks"},s.createElement(v.a,{marginTop:l?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:"inline-block"}},function(e,t,n,r){var o=n.enableUnbound,a=n.showSuggestedAccount,i=n.showTrialPaywall;if(a&&t){var l=t.isMember,c=t.redactedEmailAddress;return s.createElement(s.Fragment,null,"Looks like you're coming from the ",l&&"member ","account"," ",s.createElement("b",null,c)," but you’re signed in as ",s.createElement("b",null,null==r?void 0:r.email),". Switch to your",l?" member account for unlimited access":" account",".")}return o?s.createElement(v.a,{marginTop:"28px",marginBottom:"28px",textAlign:i?"center":"left"},i?"Start your 1 month free trial for unlimited access to everything on ".concat(e,". If it’s not for you, cancel anytime."):s.createElement(s.Fragment,null,s.createElement("b",null,"Read any story. "),"Access everything on ",e," across all your devices with no limits or ads.",s.createElement("br",null),s.createElement("br",null),s.createElement("b",null,"Reward great writing. "),"A portion of your membership fee will go toward the writers you read most.")):i?s.createElement(v.a,{marginTop:"28px",marginBottom:"28px"},"You’ve reached your limit of free member-only stories this month. Get unlimited access to every idea on ",e,", free for 1 month. If it's not for you, cancel anytime."):s.createElement(v.a,{marginTop:"28px",marginBottom:"28px",textAlign:"left"},"Here's what you get when you upgrade to membership:",s.createElement(v.a,{marginTop:"28px",marginBottom:"28px"},s.createElement("b",null,"Unlimited access. ")," Explore ",e,"'s library filled with everything you're curious about."),s.createElement(v.a,{marginBottom:"28px"},s.createElement("b",null,"Reward quality writing.")," When you spend time reading a story, a portion of your membership fee will go directly to its author."),s.createElement(v.a,{marginBottom:"28px"},'"I love ',e,"'s membership — it gives me access to the stories I love by the writers I love, and it allows me to help support those writers financially.\"",s.createElement("br",null)," ",s.createElement("b",null,"—Kayt Molina, ",e," member ")))}(r,d,{enableUnbound:O,showSuggestedAccount:l,showTrialPaywall:h},p)))),!!l&&d&&s.createElement(I,{declineSuggestedAccount:u,userSocialLogins:d,suggestedAccountEventData:n,showSuggestedAccount:l,postId:t.id}),h&&!l&&s.createElement(C,{optimizelyFeatureString:j,post:t,viewer:p,showTrialPaywall:h,authDomain:a}))))))}))))},R=Object(a.gql)(P())},"./src/components/meter/RegWall.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return k}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/metabar/OpenInApp.tsx"),l=n("./src/components/meter/ContentWall.tsx"),c=n("./src/components/optimizely/OptimizelyWrapper.tsx"),u=n("./src/components/session/useFlag.tsx"),d=n("./src/components/style/BaseThemeProvider.tsx"),m=n("./src/components/susi/SusiClickable.tsx"),p=n("./src/components/susi/helpers/types.ts"),f=n("./src/components/susi/helpers/useReduxSusi.tsx"),g=n("./src/components/susi/oauth-buttons/EmailSusiButton.tsx"),b=n("./src/components/susi/oauth-buttons/FacebookSusiButton.tsx"),h=n("./src/components/susi/oauth-buttons/GoogleSusiButton.tsx"),v=n("./src/framework/design-system/components/index.ts"),E=n("./src/framework/design-system/type/index.ts"),x=n("./src/framework/reporter/index.ts"),y=n("./src/framework/source/index.ts"),O=n("./src/framework/track/SusiPresentationTracker.tsx");function j(){var e=o()(["\n  fragment RegWall_meteringInfo on MeteringInfo {\n    postIds\n  }\n"]);return j=function(){return e},e}function w(){var e=o()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return w=function(){return e},e}var _=function(e){var t=e.enableUnbound,n=e.isSyndicated;return s.createElement(E.d,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},s.createElement(v.a,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),s.createElement(v.a,{display:"block",sm:{display:"none"}},t?"Read the rest of this story with a free account.":n?"This story is just a click away.":"To keep reading this story, create a free account."))},S=function(e){var t=e.enableNewSusiModal,n=e.meterCount,r=e.optimizelyFeatureString,o=e.postId,a={operation:"register"},i=Object(f.a)().openModal;return s.createElement(v.a,{display:"flex",flexDirection:"column",textAlign:"center",sm:{flexDirection:"column"}},s.createElement(c.a,{featureString:r,target:"google-button"},s.createElement(v.a,{margin:"".concat(t?"32px":"62px"," 0 10px"),sm:{margin:"40px 0 12px 0"}},s.createElement(O.a,{eventData:{meterCount:n,operation:a.operation,postId:o}},s.createElement(h.a,a)))),s.createElement((function(e){var n=e.children;return t?s.createElement(c.a,{featureString:r,target:"google-button"},n):n}),null,s.createElement(v.a,{marginBottom:t?"32px":"52px",sm:{marginBottom:"40px"}},s.createElement(O.a,{eventData:{meterCount:n,operation:a.operation,postId:o}},t?s.createElement(g.a,{goToEmailAuthStep:function(){i({step:"ENTER_EMAIL",susiEntry:"post_regwall",operation:"register"})},operation:"register"}):s.createElement(b.a,a)))))},P=function(e){var t=e.meteringInfo,n=e.post,r=Object(x.c)(),o=!!Object(u.a)("enable_unbound"),a=!!Object(u.a)("enable_new_susi_modal"),f="LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource,g="".concat(f?"syndicated-":"","regwall");return s.useEffect((function(){r.event("meter.viewed",{meterCount:null==t?void 0:t.postIds.length,postId:n.id,uiType:f?p.a.SyndicatedRegwall:p.a.RegWall})}),[]),s.createElement(d.b,null,s.createElement(y.b,{source:{susiEntry:"post_regwall",postId:n.id}},s.createElement(l.a,null,s.createElement(c.a,{featureString:g,target:"background-color"},s.createElement(v.a,{display:"flex",textAlign:"center",justifyContent:"center",sm:{flexDirection:"column",textAlign:"center"}},s.createElement(v.a,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},s.createElement(c.a,{featureString:g,target:"heading"},s.createElement(_,{isSyndicated:f,enableUnbound:o})),s.createElement(E.b,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}},s.createElement(v.a,{display:o?"block":"none",margin:"auto",paddingTop:"10px",sm:{display:"none"},width:"500px"},"You’ll also discover more fresh thinking personalized to your interests and can follow your favorite authors, publications, and topics."),s.createElement(v.a,{display:"none",sm:{display:"block"}},s.createElement(v.a,{margin:"".concat(a?"40px":"42px"," 0")},s.createElement(i.a,{isButton:!0,postId:n.id,appEntry:"regwall"})),s.createElement(c.a,{featureString:g,target:"skip-app-copy"},s.createElement(v.a,{marginBottom:"-20px"},"Or, continue in mobile web"))),s.createElement(S,{meterCount:null==t?void 0:t.postIds.length,optimizelyFeatureString:g,postId:n.id,enableNewSusiModal:a}),a?s.createElement(c.a,{featureString:g,target:"sign-in-link",tag:"span"},s.createElement(m.a,{linkStyle:"OBVIOUS",operation:"login",post:n},"More sign in options")):s.createElement(s.Fragment,null,s.createElement(c.a,{featureString:g,target:"sign-in-copy",tag:"span"},"Already have an account?"," "),s.createElement(c.a,{featureString:g,target:"sign-in-link",tag:"span"},s.createElement(m.a,{linkStyle:"OBVIOUS",operation:"login",post:n},"Sign in"))))))))))},C=Object(a.gql)(w(),m.d),k=Object(a.gql)(j())},"./src/components/mutations/DeletePostMutation.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js");function s(){var e=o()(["\n  mutation DeletePostMutation($targetPostId: ID!) {\n    deletePost(targetPostId: $targetPostId)\n  }\n"]);return s=function(){return e},e}var i=Object(a.gql)(s()),l=function(e){var t=e?{variables:{targetPostId:e}}:{};return Object(a.useMutation)(i,t)}},"./src/components/mutations/UserReportStoryMutation.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/@apollo/client/react/components/index.js"),i=n("./node_modules/react/index.js"),l=n("./node_modules/react-redux/es/index.js"),c=n("./src/store/actions/navigation.ts");function u(){var e=o()(["\n  mutation UserReportStoryMutation(\n    $targetPostId: ID!\n    $targetAuthorId: ID!\n    $alsoBlockAuthor: Boolean!\n    $reason: String!\n  ) {\n    reportStoryAndMaybeBlockAuthor(\n      targetPostId: $targetPostId\n      targetAuthorId: $targetAuthorId\n      alsoBlockAuthor: $alsoBlockAuthor\n      reason: $reason\n    ) {\n      id\n      isBlocking\n    }\n  }\n"]);return u=function(){return e},e}var d=Object(a.gql)(u());t.a=Object(l.c)()((function(e){var t=e.targetAuthorId,n=e.targetPostId,r=e.dispatch,o=e.children,a=e.onOptimisticComplete,l=e.isBlocking;return i.createElement(s.Mutation,{mutation:d,onCompleted:function(){r(Object(c.m)({message:"Successfully reported post."}))}},(function(e){return o({mutate:function(r,o){var s=e({variables:{targetAuthorId:t,targetPostId:n,alsoBlockAuthor:r,reason:o},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:t,isBlocking:l||r}}});return a&&a(),s}})}))}))},"./src/components/newsletter-v3/GetNewsletterButton.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./src/framework/design-system/components/index.ts"),s=n("./src/framework/reporter/index.ts"),i=n("./src/framework/source/index.ts"),l=n("./src/framework/style/index.ts");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=o.a.createElement("path",{d:"M0 .35v15.3h20V.35H0zm6.95 9.38l3.05 2.5 3.05-2.5 4.88 4.73H2.07l4.88-4.73zM1.2 13.64V5.02l4.82 3.94-4.82 4.68zm12.78-4.68l4.82-3.94v8.62l-4.82-4.68zm4.82-7.42v1.94l-8.8 7.2-8.8-7.2V1.54h17.6z"}),d=function(e){return o.a.createElement("svg",c({width:20,height:16,viewBox:"0 0 20 16"},e),u)},m=function(e){var t=e.buttonSize,n=void 0===t?"LARGE":t,o=e.buttonStyle,c=void 0===o?"STRONG":o,u=e.newsletterV3Id,m=e.showMailIcon,p=void 0===m||m,f=e.onClick,g=e.width,b=Object(i.f)(),h=Object(s.c)(),v=Object(l.useCx)();return r.createElement(a.b,{buttonStyle:c,onClick:function(){h.event("newsletterV3.subscribeClicked",{newsletterV3Id:u,source:b}),f()},size:n,width:g},p&&r.createElement("span",{className:v((function(){return{marginRight:"8px"}})),"aria-hidden":"true"},r.createElement(d,null)),"Get this newsletter")}},"./src/components/newsletter-v3/NewsletterV3Promo.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return S}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),u=n("./src/components/newsletter-v3/NewsletterV3SubscribeButton.tsx"),d=n("./src/components/newsletter-v3/NewsletterV3SubscribeByEmail.tsx"),m=n("./src/components/session/useViewer.tsx"),p=n("./src/framework/design-system/components/index.ts"),f=n("./src/framework/design-system/type/index.ts"),g=n("./src/framework/reporter/index.ts"),b=n("./src/framework/source/index.ts"),h=n("./src/framework/style/index.ts"),v=n("./src/framework/track/index.ts"),E=n("./src/styles/breakpoints.ts"),x=n("./src/util/routes.ts");function y(){var e=s()(["\n  fragment NewsletterV3Promo_publisher on Publisher {\n    __typename\n    ... on User {\n      id\n      username\n      name\n      newsletterV3 {\n        id\n        ...NewsletterV3Promo_newsletterV3\n      }\n    }\n    ... on Collection {\n      id\n      slug\n      domain\n      name\n      viewerIsEditor\n      newsletterV3 {\n        id\n        ...NewsletterV3Promo_newsletterV3\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function O(){var e=s()(["\n  fragment NewsletterV3Promo_newsletterV3 on NewsletterV3 {\n    slug\n    name\n    description\n    ...NewsletterV3SubscribeButton_newsletterV3\n    ...NewsletterV3SubscribeByEmail_newsletterV3\n  }\n  ","\n  ","\n"]);return O=function(){return e},e}var j=Object(i.gql)(O(),u.b,d.b),w=Object(i.gql)(y(),j),_=function(e){return o()({borderTop:"3px solid ".concat(e.accentColor.border.normal),padding:"32px 32px 26px 32px",marginTop:"8px",marginBottom:"25px",backgroundColor:e.baseColor.background.light},E.sm(e),{padding:"24px 24px 28px 24px"})},S=function(e){var t,n=e.postId,r=e.publisher,o=l.useRef(null),a=Object(c.f)((function(e){return e.config.authDomain})),s=Object(g.c)(),i=Object(h.useCx)(),E=Object(m.b)().value,y=r.newsletterV3,O=Object(x.ub)(null!==(t=null==y?void 0:y.slug)&&void 0!==t?t:"",a,"Collection"===r.__typename?r:void 0,"User"===r.__typename&&(null==r?void 0:r.username)?r.username:void 0),j=!1,w=function(){!j&&S()&&(s.event("newsletterV3.promoViewed",{newsletterV3Id:null==y?void 0:y.id,postId:n}),j=!0)},S=function(){var e;if(!o.current)return!1;var t=null===(e=o.current)||void 0===e?void 0:e.getBoundingClientRect(),n=t.top+t.height/2;return n>=0&&n<=window.innerHeight};return l.useEffect((function(){return w(),window&&v.a.on("scroll",w),function(){v.a.off("scroll",w)}}),[]),l.createElement(b.b,{source:{name:"newsletter_v3_promo",susiEntry:"newsletter_v3_promo"}},l.createElement("div",{ref:o,className:i(_)},l.createElement(f.c,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},"Sign up for ".concat(null==y?void 0:y.name)),l.createElement(p.a,{paddingTop:"4px"},l.createElement(f.b,{tag:"h3",scale:"S",color:"DARKER"},"By ".concat(r.name))),l.createElement(p.a,{paddingTop:"8px",paddingBottom:"10px"},l.createElement(f.b,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"p"},null==y?void 0:y.description," ",l.createElement(p.m,{inline:!0,linkStyle:"OBVIOUS",href:O},"Take a look"))),"Collection"===r.__typename&&r.viewerIsEditor?l.createElement(p.a,{paddingTop:"10px"},l.createElement(f.b,{scale:"M",color:"DARKER"},"You're an editor of ",null==y?void 0:y.name)):l.createElement(p.a,{display:"flex",flexWrap:"wrap"},y&&(E?l.createElement(u.a,{newsletterV3:y,buttonLayout:"COMPACT",helperTextColor:"DARKER"}):l.createElement(d.a,{newsletterV3:y})))))}},"./src/components/newsletter-v3/NewsletterV3SubscribeButton.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return R}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),u=n("./src/components/collection/CollectionMetabar.tsx"),d=n("./src/components/newsletter-v3/GetNewsletterButton.tsx"),m=n("./src/framework/design-system/components/index.ts"),p=n("./src/framework/design-system/components/portal/ui/Toast.tsx"),f=n("./src/framework/design-system/type/index.ts"),g=n("./src/util/routes.ts"),b=function(e){var t=e.name,n=Object(c.f)((function(e){return e.config.authDomain}));return l.createElement(m.A,{initialVisibility:!0},(function(e){var r=e.hide;return e.isVisible&&l.createElement(p.a,{isVisible:!0,toastStyle:"NEWSLETTER_UNSUBSCRIBE",duration:5e3,hide:function(){}},l.createElement(f.f,{scale:"S",color:"DARKER"},l.createElement(l.Fragment,null,"You have unsubscribed from ",l.createElement("b",null,t),". Changes will take effect within 24 hours."," ",l.createElement(m.m,{inline:!0,href:Object(g.Nc)(n),linkStyle:"OBVIOUS"},"Manage all my email settings"))),l.createElement(m.e,{onClick:function(){r()},isPositionAbsolute:!1,size:"SMALL"}))}))},h=n("./src/framework/reporter/index.ts");function v(){var e=s()(["\n  mutation unsubscribeNewsletterV3($newsletterV3Id: ID!) {\n    unsubscribeNewsletterV3(newsletterV3Id: $newsletterV3Id)\n  }\n"]);return v=function(){return e},e}function E(){var e=s()(["\n  mutation subscribeNewsletterV3($newsletterV3Id: ID!) {\n    subscribeNewsletterV3(newsletterV3Id: $newsletterV3Id)\n  }\n"]);return E=function(){return e},e}var x=Object(i.gql)(E()),y=Object(i.gql)(v()),O=n("./src/components/session/useFlag.tsx"),j=n("./src/components/session/useViewer.tsx"),w=n("./src/components/susi/SusiClickable.tsx"),_=n("./src/framework/source/index.ts"),S=n("./src/framework/source/SourceContext.tsx"),P=n("./src/store/actions/navigation.ts"),C=n("./src/util/hooks/useToggle.tsx"),k=n("./src/util/theme.ts");function I(){var e=s()(["\n  fragment NewsletterV3SubscribeButton_newsletterV3 on NewsletterV3 {\n    id\n    name\n    isSubscribed\n    ...SusiClickable_newsletterV3\n    collection {\n      ...CollectionMetabar_collection\n      ...SusiClickable_collection\n      ...collectionDefaultBackgroundTheme_collection\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return I=function(){return e},e}var T=Object(i.gql)(I(),u.c,w.b,w.c,k.d),R=function(e){var t=e.newsletterV3,n=e.buttonLayout,r=void 0===n?"MULTI-LINE":n,a=e.helperTextColor,s=void 0===a?"LIGHTER":a,u=e.showHelperText,v=void 0===u||u,E=e.showMailIcon,I=void 0===E||E,T=e.buttonSize,R=void 0===T?"LARGE":T,L=e.buttonStyle,A=void 0===L?"STRONG":L,M=Object(j.b)().value,B=t.id,D=t.name,N=t.collection?t.collection:void 0,H=Object(P.u)(),U=Object(c.f)((function(e){return{interstitial:e.navigation.interstitial,referrerSource:e.navigation.referrerSource}}),c.d),F=U.referrerSource,V=U.interstitial,z=Object(O.a)("enable_email_address_sharing_setting"),q=Object(c.f)((function(e){return e.config.productName})),G=Object(C.a)(!1),W=o()(G,3),$=W[0],K=W[1],Y=W[2],Q=function(e,t){var n=l.useState(t),r=o()(n,2),a=r[0],s=r[1],c=l.useState(!1),u=o()(c,2),d=u[0],m=u[1],p=l.useState(!1),f=o()(p,2),g=f[0],b=f[1],v=Object(h.c)();d&&v.event("newsletterV3.subscribe.error",{newsletterV3Id:e});var E=Object(i.useMutation)(x,{variables:{newsletterV3Id:e},onCompleted:function(e){var t=e.subscribeNewsletterV3;m(!t),t&&s(!0)}}),O=o()(E,1)[0],j=Object(i.useMutation)(y,{variables:{newsletterV3Id:e},onCompleted:function(e){var t=e.unsubscribeNewsletterV3;m(!t),t&&(s(!1),b(!0))}}),w=o()(j,1)[0];return{isSubscribed:a,hasUserUnsubscribed:g,hasError:d,setSubscribe:function(e){m(!1),b(!1),e?O():w()},setHasUserUnsubscribed:b}}(t.id,t.isSubscribed),X=Q.isSubscribed,J=Q.hasUserUnsubscribed,Z=Q.hasError,ee=Q.setSubscribe,te=Q.setHasUserUnsubscribed;l.useEffect((function(){"unsubscribe-newsletter"===V&&te(!0)}),[]),l.useEffect((function(){if(F){var e=Object(S.c)(F||"").susiEntry;["collection_newsletter_v3_landing","newsletter_v3_promo"].includes(void 0===e?"":e)&&X&&H({duration:"NEXTPAGE",message:"",toastStyle:"NEWSLETTER_SUBSCRIBE",extraParams:{newsletterName:null==t?void 0:t.name,unsubscribeFn:function(){return ee(!1)}}})}}),[F]);var ne=function(e){var t=e.children;return l.createElement(m.a,{margin:"COMPACT"===r?"10px 20px 10px 0":"",xs:{margin:"10px 0 0 0"}},t)},re=function(e){var t=e.children;return l.createElement(m.a,{maxWidth:"COMPACT"===r?"330px":"",margin:"COMPACT"===r?"10px 0 10px 0":"10px 0 0 0"},l.createElement(f.b,{scale:"S",color:s,tag:"p"},t))},oe=function(){var e=Object(g.cc)(B),n=function(){M&&ee(!0)},r={buttonSize:R,buttonStyle:A,newsletterV3Id:t.id,onClick:z&&M&&!M.allowEmailAddressSharing?K:n,showMailIcon:I};return l.createElement(ne,null,M?l.createElement(l.Fragment,null,l.createElement(d.a,r),l.createElement(m.f,{onConfirm:n,isVisible:$,hide:Y,titleText:"Complete your subscription to ".concat(t.name),confirmText:"Confirm",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!1,withCloseButton:!1,titleTag:"h1",contentTag:"p",isDestructiveAction:!1},"By clicking below, you agree that ".concat(q," may share your email address with the editors of\n        newsletters you've subscribed to so they can stay in contact with you outside of ").concat(q,". You\n        may always opt out of sharing your email address by unsubscribing from each newsletter in\n        your Settings."))):l.createElement(w.a,{operation:"register",newsletterV3:t,collection:N,actionUrl:e},l.createElement(d.a,r)))},ae=function(){return l.createElement(_.b,{source:{newsletterV3Id:t.id},extendSource:!0},l.createElement(oe,null),M?v&&l.createElement(re,null,"Emails will be sent to ",M.email,".",l.createElement(m.a,null,l.createElement(w.a,{operation:"login",newsletterV3:t,collection:N},l.createElement(m.m,{onClick:function(){},linkStyle:"OBVIOUS",inline:!0,target:"_blank"},"Not you?")))):l.createElement(re,null,"Create a free Medium account to get ",t.name," in your inbox."))},se=function(){return l.createElement(l.Fragment,null,l.createElement(ne,null,l.createElement(m.b,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return ee(!1)}},"Unsubscribe")),v&&l.createElement(re,null,"You're signed up for ",D,"."))};return l.createElement(l.Fragment,null,l.createElement(m.D,null,(function(e){return l.createElement(m.x,{theme:Object(k.c)(N,e)},X?l.createElement(se,null):l.createElement(ae,null))})),Z&&l.createElement(p.a,{toastStyle:"RETRYABLE_ERROR",isVisible:Z,hide:function(){}}),J&&l.createElement(b,{name:t.name||""}))}},"./src/components/newsletter-v3/NewsletterV3SubscribeByEmail.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return A}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./src/components/newsletter-v3/GetNewsletterButton.tsx"),p=n("./src/framework/design-system/components/index.ts"),f=n("./src/framework/style/index.ts"),g={from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},b=function(e){return function(t){return{width:"20px",height:"20px",borderRadius:"50%",borderWidth:"1px",borderStyle:"solid",borderColor:"".concat(t.baseColor.border.light," transparent ").concat(t.baseColor.border.light," ").concat(t.baseColor.border.light),animation:"".concat(e," 1s infinite linear;")}}},h=function(e){var t=e.buttonSize,n=void 0===t?"LARGE":t,r=e.buttonStyle,o=void 0===r?"STRONG":r,a=Object(f.useCx)(),s=function(){var e=Object(f.useKeyframes)({keyframesName:g}).keyframesName;return u.createElement("div",{className:a(b(e))})};return u.createElement("div",{style:{cursor:"wait"}},u.createElement(p.b,{buttonStyle:o,onClick:function(){return null},size:n,width:"207px",disabled:!0},u.createElement((function(){return u.createElement(p.a,null,u.createElement(p.a,{display:"inline-block",float:"left",marginRight:"8px"},u.createElement(s,null)),u.createElement(p.a,{float:"left"},"Loading.."))}),null)))},v=n("./src/components/susi/GoogleRecaptcha.tsx"),E=n("./src/components/susi/helpers/index.ts"),x=n("./src/components/susi/susi-modal/SusiContainer.tsx"),y=n("./src/components/ui/Input.tsx"),O=n("./src/framework/design-system/type/index.ts"),j=n("./src/framework/source/index.ts"),w=n("./src/framework/track/SusiPresentationTracker.tsx"),_=n("./src/util/email.ts"),S=n("./src/util/routes.ts"),P=n("./src/util/theme.ts");function C(){var e=o()(["\n  fragment NewsletterV3SubscribeByEmail_newsletterV3 on NewsletterV3 {\n    id\n    slug\n    collection {\n      ...collectionDefaultBackgroundTheme_collection\n      ...collectionUrl_collection\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function k(){var e=o()(["\n  mutation SendNewsletterSubscriptionAcctAuthEmail(\n    $newsletterV3Id: String!\n    $email: String!\n    $redirect: String\n    $captchaValue: String\n    $operation: String\n  ) {\n    sendNewsletterSubscriptionAcctAuthEmail(\n      newsletterV3Id: $newsletterV3Id\n      email: $email\n      redirect: $redirect\n      captchaValue: $captchaValue\n      operation: $operation\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return k=function(){return e},e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){var t=e.centerContent,n=void 0!==t&&t,r=e.newsletterV3,o=Object(f.useTheme)(),a=Object(j.d)(),s=Object(j.g)(),i=Object(d.f)((function(e){return{authDomain:e.config.authDomain,currentLocation:e.navigation.currentLocation,productName:e.config.productName}}),d.d),g=i.authDomain,b=i.currentLocation,C=i.productName,k=u.useState(""),I=l()(k,2),R=I[0],A=I[1],M=u.useState(""),B=l()(M,2),D=B[0],N=B[1],H=u.useState(!1),U=l()(H,2),F=U[0],V=U[1],z=u.useState(!1),q=l()(z,2),G=q[0],W=q[1],$=u.useState(!1),K=l()($,2),Y=K[0],Q=K[1],X=u.useState(!1),J=l()(X,2),Z=J[0],ee=J[1],te=u.useState(""),ne=l()(te,2),re=ne[0],oe=ne[1],ae=null==b.match("http[s]?://[^/]*".concat(g)),se=r.collection,ie=r.id,le=r.slug,ce=Object(S.cc)(ie),ue=se?Object(S.ub)(le,g,se):b;Object(c.useQuery)(x.a,{fetchPolicy:"no-cache",skip:!ce||ae,onCompleted:function(e){var t=e.accountToken;return t&&oe(Object(E.a)(ue,a,s,ce,t))}});var de=function(e){A(e),V(!0),setTimeout((function(){return V(!1)}),y.a),W(!1),Q(!1)},me=function(){Object(_.a)(D)?(Q(!0),W(!0)):de("Enter a valid email address.")},pe=function(){de("We couldn't process your request. Try again, or contact our support team.")},fe=Object(c.useMutation)(L,{onCompleted:function(e){switch(e.sendNewsletterSubscriptionAcctAuthEmail.__typename){case"SusiMethod":N(D),ee(!0);break;case"BadRequest":de("Enter a valid email address.");break;case"FailedChallenge":case"NotFound":default:pe()}},onError:pe}),ge=l()(fe,1)[0],be={newsletterV3Id:ie,email:D,operation:"register",redirect:re};return u.createElement(p.x,{theme:Object(P.c)(se,o)},u.createElement(p.a,{alignItems:n?"center":"flex-start",display:"flex",flexDirection:"column",justifyContent:n?"center":"flex-start"},u.createElement(v.a,{callback:function(e){ge({variables:T({captchaValue:e},be)})},shouldExecuteRecaptcha:G}),u.createElement(p.a,{display:Z?"none":"inline"},u.createElement(p.a,{alignItems:"center",display:"flex",justifyContent:"space-between",sm:{alignItems:n?"center":"flex-start",flexDirection:"column",height:"130px",paddingTop:"16px"},height:"56px"},u.createElement(p.a,{marginTop:R&&"25px",sm:{marginTop:"0"}},u.createElement(y.b,{autoFocus:!1,errorMessage:R,handleInputChange:function(e){N(e.target.value.trim())},handleSubmit:me,input:D,inputType:y.c.EMAIL,isAnimating:F,textAlign:"start",placeholder:"Your email",width:"375px"})),u.createElement(p.a,{marginBottom:"auto",marginLeft:"15px",sm:{marginLeft:"0px",marginTop:"15px"}},Y?u.createElement(h,{newsletterV3Id:ie}):u.createElement(w.a,{eventData:{operation:"register"}},u.createElement(m.a,{newsletterV3Id:ie,onClick:me})))),u.createElement(p.a,{paddingTop:R&&"20px",marginTop:"10px",sm:{marginTop:"0"}},u.createElement(O.b,{scale:"XS"},"By signing up, you will create a ",C," account if you don’t already have one. Review our"," ",u.createElement(p.m,{href:Object(S.Jb)(),linkStyle:"OBVIOUS",inline:!0,target:"_blank"},"Privacy Policy")," ","for more information about our privacy practices."))),u.createElement(p.a,{display:Z?"inline":"none",marginBottom:"15px",marginTop:"5px"},u.createElement(O.b,{color:"DARKER",scale:"M"},u.createElement("b",null,"Check your inbox"),u.createElement("br",null),C," sent you an email at ",D," to complete your subscription."))))},L=Object(c.gql)(k()),A=Object(c.gql)(C(),P.d,S.L)},"./src/components/optimizely/helpers/index.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d}));var r,o=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),a=n.n(o),s=n("./node_modules/@apollo/client/index.js");function i(){var e=a()(["\n  fragment optimizelyData_post on Post {\n    creator {\n      name\n    }\n    collection {\n      name\n    }\n    primaryTopic {\n      name\n    }\n  }\n"]);return i=function(){return e},e}!function(e){e.TopicSelected="TopicSelected",e.UserConvertedToTrialMember="UserConvertedToTrialMember"}(r||(r={}));var l=function(){return"undefined"!=typeof window},c=function(e,t,n){var r=e.post;if(l()){l()&&(window.optimizelyDataObject={});var o=r||{},a=o.creator,s=o.collection,i=o.primaryTopic;a&&a.name&&(window.optimizelyDataObject.author=a.name),s&&s.name&&(window.optimizelyDataObject.publication=s.name),i&&i.name&&(window.optimizelyDataObject.topic=i.name),t&&(window.optimizelyDataObject.firstName=t),n&&(window.optimizelyDataObject.trialRenewalDate=n)}},u=function(e){l()&&void 0!==window.optimizely&&window.optimizely.push({type:"event",eventName:e})},d=Object(s.gql)(i())},"./src/components/post-listing/PostListingItemRecirc.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),u=n("./src/components/post/PostByline.tsx"),d=n("./src/components/post/PostRecircItemV2.tsx"),m=n("./src/components/post/bookmark/index.ts"),p=n("./src/components/post/multivote/MultiVote.tsx"),f=n("./src/components/session/WithFlag.tsx"),g=n("./src/components/ui/image/FocusableMiroImage.tsx"),b=n("./src/framework/design-system/components/index.ts"),h=n("./src/framework/design-system/type/index.ts"),v=n("./src/framework/source/index.ts"),E=n("./src/framework/track/index.ts"),x=n("./src/util/routes.ts");function y(){var e=s()(["\n  fragment PostListingItemRecirc_post on Post {\n    __typename\n    id\n    title\n    isLocked\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n    }\n    ...PostByline_post\n    ...PostPresentationTracker_post\n    ...BookmarkButton_post\n    ...MultiVote_post\n    ...PostRecircItemV2_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}var O=Object(i.gql)(y(),u.a,E.c,m.b,p.b,d.a),j=function(e){var t=e.height,n=e.width;return{paddingBottom:"".concat(t/n*100,"%"),position:"relative"}},w={height:"100%",position:"absolute",width:"100%"},_=function(e){var t=e.title,n=e.url;return l.createElement(b.d,{href:n},l.createElement(h.g,{scale:"S",tag:"h3"},t))},S=l.forwardRef((function(e,t){var n,r,a=e.post,s=e.productName,i=l.useState(!1),c=o()(i,2),d=c[0],y=c[1],O=l.useCallback((function(e){!d&&e.isIntersecting&&y(!0)}),[d]);if(Object(E.f)({onIntersect:O,target:t,disconnect:function(){return d},rootMargin:"100px"},[d]),"SuggestedPost"===a.__typename?(n=function(e,t){var n,r,o,a;switch(e&&e[0]&&e[0].reason){case"TOP_SIMILAR_TO_POST":case"CF_POST_SIMILAR_TO_POST":return"Related reads";case"TOP_IN_TOPIC":return a=e[0].topics?e[0].topics[0].name:"topic","Popular in ".concat(a);case"POSTS_SHARING_AUTHOR":return n=e[0].users?e[0].users[0].name:"author","More from ".concat(n);case"POSTS_SHARING_TAGS":return(o=e[0].tags&&e[0].tags[0].name)?"Also tagged ".concat(o):"";case"TOP_IN_COLLECTION":return r=e[0].collections?e[0].collections[0].name:"publication","More from ".concat(r);case"TOP_FOR_THE_DAY_GLOBALLY":return"Top on ".concat(t);case"POSTS_SHARING_COLLECTION_AND_TAGS":return o=e[0].tags&&e[0].tags[0].name,r=e[0].collections?e[0].collections[0].name:"publication",o?"More on ".concat(o," from ").concat(r):"";case"RECOMMENDED_BY_AUTHOR":return(n=e[0].users&&e[0].users[0].name)?"Applause from ".concat(n):"";case"TOP_FOR_THE_DAY":return"Trending on ".concat(t);default:return"Picked for you"}}(a.postSuggestionReasons,s),r=a.post):r=a,!r)return null;var S,P,C,k,I,T,R,L=r.previewImage?r.previewImage.id:"",A=(S={id:L||"1*hn4v1tCaJy7cWMyb0bpNpQ.png",width:328,height:218,focusPercentX:r.previewImage?r.previewImage.focusPercentX:null,focusPercentY:r.previewImage?r.previewImage.focusPercentY:null},C=S.id,k=S.width,I=S.height,T=S.focusPercentX,R=S.focusPercentY,C?(P="number"==typeof T&&"number"==typeof R?[T,R]:[50,50],l.createElement(b.B,null,(function(e){return l.createElement("div",{className:e(j({height:I,width:k}))},l.createElement("div",{className:e(w)},l.createElement(g.a,{miroId:C,imgHeight:I,imgWidth:k,width:"100%",height:"100%",freezeGifs:!1,focusPercent:P})))}))):null);return l.createElement(E.b,{post:r,presentationContext:"PLACEMENT"},l.createElement(b.a,{md:{marginBottom:"48px"}},l.createElement(b.h,{alignItems:{xs:"flex-start",sm:"center",md:"center",lg:"flex-start",xl:"flex-start"},direction:{xs:"row",sm:"row-reverse",md:"row-reverse",lg:"row",xl:"row"}},l.createElement(b.i,{size:{xs:12,sm:6,md:6,lg:12,xl:12}},n&&l.createElement(b.a,{marginBottom:"12px",md:{display:"none"},xs:{display:"block"}},l.createElement(h.b,{scale:"M"},n)),A&&l.createElement(b.a,{marginBottom:"16px",md:{marginBottom:"0px"},xs:{marginBottom:"16px"}},l.createElement(b.m,{display:"block",href:Object(x.Gb)(r)},d?A:null))),l.createElement(b.i,{size:{xs:12,sm:6,md:6,lg:12,xl:12}},l.createElement(b.a,{marginBottom:"16px"},n&&l.createElement(b.a,{display:"none",marginBottom:"4px",md:{display:"block"},xs:{display:"none"}},l.createElement(h.b,{scale:"M"},n)),l.createElement(_,{title:r.title?r.title:"",url:Object(x.Gb)(r)})),l.createElement(b.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},l.createElement(b.a,{flexShrink:"1",marginRight:"10px"},l.createElement(f.a,{name:"remove_stars_ui"},(function(e){return l.createElement(u.b,{post:r,showBio:!1,scale:"S",showStar:!e&&!!r.isLocked,hideAvatar:!d})}))),l.createElement(b.a,{display:"flex",alignItems:"center"},l.createElement(v.b,{source:{susiEntry:"clap_preview"},extendSource:!0},l.createElement(p.a,{post:r,buttonStyle:"SUBTLE"})),l.createElement(b.a,{borderRight:"BASE_LIGHTER",marginLeft:"12px",marginRight:"10px",height:"20px",width:"1px"}),l.createElement(v.b,{source:{susiEntry:"bookmark_preview"},extendSource:!0},l.createElement(m.a,{post:r}))))))))}));t.b=Object(c.c)((function(e){return{productName:e.config.productName}}),null,null,{forwardRef:!0})(S)},"./src/components/post/EmbeddedPost.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/components/post/EmbeddedPostContext.tsx"),c=n("./src/framework/source/index.ts"),u=n("./src/framework/style/index.ts"),d=n("./src/handlers/EmbeddedPostHandler.tsx");function m(){var e=o()(["\n  fragment EmbeddedPost_post on Post {\n    id\n    tags {\n      ...TagList_tags\n    }\n    topics {\n      topicId\n      name\n    }\n  }\n"]);return m=function(){return e},e}Object(a.gql)(m());var p=Object(i.c)((function(e){return{embedPostRules:e.config.embedPostRules}}))((function(e){var t=e.postId,n=e.sourcePost,r=e.embedPostRules,o=t||n&&function(e,t){var n;return e?(t.map((function(t){var r,o;return n||(((null===(r=e.topics)||void 0===r?void 0:r.some((function(e){var n,r;return!!(null==t||null===(n=t.topics)||void 0===n?void 0:n.includes((null==e||null===(r=e.name)||void 0===r?void 0:r.toLowerCase())||""))})))||(null===(o=e.tags)||void 0===o?void 0:o.some((function(e){var n,r;return!!(null==t||null===(n=t.tags)||void 0===n?void 0:n.includes((null==e||null===(r=e.id)||void 0===r?void 0:r.toLowerCase())||""))}))))&&(n=t.embedPostId),n)})),n):n}(n,r);return o?s.createElement(d.a,{postId:o},(function(e){var t=Object(u.useCx)();return e?s.createElement(l.a.Provider,{value:!0},s.createElement(c.b,{source:{name:"embedded_post"}},s.createElement("div",{className:t({padding:{xs:"16px 0",sm:"16px 0",md:"18px 0",lg:"24px 0",xl:"32px 0"},marginBottom:"25px"})},e))):null})):null}))},"./src/components/post/InResponseToPostPreview.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return w}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/post/paragraph/TextParagraph.tsx"),l=n("./src/components/stream/Quote.tsx"),c=n("./src/components/ui/Card.tsx"),u=n("./src/framework/design-system/components/index.ts"),d=n("./src/framework/design-system/type/index.ts"),m=n("./src/framework/style/index.ts"),p=n("./src/schema-types/globalTypes.ts"),f=n("./src/svg/clap-filled-19px.svg"),g=n("./src/svg/response-filled-19px.svg"),b=n("./src/util/numbers.ts"),h=n("./src/util/quote.ts"),v=n("./src/util/routes.ts");function E(){var e=o()(["\n  fragment InResponseToPostPreview_mediaResource on Post {\n    inResponseToMediaResource {\n      mediumQuote {\n        ...Quote_quote\n      }\n    }\n  }\n  ","\n"]);return E=function(){return e},e}function x(){var e=o()(["\n  fragment InResponseToPostPreview_postResult on PostResult {\n    __typename\n    ... on Post {\n      id\n      title\n      mediumUrl\n      creator {\n        id\n        name\n      }\n      clapCount\n      responsesCount\n    }\n  }\n"]);return x=function(){return e},e}var y=function(e){return{fill:e.baseColor.fill.lighter}},O=function(e){var t,n=e.inResponseToPostResult,r=e.inResponseToMediaResource,o=e.padding,a=Object(m.useCx)();if(n)switch(n.__typename){case"Post":t=n}if(!t)return null;var l=t.title,E=t.creator&&t.creator.name,x=parseInt(t.clapCount,10),O=t.responsesCount||0,j=r&&r.mediumQuote&&Object(h.b)(r.mediumQuote),w=j&&j.type;if(w===p.m.IMG||w===p.m.IFRAME||w===p.m.COVER_TITLE||w===p.m.HR||w===p.m.MIXTAPE_EMBED||w===p.m.SECTION_CAPTION)return null;var _=s.createElement(u.d,{href:Object(v.Gb)(t)},s.createElement(c.a,null,s.createElement(u.a,{paddingLeft:"20px",paddingRight:"20px"},j&&w&&s.createElement(u.a,{paddingBottom:"20px"},s.createElement(i.g,{paragraph:j,paragraphStyle:w,spaceTop:10,richTextStyle:"STREAM"})),s.createElement(u.a,{display:"flex"},s.createElement(u.a,{display:"flex",flexGrow:"1",flexShrink:"1",alignItems:"center"},s.createElement(d.b,{scale:"M",color:"DARKER",clamp:1,tag:"span"},l)),s.createElement(u.a,{display:"flex",flexGrow:"0",alignItems:"center"},x>0?s.createElement(u.a,{display:"flex",alignItems:"center"},s.createElement("span",{className:a(y)},s.createElement(u.a,{tag:f.a,marginRight:"4px"})),s.createElement(d.b,{scale:"M",tag:"div"},Object(b.d)(x))):null,O>0?s.createElement(u.a,{display:"flex",alignItems:"center"},s.createElement("span",{className:a(y)},s.createElement(u.a,{tag:g.a,marginLeft:"8px",marginRight:"4px"})),s.createElement(d.b,{scale:"M",tag:"div"},Object(b.d)(O))):null)),s.createElement(d.b,{scale:"M"},E))));return o?s.createElement(u.a,{padding:o},_):_},j=Object(a.gql)(x()),w=Object(a.gql)(E(),l.a)},"./src/components/post/MaybeRedirectToEditor.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/components/navigation/Redirect.tsx"),c=n("./src/components/session/WithViewer.tsx"),u=n("./src/util/routes.ts");function d(){var e=o()(["\n  fragment MaybeRedirectToEditor_post on Post {\n    id\n    isPublished\n    collection {\n      id\n      viewerCanEditOwnPosts\n      viewerCanEditPosts\n      viewerIsEditor\n    }\n    creator {\n      id\n    }\n  }\n"]);return d=function(){return e},e}var m=Object(a.gql)(d()),p=Object(i.c)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var t=e.authDomain,n=e.post,r=e.children;return s.createElement(c.b,null,(function(e){return function(e,t){var n=e.collection,r=e.creator&&t&&e.creator.id===t.id,o=r&&n&&n.viewerCanEditOwnPosts||n&&(n.viewerIsEditor||n.viewerCanEditPosts);return(!e||!e.isPublished)&&(n?o:r)}(n,e)?s.createElement(l.a,{to:Object(u.Db)(t,n.id)}):r}))}))},"./src/components/post/NormalizePostBodyModel.ts":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return m}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./src/util/string.ts");function i(){var e=o()(["\n  fragment GetFeaturedImageIndex_bodyModel on RichText {\n    paragraphs {\n      type\n      text\n      metadata {\n        isFeatured\n      }\n    }\n  }\n"]);return i=function(){return e},e}function l(){var e=o()(["\n  fragment GetTitleIndexMap_bodyModel on RichText {\n    paragraphs {\n      type\n      text\n    }\n  }\n"]);return l=function(){return e},e}var c=function(e){for(var t=null,n=null,r=null,o=null,a=0;a<=e.length;a++){var i=e[a];if(!i)break;if(null!=t){"H4"===i.type&&(n=a),null===r&&"IMG"===i.type&&(r=a);break}if("H3"===i.type||"H2"===i.type)t=a;else{if(null!=o)break;if("H4"!==i.type){if("IMG"===i.type){null===r&&(r=a);continue}if("IFRAME"===i.type||"P"===i.type&&"string"==typeof i.text&&Object(s.a)(i.text))continue;break}o=a}}return{titleIndex:t,subtitleIndex:n,bannerImageIndex:r}},u=Object(a.gql)(l()),d=function(e){for(var t=null,n=0;n<e.length;n++)if("IMG"===e[n].type){if(e[n].metadata&&e[n].metadata.isFeatured)return n;null===t&&(t=n)}return t},m=Object(a.gql)(i())},"./src/components/post/PostBodyInserts.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return R}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/WatchBounds.tsx"),l=n("./src/components/post/NormalizePostBodyModel.ts"),c=n("./src/components/post/PostByline.tsx"),u=n("./src/components/post/TableOfContents.tsx"),d=n("./src/components/post/bookmark/index.ts"),m=n("./src/components/post/bookmark/PostPageBookmarkButton.tsx"),p=n("./src/components/post/footer/CreatorActionOverflowPopover.tsx"),f=n("./src/components/post/footer/PostFooterSocialPopover.tsx"),g=n("./src/components/publisher/CardByline.tsx"),b=n("./src/components/publisher/auroraHooks.ts"),h=n("./src/components/session/useFlag.tsx"),v=n("./src/components/social/ShareButtons.tsx"),E=n("./src/components/user/UserAvatar.tsx"),x=n("./src/framework/design-system/index.ts"),y=n("./src/framework/design-system/components/index.ts"),O=n("./src/framework/source/index.ts"),j=n("./src/framework/style/useCx.ts"),w=n("./src/util/numbers.ts");function _(){var e=o()(["\n  fragment PostBodyInserts_post on Post {\n    collection {\n      ...auroraHooks_publisher\n    }\n    creator {\n      ...auroraHooks_publisher\n    }\n    isPublished\n    isShortform\n    # please note that the postMeteringOptions is defined in handlers that use PostBodyInserts\n    # (PostHandler and SequencePostHandler)\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          name\n          text\n          type\n        }\n      }\n    }\n    ...CardByline_post\n    ...PostByline_post\n    ...PostFooterSocialPopover_post\n    ...ShareButtons_post\n    ...BookmarkButton_post\n    ...CreatorActionOverflowPopover_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return _=function(){return e},e}function S(e){var t=e.post,n=Object(j.a)(),r=Object(b.b)(t.collection||t.creator),o=Object(h.a)("enable_mute"),a={marginTop:"32px"},l={post:t,source:{name:"post_actions_header"}};return s.createElement(i.a,{className:n(a),name:"byline",type:"byline",offset:{left:-600}},s.createElement(y.a,{display:"flex",justifyContent:"space-between",xs:{marginTop:a.marginTop},sm:{flexDirection:"column-reverse",marginTop:a.marginTop}},r&&t.creator?s.createElement(g.a,{avatar:s.createElement(E.d,{user:t.creator,scale:"XXS",link:!0,withHalo:!0}),publisher:t.creator,href:t.mediumUrl||void 0,isOneLine:!0,publishedAt:t.firstPublishedAt,showStar:!!t.isLocked&&!t.isShortform,timeToRead:!t.isShortform&&t.readingTime?"".concat(Object(w.f)(t.readingTime)," min read"):void 0,post:t}):s.createElement(c.b,{scale:"M",post:t,showBio:!1,hideCollection:!0}),s.createElement(y.a,{display:"flex",alignItems:"flex-end",print:{display:"none"},xs:{marginLeft:"0px",marginBottom:"30px"},sm:{marginLeft:"0px",marginBottom:"30px"},md:{marginLeft:"30px"},lg:{marginLeft:"30px"},xl:{marginLeft:"30px"}},s.createElement(y.a,{display:"flex",alignItems:"center"},t.isPublished&&(!r||!t.isShortform)&&s.createElement(s.Fragment,null,r?s.createElement(y.a,{paddingRight:"6px"},s.createElement(f.a,l)):s.createElement(v.a,l),s.createElement(y.a,{flexGrow:o?void 0:"1",marginRight:o?"8px":"-6px"},s.createElement(O.b,{source:{name:"post_actions_header",susiEntry:"bookmark_preview"}},s.createElement(m.a,{post:t}))),t&&o&&s.createElement(y.a,{flexGrow:"1",marginRight:"-6px"},s.createElement(y.A,null,(function(e){var n=e.show;return s.createElement(p.a,{creator:null==t?void 0:t.creator,post:t,collection:null==t?void 0:t.collection,showLoadingIndicator:n})}))))))))}function P(e,t){return"".concat(t,"_").concat(e[t]?e[t].length:0)}function C(e,t,n,r,o){e[t]||(e[t]=[]),e[t].push({order:n,component:r,insertType:o})}function k(e,t,n){return function(r){var o="number"==typeof n.titleIndex,a=n.subtitleIndex||n.titleIndex||0,i=t[a]&&t[a].name;if(i&&0===a&&!o){var l=s.createElement(S,{post:e,key:"insert_postBylineGroupComponent_".concat(P(r,"first"))});C(r,"first","before",s.createElement(x.j,{size:"inset",key:"insert_MaxWidth_PostBylineGroupComponent_".concat(P(r,"first"))},l),"BYLINE")}else if(i){C(r,i,"after",s.createElement(S,{post:e,key:"insert_PostBylineGroupComponent_".concat(P(r,i))}),"BYLINE")}return r}}function I(e,t,n){return function(r){var o="number"==typeof n.titleIndex,a=Math.max(n.bannerImageIndex||n.subtitleIndex||n.titleIndex||0,n.subtitleIndex||n.titleIndex||0),i=t[a]&&t[a].name;if(i&&0===a&&!o){var l=s.createElement(u.b,{post:e,mode:"INLINE",key:"insert_TOC_".concat(P(r,"first"))});C(r,"first","before",s.createElement(x.j,{size:"inset",key:"insert_MaxWidth_TableOfContents_".concat(P(r,"first"))},l),"TABLE_OF_CONTENTS")}else if(i){C(r,i,"after",s.createElement(u.b,{post:e,mode:"INLINE",key:"insert_TableOfContents_".concat(P(r,i))}),"TABLE_OF_CONTENTS")}return r}}function T(e){var t=e&&e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs||void 0;if(t){var n=Object(l.d)(t);return[k(e,t,n),I(e,t,n)].reduce((function(e,t){return t(e)}),{})}}var R=Object(a.gql)(_(),b.a,g.c,c.a,f.b,v.b,d.b,p.b)},"./src/components/post/PostBodySection.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return N})),n.d(t,"a",(function(){return H}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(i),c=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),b=n.n(g),h=n("./node_modules/@apollo/client/index.js"),v=n("./node_modules/react/index.js"),E=n("./src/WatchBounds.tsx"),x=n("./src/components/post/EmbeddedPostContext.tsx"),y=n("./src/components/post/PostBodyParagraph.tsx"),O=n("./src/components/post/grouping/ParagraphLayoutGrouping.tsx"),j=n("./src/framework/design-system/components/index.ts"),w=n("./src/framework/style/index.ts"),_={":after":{display:"block",content:'""',clear:"both"}},S=n("./src/util/miroImage.ts"),P=n("./src/util/theme.ts");function C(){var e=o()(["\n      fragment PostBodySection_paragraphs on Paragraph {\n        name\n        ...PostBodyParagraph_paragraph\n      }\n      ","\n    "]);return C=function(){return e},e}function k(){var e=o()(["\n  fragment PostBodySection_customStyleSheet on CustomStyleSheet {\n    id\n    ...ParagraphLayoutGrouping_customStyleSheet\n  }\n  ","\n"]);return k=function(){return e},e}function I(){var e=o()(["\n  fragment PostBodySection_privateNote on Note {\n    ...ParagraphLayoutGrouping_privateNote\n  }\n  ","\n"]);return I=function(){return e},e}function T(){var e=o()(["\n  fragment PostBodySection_highlight on Quote {\n    ...ParagraphLayoutGrouping_highlight\n  }\n  ","\n"]);return T=function(){return e},e}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){return{display:"table-cell",paddingBottom:"32px",verticalAlign:"bottom"}};function M(e){var t,n,r,o,a=e.bgImage,s=e.children,i=e.isFullPage,l=e.paragraphName,c=Object(w.useCx)();return a&&a.id&&i?v.createElement(E.a,{name:l,type:"bgimage"},v.createElement("div",{className:c((t=a,n=t.id,r=t.originalWidth,o=t.originalHeight,function(){var e=[400,600,800,1e3,1200,1400,1600,1800,2e3],t={miroId:n,strategy:S.a.Resample,verticalGradient:{start:29,end:81,opacity:40}},a=e.reduce((function(n,a,s){var i=Object(S.d)(L({},t,{width:a,height:a/r*o}));return s===e.length-1?(n.backgroundImage="url(".concat(i,")"),n):(n["@media (min-width: ".concat(a,"px)")]={backgroundImage:"url(".concat(i,")")},n)}),{});return L({backgroundColor:"rgba(0, 0, 0, 0.9)",backgroundPosition:"50% 50%",backgroundSize:"cover",display:"table",minHeight:"100vh",width:"100%"},a)}))},v.createElement("div",{className:c(A)},v.createElement(j.D,null,(function(e){return v.createElement(j.x,{theme:Object(P.p)(e)},s)}))))):s}var B=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.paragraphViewModels,n=e.postBodyInserts,r=e.section,o=e.customStyleSheet;if(0===t.length)return null;var a=function(e){switch(e){case"SERIES":return{paddingTop:"32px",paddingBottom:"32px",margin:"auto 0",width:"100%"};case"STREAM":case"CARD":case"FULL_PAGE":return{wordBreak:"break-word",wordWrap:"break-word"};default:return{}}}(t[0].richTextStyle),s=Object(O.e)(t);return v.createElement(x.a.Consumer,null,(function(e){return v.createElement(j.B,null,(function(i){return v.createElement("section",{className:i([a,_])},v.createElement(M,{bgImage:r.backgroundImage,isFullPage:"FULL_PAGE"===t[0].richTextStyle,paragraphName:t[0].paragraph.name},s.map((function(t,r){return v.createElement(O.a,{key:r,layoutGroup:t,postBodyInserts:n,customStyleSheet:o,isEmbedded:e})}))))}))}))}}]),t}(v.Component);b()(B,"fragments",{paragraphs:Object(h.gql)(C(),y.d.fragments.paragraph)});t.d=B;var D=Object(h.gql)(T(),O.c),N=Object(h.gql)(I(),O.d),H=Object(h.gql)(k(),O.b)},"./src/components/post/PostByline.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(i),c=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),b=n.n(g),h=n("./node_modules/@apollo/client/index.js"),v=n("./node_modules/react/index.js"),E=n("./node_modules/react-redux/es/index.js"),x=n("./src/components/format/Date.tsx"),y=n("./src/components/ui/Byline.tsx"),O=n("./src/components/user/UserAvatar.tsx"),j=n("./src/components/user/UserFollowButton.tsx"),w=n("./src/framework/design-system/components/index.ts"),_=n("./src/framework/design-system/components/Box.tsx"),S=n("./src/framework/design-system/type/Detail.tsx"),P=n("./src/framework/source/index.ts"),C=n("./src/styles/breakpoints.ts"),k=n("./src/svg/star-15px.svg"),I=n("./src/svg/unlisted-19px.svg"),T=n("./src/util/numbers.ts"),R=n("./src/util/routes.ts");function L(){var e=o()(["\n  fragment PostByline_post on Post {\n    id\n    isPublished\n    mediumUrl\n    firstPublishedAt\n    readingTime\n    statusForCollection\n    isLocked\n    isShortform\n    visibility\n    collection {\n      name\n      id\n      slug\n      ...collectionUrl_collection\n    }\n    creator {\n      name\n      username\n      id\n      bio\n      isFollowing\n      ...UserAvatar_user\n    }\n  }\n  ","\n  ","\n"]);return L=function(){return e},e}var A={XS:{showFollowButton:!1,avatarScale:"XS"},S:{showFollowButton:!1,avatarScale:"S"},M:{showFollowButton:!0,avatarScale:"M"}},M=function(e,t){return b()({marginBottom:e?"2px":"0px",display:"flex",alignItems:"center"},C.xs(t),{marginBottom:"0px"})},B=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentLocation,r=t.post,o=t.showBio,a=t.scale,s=void 0===a?"M":a,i=t.detailScale,l=void 0===i?"M":i,c=t.showStar,u=void 0===c?r.isLocked&&!r.isShortform:c,d=t.hideCollection,m=void 0!==d&&d,p=t.hideAvatar,f=void 0!==p&&p,g=t.hideDescription,b=void 0!==g&&g,h=t.noClamp,E=void 0!==h&&h,C=r.id,L=r.creator,B=r.collection,D=r.statusForCollection,N=r.visibility,H=r.isPublished,U=A[s];if(!r||!C||!L)return null;var F=r.firstPublishedAt,V=L.username,z=L.name;if(!z||!V)return null;var q=v.createElement(O.d,{user:L,scale:U.avatarScale,link:!0}),G=o?v.createElement("div",null,L.bio):null,W="APPROVED"===D,$=U.showFollowButton?v.createElement(P.b,{source:{susiEntry:"follow_byline"}},v.createElement(_.a,{marginLeft:"8px",xs:{display:"none"},flexShrink:"0"},v.createElement(j.a,{user:L,buttonSize:"COMPACT"}))):null,K=v.createElement(w.B,null,(function(t){return v.createElement(w.D,null,(function(r){return v.createElement("div",{className:t(M(U.showFollowButton,r))},v.createElement(S.a,{scale:l,tag:"span",color:"DARKER",clamp:E?void 0:1},v.createElement(w.m,{href:Object(R.Ac)(V,e.props.authDomain,L.hasDomain),inline:!0},z),B&&W&&!m?v.createElement("span",null," ","in"," ",v.createElement(w.m,{href:Object(R.K)(B,n,e.props.authDomain),inline:!0},B.name)):null),$)}))})),Y=v.createElement(S.a,{scale:l,tag:"span",clamp:1},G,v.createElement("div",null,H?v.createElement(w.m,{href:Object(R.Gb)(r),inline:!0},F&&v.createElement(x.a,{timestamp:F})):v.createElement("span",null,"Draft")," ","·"," ","UNLISTED"===N?v.createElement(S.a,{scale:"S",tag:"span"},v.createElement(I.a,null)," Unlisted"):v.createElement(v.Fragment,null,Object(T.f)(r.readingTime||0)," min read"),u&&v.createElement("span",{style:{paddingLeft:"4px"}},v.createElement(k.a,{style:{marginTop:"-2px"}}))));return v.createElement(y.a,{avatar:!f&&q,title:K,description:!b&&Y})}}]),t}(v.Component),D=Object(h.gql)(L(),O.b,R.L);t.b=Object(E.c)((function(e){return{currentLocation:e.navigation.currentLocation,authDomain:e.config.authDomain}}))(B)},"./src/components/post/PostHeader.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return w}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/components/audio/AudioPlayback.tsx"),c=n("./src/components/broadcast-banner/BroadcastBanner.tsx"),u=n("./src/components/meter/MeterController.tsx"),d=n("./src/components/cta/HighlightCTA.tsx"),m=n("./src/framework/design-system/components/index.ts"),p=n("./src/util/routes.ts");function f(){var e=o()(["\n  fragment NewsletterV3PostHeaderCTA_collection on Collection {\n    id\n    domain\n    slug\n    name\n    newsletterV3 {\n      id\n      slug\n      name\n    }\n  }\n"]);return f=function(){return e},e}var g=Object(a.gql)(f()),b=function(e){var t=e.collection,n=Object(i.f)((function(e){return e.config.authDomain})),r=t.newsletterV3||{id:"",slug:"",name:""},o=Object(p.ub)(r.slug,n,t);return s.createElement(s.Fragment,null,s.createElement(d.a,null,t.newsletterV3?s.createElement(s.Fragment,null,"This is an email from ",s.createElement((function(){return s.createElement(m.m,{inline:!0,linkStyle:"OBVIOUS",href:o},r.name)}),null),", a newsletter by ",t.name,"."):s.createElement(s.Fragment,null,"This is an email from ",t.name,".")))},h=n("./src/components/post/InResponseToPostPreview.tsx"),v=n("./src/components/post/PostPaywallAlert.tsx"),E=n("./src/components/session/useFlag.tsx");function x(){var e=o()(["\n  fragment PostHeader_meteringInfo on MeteringInfo {\n    ...MeterController_meteringInfo\n  }\n  ","\n"]);return x=function(){return e},e}function y(){var e=o()(["\n  fragment PostHeader_post on Post {\n    newsletterId\n    inResponseToPostResult {\n      ... on PostResult {\n        ...InResponseToPostPreview_postResult\n      }\n    }\n    topics {\n      name\n    }\n    tags {\n      id\n    }\n    collection {\n      ...NewsletterV3PostHeaderCTA_collection\n    }\n    layerCake\n    isLocked\n    id\n    firstPublishedAt\n    ...InResponseToPostPreview_mediaResource\n    ...MeterController_post\n    ...PostPaywallAlert_post\n    ...AudioPlayback_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}var O=Object(i.c)((function(e){return{isAmp:e.config.isAmp}}))((function(e){var t,n,r=e.meteringInfo,o=e.post,a=e.isAmp,i=Object(E.a)("kill_fastrak");return s.createElement(m.s,{columns:8},!!o.newsletterId&&!!o.collection&&s.createElement(b,{collection:o.collection}),s.createElement(h.a,{inResponseToPostResult:o.inResponseToPostResult,inResponseToMediaResource:o.inResponseToMediaResource,padding:"10px 0 0"}),!!o.isLocked&&!!r&&s.createElement(u.a,{meteringInfo:r,post:o}),s.createElement(c.a,{topics:null==o||null===(t=o.topics)||void 0===t?void 0:t.map((function(e){return e.name})),tags:null==o||null===(n=o.tags)||void 0===n?void 0:n.map((function(e){return e.id})),tier:null==o?void 0:o.layerCake,isLocked:null==o?void 0:o.isLocked,postId:null==o?void 0:o.id,postPublishDate:null==o?void 0:o.firstPublishedAt}),!i&&!o.inResponseToPostResult&&!o.newsletterId&&s.createElement(v.a,{post:o}),o.audioVersionUrl&&!a&&s.createElement(l.a,{post:o}))})),j=Object(a.gql)(y(),h.c,h.b,u.c,v.b,l.b,g),w=Object(a.gql)(x(),u.b)},"./src/components/post/PostMetadata.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./node_modules/react-helmet-async/lib/index.module.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),m=n.n(d),p=n("./node_modules/lodash/merge.js"),f=n.n(p),g=n("./node_modules/serialize-javascript/index.js"),b=n.n(g),h=n("./src/util/miroImage.ts"),v=n("./src/util/navigation.ts"),E=n("./src/util/post/metaHelpers.ts"),x=n("./src/util/routes.ts");function y(){var e=o()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    tags {\n      displayTitle\n    }\n    topics {\n      name\n      slug\n    }\n    sequence {\n      slug\n    }\n    lockedSource\n    layerCake\n    isShortform\n    shortformType\n    structuredData\n    ...getTitleForPost_post\n  }\n  ","\n"]);return y=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w="Tag",_="Topic",S="Publication",P="Sequence",C="LockedPostSource",k="Elevated",I="LayerCake",T="Lite";function R(e){var t=e.id,n=e.originalWidth,r=e.originalHeight;if(!t||!n||!r)return null;var o=Math.min(r,60),a=o/r,s=Math.floor(n*a);return L({width:s,height:o,url:Object(h.d)({miroId:t,width:s,freezeGifs:!0,strategy:h.a.Resample})})}function L(e){return j({"@type":"ImageObject"},e)}function A(e,t){return"".concat(e,":").concat(t)}var M=Object(u.c)((function(e){var t=e.config,n=t.productName,r=t.defaultImages,o=t.collectionStructuredData,a=e.navigation;return{currentLocation:a.currentLocation,host:a.host,productName:n,defaultImages:r,collectionStructuredData:o}}))((function(e){var t=e.currentLocation,n=e.host,r=e.post,o=e.postDescription,a=e.productName,s=e.defaultImages,i=e.collectionStructuredData,u=r.collection,d=r.creator,p=r.id,g=r.mediumUrl,y=r.isLocked,O=r.previewImage,M=r.firstPublishedAt,B=r.updatedAt,D=r.tags,N=r.topics,H=r.sequence,U=r.lockedSource,F=r.layerCake,V=r.structuredData,z=Object(E.e)(r,a),q={id:s.postLogo.imageId,originalWidth:s.postLogo.width,originalHeight:s.postLogo.height},G={id:s.orgLogo.imageId,originalWidth:s.orgLogo.width,originalHeight:s.orgLogo.height},W=u?{"@type":"Organization",name:u.name,url:u.domain||Object(v.b)(n,Object(x.K)(u,t)),logo:function(e){if(!e||!e.logo||!e.logo.id)return R(G);var t=R(e.logo);return t&&60===t.height&&t.width<=600?t:R(G)}(u)}:{"@type":"Organization",name:a,url:Object(v.b)(n,"/"),logo:R(G)};u&&i&&i[u.id]&&f()(W,i[u.id].data);var $=[A(T,"true")];D&&D.forEach((function(e){e.displayTitle&&$.push(A(w,e.displayTitle))})),N&&N.forEach((function(e){e.name?$.push(A(_,e.name)):e.slug&&$.push(A(_,e.slug))})),u&&u.slug&&$.push(A(S,u.slug)),$.push(A(k,(!!H).toString())),H&&H.slug&&$.push(A(P,H.slug)),U&&$.push(A(C,U)),null!=F&&$.push(A(I,F.toString()));var K=o||"",Y=y?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},Q={"@context":"http://schema.org"},X=j({"@type":"NewsArticle",image:O&&O.id?function(e){var t=e.id,n=e.originalWidth,r=e.originalHeight,o=e.focusPercentX,a=e.focusPercentY;if(!t)return null;var s=Object(h.b)({miroId:t,aspectRatio:16/9,croppedWidth:1200,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:a}),i=Object(h.b)({miroId:t,aspectRatio:4/3,croppedWidth:1200,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:a}),l=Object(h.b)({miroId:t,aspectRatio:1,croppedWidth:1200,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:a}),c=new Set([s,i,l]);return Array.from(c)}(O):L({url:Object(h.d)({miroId:q.id,width:q.originalWidth}),height:q.originalHeight,width:q.originalWidth}),url:g,dateCreated:M&&new Date(M).toISOString(),datePublished:M&&new Date(M).toISOString(),dateModified:B&&new Date(B).toISOString(),headline:z,name:z,description:K,identifier:p,keywords:$.length?$:null,author:d&&d.name&&d.username?{"@type":"Person",name:d.name||d.username,url:Object(x.ob)(n,d.username)}:null,creator:d&&[d.name],publisher:W,mainEntityOfPage:g},Y),J=j({},Q,{},X);if(V&&V.length>0)try{var Z=JSON.parse(V);if(Z&&(null==Z?void 0:Z["@graph"])&&(null==Z?void 0:Z["@graph"].length)>0){var ee=((null==Z?void 0:Z["@graph"])||[]).filter((function(e){return(null==e?void 0:e["@type"])&&"NewsArticle"!==(null==e?void 0:e["@type"])}));ee&&ee.length>0&&(J=j({},Q,{"@graph":[X].concat(m()(ee))}))}}catch(e){}return l.createElement(c.a,null,l.createElement("script",{type:"application/ld+json"},b()(J,{isJSON:!0})))})),B=Object(i.gql)(y(),E.f),D=n("./src/components/session/useFlag.tsx"),N=n("./src/util/numbers.ts"),H=n("./src/util/post/metaDescription.ts");function U(){var e=o()(["\n  fragment PostMetadata_post on Post {\n    id\n    socialTitle\n    socialDek\n    canonicalUrl\n    mediumUrl\n    metaDescription\n    latestPublishedAt\n    visibility\n    isLimitedState\n    readingTime\n    creator {\n      name\n      username\n      twitterScreenName\n    }\n    collection {\n      ampEnabled\n      twitterUsername\n      facebookPageId\n    }\n    previewContent {\n      subtitle\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalHeight\n      originalWidth\n    }\n    isShortform\n    ...PostJsonLd_post\n    ...postMetaDescription_post\n    ...shortformPostMetaDescription_post\n    ...shouldIndex_post\n    ...shortformPostTitle_post\n    ...getTitleDetails_post\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return U=function(){return e},e}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.b=Object(u.c)((function(e){return{host:e.navigation.host,productName:e.config.productName}}))((function(e){var t,n,r=e.isAmp,o=e.host,a=e.productName,i=e.post,u=i.canonicalUrl,d=i.collection,m=i.creator,p=i.id,f=i.latestPublishedAt,g=i.mediumUrl,b=i.previewContent,v=i.socialTitle,y=i.socialDek,O=i.visibility,j=i.isShortform,w=!!Object(D.a)("default_seo_post_titles"),_=d&&d.ampEnabled,S=m&&m.name,P=Object(E.c)(i),C=i.title||"",k=P.latestTitle||C;if(j){var I=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{title:k});t=Object(E.i)(I,a,P.hasTitleGraf).trim(),n=Object(H.c)(i,P.hasTitleGraf)}else t=Object(E.e)(i,a,P,w).trim(),n=Object(H.a)(i);var T,R,L=y||b&&b.subtitle||n;if(i&&i.previewImage&&i.previewImage.id&&!i.isLimitedState){var A=i.previewImage;T=Object(h.b)({miroId:A.id,aspectRatio:1.9,croppedWidth:A.originalWidth?Math.min(A.originalWidth,1200):1200,originalWidth:A.originalWidth,originalHeight:A.originalHeight,focusPercentX:A.focusPercentX,focusPercentY:A.focusPercentY})}else if(i.isLimitedState){var B={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};T=Object(h.b)({miroId:B.id,aspectRatio:1.9,croppedWidth:B.originalWidth?Math.min(B.originalWidth,1200):1200,originalWidth:B.originalWidth,originalHeight:B.originalHeight,focusPercentX:B.focusPercentX,focusPercentY:B.focusPercentY})}m&&m.username&&(R=Object(x.ob)(o,m.username));var U=Object(x.k)(p),V=!Object(E.k)(i),z=f&&new Date(f).toISOString(),q=Object(N.f)(i.readingTime||0),G=m&&m.twitterScreenName,W=d&&d.twitterUsername||"Medium",$=d&&d.facebookPageId,K=v||(C||k);i.isLimitedState&&(K="");var Y=i.isLimitedState?"":L,Q=l.useMemo((function(){return l.createElement(c.a,{htmlAttributes:r?{amp:void 0}:{}},l.createElement("meta",{property:"og:type",content:"article"}),z&&l.createElement("meta",{property:"article:published_time",content:z}),_&&!r?l.createElement("link",{rel:"amphtml",href:Object(x.e)(o,p)}):null,l.createElement("title",null,t),l.createElement("meta",{name:"title",content:t}),l.createElement("meta",{property:"og:title",content:K}),l.createElement("meta",{property:"twitter:title",content:K}),$&&l.createElement("meta",{property:"fb:pages",content:$}),l.createElement("meta",{name:"twitter:site",content:"@".concat(W)}),l.createElement("meta",{name:"twitter:app:url:iphone",content:U}),l.createElement("meta",{property:"al:android:url",content:U}),l.createElement("meta",{property:"al:ios:url",content:U}),l.createElement("meta",{property:"al:android:app_name",content:"Medium"}),n&&l.createElement("meta",{name:"description",content:n}),L&&l.createElement("meta",{property:"og:description",content:Y}),L&&l.createElement("meta",{property:"twitter:description",content:Y}),l.createElement("meta",{property:"og:url",content:g}),l.createElement("meta",{property:"al:web:url",content:g}),T&&l.createElement("meta",{property:"og:image",content:T}),T&&l.createElement("meta",{name:"twitter:image:src",content:T}),l.createElement("meta",{name:"twitter:card",content:T?"summary_large_image":"summary"}),R&&l.createElement("meta",{property:"article:author",content:R}),R&&l.createElement("link",{rel:"author",href:R}),G&&l.createElement("meta",{name:"twitter:creator",content:"@".concat(G)}),S&&l.createElement("meta",{name:"author",content:S}),l.createElement("link",{rel:"canonical",href:u||g}),l.createElement("link",{rel:"alternate",href:Object(x.h)(Object(x.Ib)("medium.com",i.id))}),l.createElement("meta",{name:"robots",content:"".concat(V?"noindex":"index",",follow,max-image-preview:large")}),l.createElement("meta",{name:"referrer",content:"UNLISTED"!==O?"unsafe-url":"origin"}),r?null:l.createElement("meta",{name:"twitter:label1",value:"Reading time"}),r?null:l.createElement("meta",{name:"twitter:data1",value:"".concat(q," min read")}),l.createElement("meta",{name:"parsely-post-id",content:p}))}),[r,t,u,g,T,_,p,v,n,R,S,G,U,V,z]);return l.createElement(l.Fragment,null,Q,l.createElement(M,{post:i,postDescription:n}))}));var V=Object(i.gql)(U(),B,H.b,H.d,E.l,E.j,E.d,E.f)},"./src/components/post/PostPaywallAlert.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return O}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./src/components/session/WithViewer.tsx"),u=n("./src/framework/design-system/components/index.ts"),d=n("./src/framework/design-system/type/Detail.tsx"),m=n("./src/util/routes.ts");function p(){var e=o()(["\n  mutation PostPaywallAlertMutation($postId: ID!) {\n    dismissDistributionAlert(postId: $postId)\n  }\n"]);return p=function(){return e},e}function f(){var e=o()(["\n  fragment PostPaywallAlert_post on Post {\n    id\n    visibility\n    lockedSource\n    curationEligibleAt\n    collection {\n      isEnrolledInHightower\n      isAuroraVisible\n      viewerIsEditor\n    }\n    creator {\n      id\n      isPartnerProgramEnrolled\n    }\n    isDistributionAlertDismissed\n  }\n"]);return f=function(){return e},e}var g=function(){return l.createElement(u.m,{href:Object(m.Q)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more")},b=function(){return l.createElement(u.m,{href:Object(m.P)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more")},h=function(){return l.createElement(l.Fragment,null,"This story's distribution setting is off. ",l.createElement(g,null))},v={LOCKED:function(){return l.createElement(l.Fragment,null,"This story's distribution setting is on. ",l.createElement(b,null))},PUBLIC:h,UNLISTED:h},E={LOCKED:function(){return l.createElement(l.Fragment,null,"This story's distribution setting is on. You're in the Partner Program, so this story is eligible to earn money. ",l.createElement(b,null))},PUBLIC:function(){return l.createElement(l.Fragment,null,"This story's distribution setting is off and it won't earn money in the Partner Program."," ",l.createElement(g,null))},UNLISTED:h};function x(e){var t=e.post,n=e.viewer,r=Object(i.useMutation)(j),o=s()(r,1)[0],a=t.collection,c=t.lockedSource,m=t.creator,p=t.visibility,f=t.curationEligibleAt,g=t.isDistributionAlertDismissed,b=!(!n||!t.creator||n.id!==t.creator.id),h=!(!t.collection||!t.collection.viewerIsEditor),x=null==a?void 0:a.isAuroraVisible;if(!b&&!h||g||x)return null;var y=a&&a.isEnrolledInHightower,O="LOCKED_POST_SOURCE_UGC"===c,w=b&&m&&m.isPartnerProgramEnrolled,_=O&&(h&&y||w&&!y)?E:v,S=!!(f&&f>0)?_.LOCKED:_[p];return l.createElement(u.A,{initialVisibility:!0},(function(e){var n=e.hide;return e.isVisible&&l.createElement(u.a,{border:"BASE_LIGHT",borderRadius:"4px",position:"relative",marginTop:"24px",marginBottom:"15px"},l.createElement(u.e,{onClick:function(){n(),o({variables:{postId:t.id}})},size:"LARGE"}),l.createElement(u.a,{padding:"20px"},l.createElement(u.a,{marginBottom:"8px"},l.createElement("i",null,l.createElement(d.a,{scale:"S"},"Only you can see this message"))),l.createElement(d.a,{scale:"M",color:"DARKER"},l.createElement(S,null))))}))}function y(e){var t=e.post;return l.createElement(c.b,null,(function(e){return l.createElement(x,{post:t,viewer:e})}))}var O=Object(i.gql)(f()),j=Object(i.gql)(p())},"./src/components/post/PostPublishedDialog.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return T}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/@apollo/client/react/components/index.js"),c=n("./node_modules/react/index.js"),u=n("./src/components/session/WithViewer.tsx"),d=n("./src/components/session/useFlag.tsx"),m=n("./src/components/social/ShareButton.tsx"),p=n("./src/framework/design-system/components/index.ts"),f=n("./src/framework/design-system/type/index.ts"),g=n("./src/framework/track/index.ts"),b=n("./src/schema-types/globalTypes.ts"),h=n("./src/styles/colors.ts"),v=n("./src/util/CopyUrl.tsx"),E=n("./src/util/navigation.ts"),x=n("./src/util/routes.ts");function y(){var e=s()(["\n  fragment PostPublishedDialog_prerequisite_post on Post {\n    id\n    creator {\n      id\n    }\n    collection {\n      id\n      viewerIsEditor\n    }\n    creatorPartnerProgramEnrollmentStatus\n  }\n"]);return y=function(){return e},e}function O(){var e=s()(["\n  query PostPublishedDialogQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...PostPublishedDialog_post\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function j(){var e=s()(["\n  fragment PostPublishedDialog_post on Post {\n    id\n    inResponseToPostResult {\n      __typename\n    }\n    visibility\n    curationEligibleAt\n    mediumUrl\n    shareKey\n    ...ShareButton_post\n    creatorPartnerProgramEnrollmentStatus\n  }\n  ","\n"]);return j=function(){return e},e}var w=function(){return c.createElement(p.a,null,c.createElement(p.m,{inline:!0,linkStyle:"OBVIOUS",href:Object(x.O)()},"Learn more")," ","about what happens to your post when you publish.")};var _=Object(i.gql)(j(),m.b),S=Object(i.gql)(O(),_),P=function(e){var t=e.url,n=e.label;return c.createElement(v.a,{url:t},(function(e){return c.createElement(p.a,{marginBottom:"8px"},c.createElement(p.b,{buttonStyle:"SOCIAL",size:"REGULAR",width:"212px",onClick:function(e){return e}},c.createElement(p.a,{display:"flex",alignItems:"center",justifyContent:"center"},e?"Copied!":n)))}))},C=function(e){var t=e.post,n=e.isUnlisted,r=e.postPath;return c.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"center"},c.createElement(f.b,{color:"DARKER",scale:"L",tag:"p"},function(e){return e?"Share your story outside Medium.":"Share your story with the world."}(n)),c.createElement(p.a,{marginTop:"20px"},!n&&c.createElement(c.Fragment,null,c.createElement(p.a,{marginBottom:"8px"},c.createElement(m.a,{socialPlatform:"FACEBOOK",buttonStyle:"BUTTON_BRANDED",post:t})),c.createElement(p.a,{marginBottom:"8px"},c.createElement(m.a,{socialPlatform:"TWITTER",buttonStyle:"BUTTON_BRANDED",post:t})),c.createElement(p.a,{marginBottom:"8px"},c.createElement(m.a,{socialPlatform:"LINKEDIN",buttonStyle:"BUTTON_BRANDED",post:t}))),c.createElement(P,{url:r,label:"Copy story link"})))},k=function(e){var t=e.isVisible,n=e.hide,r=e.post,o=r.id,a=r.visibility,s=r.curationEligibleAt,i=r.mediumUrl,l=r.shareKey,u=r.creatorPartnerProgramEnrollmentStatus,m="UNLISTED"===a,g=!!s,v=!!Object(d.a)("kill_fastrak"),y=u===b.n.ENROLLED;return c.createElement(p.g,{isVisible:t,hide:n,withAnimation:!0,withCloseButton:!1},c.createElement(p.a,{background:h.B,borderRadius:"4px",boxShadow:"0 2px 10px ".concat(Object(h.y)(.15)),position:"relative",width:"900px",textAlign:"center",md:{width:"600px"},sm:{width:"calc(100vw - 128px)"}},c.createElement(p.e,{onClick:n,size:"LARGE"}),c.createElement(p.a,{padding:"56px",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"485px"},c.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},c.createElement(f.d,{scale:"L",tag:"h3"},"Your story is published!"),c.createElement(p.a,{maxWidth:"520px",marginTop:"20px"},c.createElement(f.b,{color:"DARKER",scale:"L",tag:"p"},function(e,t,n,r){return e?"Your unlisted story will not appear publicly on Medium, but you can still share it.":r?n?t?c.createElement(c.Fragment,null,"As a member of the Partner Program, you’ve chosen to make this story eligible to earn money. It will be part of Medium’s metered paywall.",c.createElement(w,null)):c.createElement(c.Fragment,null,"You did not choose to make this story eligible to earn money. It will not be part of Medium’s metered paywall.",c.createElement(w,null)):c.createElement(c.Fragment,null,"This story isn’t currently eligible to earn money. To make this story eligible, join the Medium Partner Program."," ",c.createElement(p.m,{inline:!0,linkStyle:"OBVIOUS",href:"https://medium.com/earn"},"Learn more.")):t?"If our curators recommend your story to readers by adding it to relevant topics, we will email you to let you know. Recommended stories are part of Medium's metered paywall, and you can use the custom Friend Link below to give anyone who clicks it free access to your story.":"You chose not to make this story eligible for review by curators and distribution through Medium topics. Your story will only be shared on Medium with readers who follow you."}(m,g,y,v))),c.createElement(p.a,{paddingTop:"20px"},g&&!m&&i&&l&&c.createElement(P,{url:Object(E.a)(Object(x.Gb)(r),{sk:l}),label:"Copy Friend Link"})),c.createElement(p.a,{borderBottom:"BASE_LIGHTER",width:"100%",margin:"20px 0"})),o&&i&&c.createElement(C,{post:r,isUnlisted:m,postPath:Object(x.Gb)(r)}))))},I=function(e){var t=e.post,n=c.useState(!1),r=o()(n,2),a=r[0],s=r[1];return a?c.createElement(u.b,null,(function(n){return n&&n.id&&(n.id===(t.creator&&t.creator.id)||t.collection&&t.collection.viewerIsEditor)?c.createElement(l.Query,{ssr:!1,query:S,variables:{postId:t.id}},(function(t){var n=t.loading,r=t.data,o=(r=void 0===r?{}:r).post;if(n||!o||o.inResponseToPostResult)return null;var a={isVisible:e.isVisible,hide:e.hide,post:o};return c.createElement(k,a)})):null})):(g.a.on("load",(function(){return s(!0)})),null)},T=Object(i.gql)(y())},"./src/components/post/PostRecircItemV2.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),u=n("./src/components/post/PostByline.tsx"),d=n("./src/components/session/WithFlag.tsx"),m=n("./src/components/ui/image/ProgressiveMiroImage.tsx"),p=n("./src/framework/design-system/components/index.ts"),f=n("./src/framework/design-system/type/index.ts"),g=n("./src/framework/track/index.ts"),b=n("./src/util/miroImage.ts"),h=n("./src/util/routes.ts");function v(){var e=s()(["\n  fragment PostRecircItemV2_post on Post {\n    __typename\n    id\n    title\n    mediumUrl\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n    }\n    ...PostByline_post\n    ...PostPresentationTracker_post\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}var E=Object(i.gql)(v(),u.a,g.c);t.b=Object(c.c)((function(e){return{defaultImages:e.config.defaultImages}}))((function(e){var t,n=e.post,r=e.defaultImages,a=(null==n?void 0:n.post)||n;if(!a)return null;var s,i,c,v,E=a.title,x=a.previewImage,y=null==r||null===(t=r.postPreviewImage)||void 0===t?void 0:t.imageId,O=(s={id:(null==x?void 0:x.id)||y,focusPercentX:null==x?void 0:x.focusPercentX,focusPercentY:null==x?void 0:x.focusPercentY},i=s.id,c=s.focusPercentX,v=s.focusPercentY,i?l.createElement(m.a,{miroId:i,freezeGifs:!1,focusPercentX:c,focusPercentY:v,strategy:b.a.Crop,width:70,height:70,otherWidths:[48,70],expectedWidth:70,rules:[{minWidth:{xs:"48px",sm:"48px",md:"48px",lg:"70px",xl:"70px"},minHeight:{xs:"48px",sm:"48px",md:"48px",lg:"70px",xl:"70px"}}]}):null);return l.createElement(g.b,{post:a,presentationContext:"PLACEMENT"},l.createElement(p.a,{display:"flex",justifyContent:"space-between"},l.createElement(p.a,{flexShrink:"1",xs:{marginRight:"16px"},sm:{marginRight:"16px"},md:{marginRight:"16px"}},l.createElement(p.a,{paddingBottom:"8px"},l.createElement(f.c,{scale:{xs:"XXS",sm:"XXS",md:"XXS",lg:"XS",xl:"XS"}},l.createElement(p.d,{href:Object(h.Gb)(a)},E))),l.createElement(d.a,{name:"remove_stars_ui"},(function(e){return l.createElement(l.Fragment,null,l.createElement(u.b,{post:a,showBio:!1,scale:"S",detailScale:"S",showStar:!e&&!!a.isLocked,hideAvatar:!0,hideDescription:!0,noClamp:!0}))}))),O&&l.createElement(p.a,o()({marginLeft:"12px",marginRight:"8px"},{sm:{marginLeft:"16px",marginRight:"0px"}}),l.createElement(p.m,{display:"block",href:Object(h.Gb)(a)},O))))}))},"./src/components/post/PostSidebar.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return U})),n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return G}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/typeof.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(i),c=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=n.n(c),d=n("./node_modules/@apollo/client/index.js"),m=n("./node_modules/react/index.js"),p=n("./node_modules/react-redux/es/index.js"),f=n("./src/WatchBounds.tsx"),g=n("./src/components/collection/CollectionFollowButton.tsx"),b=n("./src/components/format/Linkifier.tsx"),h=n("./src/components/metabar/constants.ts"),v=n("./src/components/post/TableOfContents.tsx"),E=n("./src/components/post/bookmark/index.ts"),x=n("./src/components/post/bookmark/PostPageBookmarkButton.tsx"),y=n("./src/components/post/multivote/MultiVote.tsx"),O=n("./src/components/publisher/auroraHooks.ts"),j=n("./src/components/read-next/ReadNext.tsx"),w=n("./src/components/responses/ResponsesIconButton.tsx"),_=n("./src/components/session/useFlag.tsx"),S=n("./src/components/sidebar/SidebarWrapper.tsx"),P=n("./src/components/user/UserFollowButton.tsx"),C=n("./src/framework/design-system/components/index.ts"),k=n("./src/framework/design-system/type/index.ts"),I=n("./src/framework/design-system/type/useTypeRules.ts"),T=n("./src/framework/source/index.ts"),R=n("./src/framework/style/index.ts"),L=n("./src/styles/mediaTypes.ts"),A=n("./src/util/dom.ts"),M=n("./src/util/routes.ts");function B(){var e=o()(["\n  fragment PostSidebar_post on Post {\n    id\n    clapCount\n    collection {\n      ...auroraHooks_publisher\n      ...PostSidebar_collection\n    }\n    creator {\n      bio\n      name\n      username\n      hasDomain\n      ...UserFollowButton_user\n      ...auroraHooks_publisher\n    }\n    isShortform\n    ...BookmarkButton_post\n    ...CollectionFollowButton_post\n    ...MultiVote_post\n    ...ResponsesIconButton_post\n    ...UserFollowButton_post\n    ...TableOfContents_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return B=function(){return e},e}function D(){var e=o()(["\n  fragment PostSidebar_collection on Collection {\n    id\n    description\n    tagline\n    ...CollectionFollowButton_collection\n    ...collectionUrl_collection\n  }\n  ","\n  ","\n"]);return D=function(){return e},e}var N={wordBreak:"break-word"},H=function(e){var t;return t={opacity:e?1:0,pointerEvents:e?"auto":"none",willChange:"opacity",position:"fixed",width:"188px",left:"50%",transform:"translateX(406px)",top:"calc(".concat(h.a,"px + 54px + 14px)")},u()(t,Object(L.c)("no-preference"),{transition:"opacity 200ms"}),u()(t,"@media all and (max-width: 1230px)",{display:"none"}),t},U=m.forwardRef((function(e,t){var n,r=e.isClearOfBounds,o=e.isOnPage,a=e.post,i=e.setIsResponsesSidebarVisible,c=Object(p.f)((function(e){return e.navigation.currentLocation})),u=Object(R.useCx)(),d=m.useContext(f.b).watchedBounds,g=m.useState(o||!1),b=l()(g,2),h=b[0],E=b[1],P=m.useState(r||!1),k=l()(P,2),I=k[0],L=k[1],M=m.useRef(null),B=m.useRef(null),D=!!Object(_.b)("enable_post_table_of_contents").value,N=m.useRef(null),U=a.collection;m.useEffect(z(d,E),[d]);var q=m.useCallback(function(e,t,n,r,o){return function(){if(e.current){var a=t.current,s=["image","bgimage","footer","byline","title","header"],i=Object(S.c)(e,n,s,o),l=!a||Object(S.c)(t,n,s,o);r(i&&l)}}}(M,B,d,L,{threshold:10}),[d,L]);m.useEffect((function(){q()}),[]);var G="object"===s()(t)?t:null;m.useEffect(Object(S.d)(q,null==G?void 0:G.current),[q,null==G?void 0:G.current]);var W=I&&h,$=Object(O.b)(U||a.creator)?m.createElement(V,{post:a}):U&&m.createElement(F,{post:a,currentLocation:c}),K=function(e,t,n){var r,o,a,s,i=null===(r=e.get("byline"))||void 0===r||null===(o=r.ref)||void 0===o?void 0:o.current,l=null===(a=e.get("ghost-track"))||void 0===a||null===(s=a.ref)||void 0===s?void 0:s.current,c=l&&Object(A.a)(l).top+window.scrollY-window.innerHeight||0;if(i&&l){var u=i.offsetTop+i.offsetHeight+(n?10:40);return t?u-c:u}}(d,!0,D);return m.createElement(T.b,{source:{susiEntry:"post_sidebar",name:"post_sidebar"}},m.createElement(S.b,{testId:"post-sidebar",isFixed:!0,scrollableRef:t,sidebarRef:M,topOffset:K,visible:W},a.isShortform?$:m.createElement(m.Fragment,null,m.createElement("div",{ref:N},$,m.createElement(T.b,{source:{susiEntry:"clap_sidebar"},extendSource:!0},m.createElement(C.a,{display:"flex",marginBottom:"19px",marginLeft:"-3px",paddingTop:"28px"},m.createElement(y.a,{post:a,buttonStyle:"SUBTLE_PADDED",hasDialog:!0}))),m.createElement(T.b,{source:{postId:a.id,susiEntry:"bookmark_sidebar"},extendSource:!0},m.createElement(C.a,{marginBottom:"19px"},m.createElement(w.a,{responsesCount:null===(n=a.postResponses)||void 0===n?void 0:n.count,location:"sidebar",setIsResponsesSidebarVisible:i,allowResponses:a.allowResponses,postId:a.id,isLimitedState:a.isLimitedState})),m.createElement(x.a,{post:a}))),m.createElement(v.b,{post:a,mode:"SIDEBAR",heightRef:N}))),m.createElement("div",{className:u(H(W)),ref:B},m.createElement(j.a,{postId:a.id,isVisible:W})))})),F=function(e){var t=e.post,n=e.currentLocation,r=Object(R.useCx)(),o=Object(I.a)({name:"heading",scale:"XS"}),a=Object(p.f)((function(e){return e.config.authDomain})),s=t.collection;if(!s)return null;var i=t.isShortform?"NONE":"BASE_LIGHTER";return m.createElement(C.a,{paddingBottom:"28px",borderBottom:i},(null==s?void 0:s.name)&&m.createElement(C.m,{href:Object(M.K)(s,n,a)},m.createElement("h2",{className:r([o,N])},s.name)),(s.tagline||s.description)&&m.createElement(C.a,{paddingTop:"2px",paddingBottom:"20px"},m.createElement(k.b,{scale:"M",clamp:6},s.tagline||s.description)),m.createElement(T.b,{source:{susiEntry:"follow_sidebar"},extendSource:!0},m.createElement(g.a,{collection:s,post:t})))},V=function(e){var t=e.post,n=Object(p.f)((function(e){return e.config.authDomain})),r=Object(R.useCx)(),o=Object(I.a)({name:"heading",scale:"XS"}),a=t.creator;if(!a||!a.name)return null;var s=m.createElement("h2",{className:r([o,N])},a.name),i=a.username?m.createElement(C.m,{href:Object(M.Ac)(a.username,n,a.hasDomain)},s):s,l=t.isShortform?"NONE":"BASE_LIGHTER";return m.createElement(C.a,{paddingBottom:"28px",borderBottom:l},m.createElement(k.e,{scale:"S"},"Written by"),m.createElement(C.a,{paddingTop:"5px",paddingBottom:"5px"},i),a.bio&&m.createElement(C.a,{paddingTop:"2px"},m.createElement(k.b,{scale:"M"},m.createElement(b.a,{wrapLinks:!0},a.bio))),m.createElement(C.a,{paddingTop:"14px"},m.createElement(T.b,{source:{susiEntry:"follow_card"},extendSource:!0},m.createElement(P.a,{buttonSize:"SMALL",post:t,user:a}))))},z=function(e,t){return function(){var n=new IntersectionObserver((function(n){var r=e.get("ghost-track");if(r){var o=n.find((function(e){return e.target===r.ref.current}));o&&t(o.isIntersecting)}else t(!1)}));return e.forEach((function(e){e.ref.current&&n.observe(e.ref.current)})),function(){n.disconnect()}}};var q=Object(d.gql)(D(),g.b,M.L),G=Object(d.gql)(B(),O.a,q,P.c,E.b,g.c,y.b,w.b,P.b,v.a)},"./src/components/post/TableOfContents.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/collection/theming/Foldable.tsx"),l=n("./src/components/post/NormalizePostBodyModel.ts"),c=n("./src/components/sidebar/SidebarWrapper.tsx"),u=n("./src/framework/design-system/components/Link.tsx"),d=n("./src/framework/design-system/type/Detail.tsx"),m=n("./src/framework/style/index.ts"),p={INLINE:{padding:"8px 0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},SIDEBAR:{padding:"8px 0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"".concat(c.a,"px"),":hover":{width:"200px"}}};function f(e){var t=Object(m.useCx)();return s.createElement("li",{className:t({overflow:"hidden"})},s.createElement(d.a,{scale:"M",color:"DARKER"},s.createElement(u.a,{href:"#".concat(e.destination),onClick:function(t){t.preventDefault(),function(e){var t=document.getElementById(e);if(t){var n=t.offsetTop-56;window.scrollTo({left:0,top:n,behavior:"smooth"}),window.history.pushState({},"","#".concat(e))}}(e.destination)},disableSourceParam:!0,noFollow:!0,inline:!0},s.createElement("div",{className:t(p[e.mode]),title:e.text},e.text))))}var g=n("./src/components/session/RequireFlag.tsx"),b=n("./src/framework/design-system/components/Box.tsx"),h=n("./src/framework/design-system/type/Overline.tsx"),v=n("./src/schema-types/globalTypes.ts"),E=n("./src/styles/colors.ts"),x=n("./src/util/color.ts");function y(){var e=o()(["\n  fragment TableOfContents_post on Post {\n    id\n    collection {\n      id\n    }\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          id\n          name\n          type\n          text\n        }\n      }\n    }\n  }\n"]);return y=function(){return e},e}var O=Object(a.gql)(y()),j=function(e){var t=(e||{content:{bodyModel:{paragraphs:null}}}).content.bodyModel.paragraphs;if(!t)throw new Error("Expected post to have paragraphs.");var n=Object(l.d)(t),r=t.filter((function(e){return function(e){switch(e){case v.m.H1:case v.m.H2:case v.m.H3:return!0}return!1}(e.type)}));return null!==n.titleIndex&&r.splice(0,1),r.length>1?r:[]},w={INLINE:{display:{xs:"block",sm:"block",md:"block",lg:"block",xl:"none"},marginTop:"35px"},SIDEBAR:{display:{xs:"none",sm:"none",md:"none",lg:"none",xl:"block"},margin:"50px 0",fontSize:"16px",":hover":{width:"200px"}}};t.b=function(e){var t=e.post,n=e.mode,r=e.heightRef,o=Object(m.useCx)(),a=Object(m.useTheme)().backgroundColor,l=j(t);if(!function(e){return!!(e.collection&&e.collection.id&&["3ec9f38ac0bd","3f6ecf56618","8d6b8a439e32"].includes(e.collection.id))||["8135e6744d59","21f0e9818b3a"].includes(e.id)}(t)||!(null==l?void 0:l.length))return null;var c,u,d=function(){var e=(null==r?void 0:r.current)?r.current.offsetHeight:0,t=Math.max("undefined"!=typeof window?window.innerHeight-e-106-100:150,150);return"".concat(t,"px")},p=s.createElement(b.a,{overflow:"hidden",marginTop:"16px"},s.createElement("ol",{className:o({marginTop:"5px"})},l.map((function(e){return s.createElement(f,{key:"toc_".concat(e.name),text:e.text||"",destination:e.name||"",mode:n})})))),v=Object(x.e)(a),y=function(e){return"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", ").concat(e,")")};switch(n){case"INLINE":u=s.createElement(h.a,{scale:"M",color:"LIGHTER"},s.createElement("div",{className:o({marginRight:"7px"})},"Jump To Section")),c=s.createElement("div",{className:o(w[n])},s.createElement(b.a,{borderBottom:"BASE_LIGHTER",paddingBottom:"10px"},s.createElement(i.a,{titleComponent:u,width:"auto",arrowFill:Object(E.y)(.54)},p)));break;case"SIDEBAR":u=s.createElement(h.a,{scale:"S",color:"LIGHTER"},s.createElement("div",{className:o({whiteSpace:"nowrap"})},"Table of Contents")),c=s.createElement("div",{className:o(w[n])},u,s.createElement(b.a,{position:"relative"},s.createElement("div",{className:o((function(){return{background:"linear-gradient(".concat(y(1),",\n      ").concat(y(.5),",\n      ").concat(y(0),")"),width:"100%",height:"".concat(35,"px")}}))}),s.createElement("div",{className:o({overflowY:"scroll",scrollbarWidth:"none","-ms-overflow-style":"none","::-webkit-scrollbar":{display:"none"},height:d(),paddingBottom:"".concat(35,"px"),position:"relative",top:"-".concat(35,"px")})},p),s.createElement("div",{className:o((function(){return{background:"linear-gradient(".concat(y(0),",\n      ").concat(y(.5),",\n      ").concat(y(1),")"),position:"relative",width:"100%",height:"".concat(35,"px"),top:"-".concat(35,"px")}}))})));break;default:return null}return s.createElement(g.a,{name:"enable_post_table_of_contents"},c)}},"./src/components/post/body/InteractivePostBody.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return L}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/@apollo/client/react/components/index.js"),d=n("./node_modules/react/index.js"),m=n("./src/components/post/body/ActivePrivateNoteContext.tsx"),p=n("./src/components/post/body/ActiveSelectionContext.tsx"),f=n("./src/components/post/body/ParagraphRefsMapContext.tsx"),g=n("./src/components/post/body/PostBody.tsx"),b=n("./src/components/post/markups/HighlightSegmentsContext.tsx"),h=n("./src/util/typeGuards.ts");function v(){var e=l()(["\n  fragment NormalizeHighlights_paragraph on Paragraph {\n    name\n    text\n  }\n"]);return v=function(){return e},e}function E(){var e=l()(["\n  fragment NormalizeHighlights_highlight on Quote {\n    endOffset\n    startOffset\n    paragraphs {\n      name\n      text\n    }\n  }\n"]);return E=function(){return e},e}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){if(!e||"number"!=typeof t||"number"!=typeof n)return null;var r=t,o=n;return e.substr(r,o-r)}function O(e,t){return e&&t?e.map((function(e){var n=e.endOffset,r=e.startOffset,a=e.paragraphs&&e.paragraphs[0],s=function(e,t){return e?t.find((function(t){var n=t.name;return e===n})):null}(a.name,t);if(!a||!s)return null;var i=y(a.text,r,n),l=y(s.text,r,n);if(!i||!l)return null;if(i===l)return e;var c=s.text?s.text.indexOf(i):null;return"number"!=typeof c||c<0?null:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{endOffset:c+i.length,startOffset:c})})).filter(h.b):e}var j=Object(c.gql)(E()),w=Object(c.gql)(v()),_=n("./src/components/session/WithFlag.tsx"),S=n("./src/components/session/WithViewer.tsx");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(){var e=l()(["\n  query InteractivePostBodyQuery($postId: ID!, $showHighlights: Boolean!, $showNotes: Boolean!) {\n    post(id: $postId) {\n      id\n      highlights @include(if: $showHighlights) {\n        id\n        ...ActiveSelectionContext_highlight\n        ...HighlighSegmentContext_highlight\n        ...NormalizeHighlights_highlight\n        ...PostBody_highlight\n      }\n      privateNotes @include(if: $showNotes) {\n        ...PostBody_privateNote\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return k=function(){return e},e}function I(){var e=l()(["\n  fragment InteractivePostBody_customStyleSheet on CustomStyleSheet {\n    id\n    ...PostBody_customStyleSheet\n  }\n  ","\n"]);return I=function(){return e},e}function T(){var e=l()(["\n  fragment InteractivePostBody_post on Post {\n    id\n    # please note that the postMeteringOptions is defined in handlers that use InteractivePostBody\n    # (PostHandler and SequencePostHandler)\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      bodyModel {\n        ...PostBody_bodyModel\n        paragraphs {\n          ...HighlighSegmentContext_paragraph\n          ...NormalizeHighlights_paragraph\n        }\n      }\n    }\n    creator {\n      id\n      allowNotes\n      ...PostBody_creator\n    }\n    ...ActiveSelectionContext_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return T=function(){return e},e}var R=Object(c.gql)(T(),p.c,b.b,w,g.a,g.b),L=Object(c.gql)(I(),g.c),A=Object(c.gql)(k(),p.b,b.a,g.d,g.e,j),M=d.forwardRef((function(e,t){var n=e.activeGrafId,r=e.activeNoteId,o=e.customStyleSheet,a=e.isAuroraPostPageEnabled,i=e.post,l=e.postBodyInserts,c=i.content,h=i.latestPublishedVersion;if(!c)throw new Error("Expected post to have content.");var v={bodyModel:c.bodyModel,creator:i.creator,customStyleSheet:o,isAuroraPostPageEnabled:a,postBodyInserts:l,ref:t,richTextStyle:"FULL_PAGE"},E=i&&i.creator&&i.creator.allowNotes||!1;return d.createElement(_.a,{name:"enable_lite_post_highlights_view_only",nonBlocking:!0},(function(e){return c.isLockedPreviewOnly||!e?d.createElement(g.f,v):d.createElement(u.Query,{notifyOnNetworkStatusChange:!0,ssr:!1,query:A,variables:{postId:i.id,showHighlights:Boolean(e),showNotes:E}},(function(e){var t=e.data,o=(t=void 0===t?{}:t).post,a=c.bodyModel&&c.bodyModel.paragraphs,l=O(o&&o.highlights||[],a),u=o&&o.privateNotes||null;return d.createElement(f.b,null,d.createElement(_.a,{name:"enable_lite_post_highlights",nonBlocking:!0},(function(e){var t=d.createElement(g.f,s()({},v,{highlights:l,privateNotes:u}));return e?d.createElement(m.a,{initialActivePrivateNoteId:r,initialActiveGrafName:n},d.createElement(p.d,{interactivePost:C({},i,{latestPublishedVersion:h}),highlights:l},d.createElement(S.b,{nonBlocking:!0},(function(e){return d.createElement(b.d,{highlights:l,paragraphs:a,viewer:e},t)})))):t})))}))}))}));t.c=M},"./src/components/post/body/PostBody.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return ce})),n.d(t,"d",(function(){return ue})),n.d(t,"b",(function(){return de})),n.d(t,"e",(function(){return me})),n.d(t,"c",(function(){return pe}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./src/WatchBounds.tsx"),m=n("./src/framework/style/index.ts"),p={display:"flex",justifyContent:"center",marginTop:"32px",marginBottom:"14px",paddingTop:"24px",paddingBottom:"10px"},f=function(e){return{backgroundColor:e.baseColor.text.darker,borderRadius:"50%",display:"inline-block",height:"3px",width:"3px"}},g={marginRight:"20px"};function b(){var e=Object(m.useCx)();return u.createElement("div",{className:e(p),role:"separator"},u.createElement("span",{className:e([f,g])}),u.createElement("span",{className:e([f,g])}),u.createElement("span",{className:e(f)}))}var h=n("./src/components/post/PostBodySection.tsx"),v=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),E=n.n(v),x=n("./node_modules/@babel/runtime/helpers/typeof.js"),y=n.n(x),O=n("./node_modules/pluralize/pluralize.js"),j=n.n(O),w=n("./src/components/user/UserAvatar.tsx"),_=n("./src/framework/design-system/components/index.ts"),S=n("./src/framework/design-system/type/Overline.tsx"),P=n("./src/framework/track/index.ts");function C(){var e=o()(["\n  fragment PostNotesDetails_user on User {\n    id\n    imageId\n    name\n    username\n    ...UserAvatar_user\n  }\n  ","\n"]);return C=function(){return e},e}function k(e){var t=e.grid.xStep;return{padding:"".concat(3*t,"px ").concat(4*t,"px ").concat(3*t,"px"),width:"400px"}}var I=u.memo((function(e){var t=e.close,n=e.users,r=Object(m.useCx)(),o=u.useRef(null),a=Object(m.useTheme)(),s=a.grid.xStep;return u.useEffect((function(){function e(){var e=o.current;if(e&&e.getBoundingClientRect){var n=e.getBoundingClientRect(),r=n.bottom,s=n.top<0||r>window.innerHeight,i=window.innerWidth<a.breakpoints.xl;(s||i)&&t()}}return P.a.on("scroll_end",e),P.a.on("resize_throttled",e),function(){P.a.off("scroll_end",e),P.a.off("resize_throttled",e)}}),[]),u.createElement("section",{ref:o,className:r(k)},u.createElement(_.a,{borderBottom:"BASE_LIGHTER",marginBottom:"-".concat(s,"px"),paddingBottom:"".concat(2*s,"px")},u.createElement(S.a,null,"Highlights (".concat(n.length,")"))),u.createElement(_.a,{marginLeft:"3px"},n.length&&n.map((function(e){return u.createElement(_.a,{display:"inline-block",key:e.id,marginTop:"".concat(5*s,"px"),marginRight:"".concat(5*s,"px"),width:"".concat(8*s,"px")},u.createElement(w.d,{hasPopover:!0,link:!0,user:e,scale:"XS"}))}))))})),T=Object(c.gql)(C(),w.b),R=n("./src/components/post/markups/HighlightSegmentsContext.tsx"),L=n("./src/components/post/notes/PostAnnotationsPopover.tsx"),A=n("./src/components/post/paragraph/IframeParagraph/iframePostMessageNormalizer.ts"),M=n("./src/components/session/WithViewer.tsx"),B=n("./src/framework/design-system/type/Detail.tsx"),D=n("./src/framework/design-system/util/style/converters.ts"),N=n("./src/util/typeGuards.ts");function H(){var e=o()(["\n  fragment PostNotesMarkers_creator on User {\n    id\n    name\n    isFollowing\n  }\n"]);return H=function(){return e},e}function U(){var e=o()(["\n  fragment PostNotesMarkers_highlight on Quote {\n    id\n    endOffset\n    paragraphs {\n      id\n      name\n    }\n    startOffset\n    userId\n    user {\n      id\n      name\n      ...PostNotesDetails_user\n    }\n  }\n  ","\n"]);return U=function(){return e},e}function F(){return{border:"none",cursor:"pointer",display:"block",padding:"0px",textAlign:"left",width:"100%"}}function V(){return{left:"100%",position:"absolute",top:0}}function z(e,t){return{marginTop:"6px",maxWidth:"100%",position:"absolute",top:"".concat(e-(t||0),"px"),whiteSpace:"nowrap",width:"100%"}}function q(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"".concat(Object(D.a)(e,8,!0),"px"),position:"relative"}}function G(){return{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}function W(e,t){return"number"==typeof e.startOffset&&"number"==typeof t.startOffset?e.startOffset<t.startOffset?-1:1:-1}function $(e,t){var n=t.startOffset,r=t.endOffset,o=t.paragraphs[0].name;if(!o||"number"!=typeof n||"number"!=typeof r)return e;var a=!1,s=e[o]||[];return s.length&&(s=s.map((function(e){var o=n<=e.endOffset+1,s=e.startOffset,i=e.endOffset;return o&&(a=!0,e.highlights.push(t),i=Math.max(r,e.endOffset),s=Math.min(n,e.startOffset)),{highlights:e.highlights,endOffset:i,startOffset:s}}))),a||s.push({highlights:[t],endOffset:r,startOffset:n}),e[o]=s,e}function K(e,t,n){var r=new Map;if(e.size&&t.length){var o=function(e){var t=l()(e).sort(W).reduce($,{});return Object.values(t).reduce((function(e,t){return t&&"object"===y()(t)&&t.length?(e.push.apply(e,l()(t)),e):e}),[])}(t),a=[];o.forEach((function(t){var o=t.highlights[0],s=o.paragraphs[0].name;if(o&&"number"==typeof o.startOffset&&s){var i=e.get("".concat(s,"_").concat(o.startOffset));if(i&&i.ref&&i.ref.current){var l,c=i.ref.current.getBoundingClientRect().top+window.pageYOffset;a.length&&(l=a.find((function(e){return c<e+n.newFonts.body.lineHeight.M&&c>e||c>e-n.newFonts.body.lineHeight.M&&c<e})));var u=l||c,d=r.get(u)||[];d.length||a.push(u);var m=d.concat(t.highlights);m.length&&r.set(u,m)}}}))}return r}function Y(e){var t=e.children,n=e.highlightString,r=e.toggle,o=Object(m.useCx)();return"Top highlight"===n?u.createElement(u.Fragment,null,t):u.createElement("button",{className:o(F),onClick:function(){return r()},onMouseDown:function(e){return e.preventDefault()}},t)}function Q(e){var t=e.creator,n=e.positionMap,r=e.yPosOffset,o=Object(m.useCx)();if("number"!=typeof r)return null;var a=Array.from(n.entries());return u.createElement(M.b,{nonBlocking:!0},(function(e){return u.createElement(u.Fragment,null,a.map((function(n,a){var s=E()(n,2),i=s[0],l=s[1],c=function(e,t,n){if(1===e.length){if("anon"===e[0].userId)return"Top highlight";if(!t)return null;if(n&&n.id===e[0].userId&&t.id!==n.id&&!n.isFollowing)return null;if(t&&t.id===e[0].userId)return"You highlighted";if(e[0].user&&e[0].user.name)return e[0].user.name}var r=[];if(e.forEach((function(e){if(e.user){var o=t&&t.id===e.userId,a=e.user.name,s=n&&n.id===e.userId&&(!t||t.id!==n.id&&!n.isFollowing);o?r.length&&"You"===r[0]||r.unshift("You"):s||!a||r.includes(a)||r.push(a)}})),!r.length)return"Top highlight";if(1===r.length)return"You"===r[0]?"You highlighted":r[0];if(2===r.length)return"".concat(r[0]," and ").concat(r[1]);var o=r.slice(0,2),a=r.length-o.length;return"".concat(o[0],", ").concat(o[1],", and ").concat(a," ").concat(j()("other",a))}(l,e,t);return c?u.createElement("div",{className:o(z(i,r)),key:a},u.createElement(_.A,null,(function(e){var t=e.isVisible,n=e.hide,r=e.toggle;return u.createElement(u.Fragment,null,u.createElement(Y,{toggle:r,highlightString:c},u.createElement(B.a,{scale:"S"},u.createElement("span",{className:o(G)},c))),t&&u.createElement(L.a,{boundariesElement:"window",isVisible:!0,hide:n,placement:"right",popoverRenderFn:function(){var e=new Set,t=l.map((function(t){var n=t.user;return n&&n.id&&!e.has(n.id)?(e.add(n.id),n):null})).filter(N.b);return u.createElement(I,{close:n,users:t})}},u.createElement(u.Fragment,null)))}))):null})))}))}var X=u.forwardRef((function(e,t){var n=e.creator,r=e.highlights,o=u.useContext(R.c).highlightSegments,a=u.useRef(null),s=u.useState(null),i=E()(s,2),l=i[0],c=i[1],d=Object(m.useCx)(),p=Object(m.useTheme)(),f=u.useState(null),g=E()(f,2),b=g[0],h=g[1],v=u.useState(null),x=E()(v,2),y=x[0],O=x[1];return u.useEffect((function(){var e=function(){var e=K(o,r,p);if(c(e),"function"!=typeof t&&(null==t?void 0:t.current)&&O(t.current.offsetTop),null==a?void 0:a.current){var n=a.current.getBoundingClientRect().left,s=window.innerWidth-n-8*p.grid.xStep;h(s)}};P.a.on("resize_throttled",e);var n=Object(A.a)((function(t){"iframe.resize"!==t.context&&"player.js"!==t.context||e()})).destructor;return e(),function(){P.a.off("resize_throttled",e),n()}}),[r,o]),u.createElement("div",{className:d(q)},u.createElement(_.a,{display:"block",xs:{display:"none"},sm:{display:"none"},md:{display:"none"},lg:{display:"none"}},u.createElement("aside",{className:d(V),ref:a,style:{width:b?"".concat(b,"px"):void 0}},l&&u.createElement(Q,{creator:n,highlights:r,positionMap:l,yPosOffset:y,width:b}))))})),J=u.memo(X),Z=Object(c.gql)(U(),T),ee=Object(c.gql)(H()),te=n("./src/components/post/body/ActivePrivateNoteContext.tsx");var ne=n("./src/util/richText.ts");function re(){var e=o()(["\n  fragment PostBody_customStyleSheet on CustomStyleSheet {\n    id\n    ...PostBodySection_customStyleSheet\n  }\n  ","\n"]);return re=function(){return e},e}function oe(){var e=o()(["\n  fragment PostBody_privateNote on Note {\n    ...normalizedBodyModel_privateNote\n    ...PostBodySection_privateNote\n  }\n  ","\n  ","\n"]);return oe=function(){return e},e}function ae(){var e=o()(["\n  fragment PostBody_creator on User {\n    ...PostNotesMarkers_creator\n  }\n  ","\n"]);return ae=function(){return e},e}function se(){var e=o()(["\n  fragment PostBody_highlight on Quote {\n    paragraphs {\n      id\n    }\n    ...normalizedBodyModel_highlight\n    ...PostBodySection_highlight\n    ...PostNotesMarkers_highlight\n  }\n  ","\n  ","\n  ","\n"]);return se=function(){return e},e}function ie(){var e=o()(["\n  fragment PostBody_bodyModel on RichText {\n    sections {\n      name\n      startIndex\n      textLayout\n      imageLayout\n      backgroundImage {\n        id\n        originalHeight\n        originalWidth\n      }\n      videoLayout\n      backgroundVideo {\n        videoId\n        originalHeight\n        originalWidth\n        previewImageId\n      }\n    }\n    paragraphs {\n      id\n      ...PostBodySection_paragraphs\n    }\n    ...normalizedBodyModel_richText\n  }\n  ","\n  ","\n"]);return ie=function(){return e},e}var le=u.forwardRef((function(e,t){var n,r,o=e.bodyModel,a=e.creator,i=e.customStyleSheet,c=e.highlights,p=e.isAuroraPostPageEnabled,f=e.privateNotes,g=e.postBodyInserts,v=e.richTextStyle,E=void 0===v?"FULL_PAGE":v,x=Object(m.useCx)(),y=null===(n=u.useContext(d.b).watchedBounds.get("byline"))||void 0===n||null===(r=n.ref)||void 0===r?void 0:r.current,O=y?y.offsetTop-48:100,j={position:"absolute",left:0,top:"calc(100vh + ".concat(O,"px)"),bottom:"calc(100vh + ".concat(100,"px)"),width:"10px",pointerEvents:"none"},w=Object(te.b)().privateNoteSelection,_=u.useMemo((function(){return c&&w?[].concat(l()(c),[w]):c}),[c,w]),S=g?function(e){var t;return Object.keys(e).some((function(n){return!!e[n].find((function(e){return"BYLINE"===e.insertType}))&&(t=n,!0)})),t}(g):void 0,P=u.useMemo((function(){return Object(ne.e)(o,{bylineParagraphName:S,highlights:_,isAuroraPostPageEnabled:p,isPostPage:!0,privateNotes:f,richTextStyle:E})}),[o,_,f,E]),C=g&&g.first;return u.createElement("div",{ref:t},u.createElement(u.Fragment,null,u.createElement(d.a,{name:"ghost-track",type:"ghost",className:x(j)}),"FULL_PAGE"===E&&c&&c.length>0&&u.createElement(J,{creator:a,highlights:l()(c),ref:t}),!!C&&C.map((function(e,t){return u.createElement("section",{className:x({marginBottom:"20px"}),key:"postBodyInsertFirst_".concat(t)},e.component)}))),P.map((function(e,t){if("HR"===e){var n,r,o=P[t-1],a=P[t+1],l="HR"!==o&&(null==o||null===(n=o.section)||void 0===n?void 0:n.backgroundImage),c="HR"!==a&&(null==a||null===(r=a.section)||void 0===r?void 0:r.backgroundImage);return l||c?null:u.createElement(b,{key:t})}return u.createElement(h.d,s()({key:e.section.name||t,customStyleSheet:i,postBodyInserts:g},e))})))})),ce=(t.f=le,Object(c.gql)(ie(),ne.h,h.d.fragments.paragraphs)),ue=Object(c.gql)(se(),ne.f,h.b,Z),de=Object(c.gql)(ae(),ee),me=Object(c.gql)(oe(),ne.g,h.c),pe=Object(c.gql)(re(),h.a)},"./src/components/post/bookmark/BookmarkButton.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return I}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n.n(l),u=n("./src/components/post/bookmark/mutations.tsx"),d=n("./src/components/session/WithViewer.tsx"),m=n("./src/components/susi/SusiClickable.tsx"),p=n("./src/framework/actions/ActionContext.tsx"),f=n("./src/framework/design-system/components/index.ts"),g=n("./src/framework/reporter/index.ts"),b=n("./src/framework/source/index.ts"),h=n("./src/framework/style/index.ts"),v=n("./src/schema-types/globalTypes.ts"),E=n("./src/svg/bookmark-25px.svg"),x=n("./src/svg/bookmark-filled-25px.svg");function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O=c.a.createElement("path",{d:"M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13c.2.18.52.17.71-.03a.5.5 0 0 0 .12-.29H19V6z"}),j=function(e){return c.a.createElement("svg",y({width:25,height:25,viewBox:"0 0 25 25"},e),O)},w=n("./src/util/routes.ts");function _(){var e=s()(["\n  fragment BookmarkButton_post on Post {\n    ...SusiClickable_post\n    ...WithSetReadingList_post\n  }\n  ","\n  ","\n"]);return _=function(){return e},e}var S=Object(i.gql)(_(),m.d,u.b),P=function(e){return{fill:e.baseColor.fill.light}};var C=function(e){return{fill:e.baseColor.border.light,cursor:"default"}},k=function(){var e=Object(h.useCx)();return l.createElement(j,{className:e(C)})};function I(e){var t=e.post,n=e.withTooltip,r=void 0===n||n,a=t.id,s=t.readingList,i=Object(h.useCx)(),c=Object(g.c)(),y=Object(b.d)(),O=Object(p.b)(),j=null==O?void 0:O.READING_LIST_UPDATED,_=l.useState(r),S=o()(_,2),C=S[0],I=S[1],T=l.useState(s||v.r.READING_LIST_NONE),R=o()(T,2),L=R[0],A=R[1];l.useEffect((function(){A(s||v.r.READING_LIST_NONE)}),[s]);var M=function(e){if(s){var n=(o=s,{READING_LIST_NONE:v.r.READING_LIST_QUEUE,READING_LIST_ARCHIVE:null,READING_LIST_QUEUE:v.r.READING_LIST_NONE}[o]);if(!n)return;A(n),c.event(function(e){return{READING_LIST_NONE:"post.addedBookmark",READING_LIST_ARCHIVE:"post.addedArchive",READING_LIST_QUEUE:"post.removedBookmark"}[e]}(s),{postId:a,source:y}),e(n)().catch((function(){A(s)})),r&&I(!1),j&&j(t,n)}var o},B=l.useCallback((function(){r&&I(!0)}),[r]);return l.createElement(d.b,null,(function(e){return e?s?l.createElement("div",{className:i(P)},l.createElement(u.a,{post:t,viewer:e},(function(e){return l.createElement(f.z,{isVisible:C,darkTheme:!0,placement:"top",mouseLeaveDelay:0,targetDistance:10,popoverRenderFn:function(){return l.createElement(f.a,{padding:"8px"},{READING_LIST_NONE:"Save story",READING_LIST_ARCHIVE:"Archived",READING_LIST_QUEUE:"Unsave Story"}[s])},onMouseLeave:B},l.createElement(f.m,{onClick:function(){return M(e)},ariaLabel:"Bookmark Post"},(t=L,{READING_LIST_NONE:l.createElement(E.a,null),READING_LIST_ARCHIVE:l.createElement(k,null),READING_LIST_QUEUE:l.createElement(x.a,null)}[t])));var t}))):null:l.createElement(f.z,{isVisible:C,darkTheme:!0,placement:"top",mouseLeaveDelay:0,targetDistance:10,popoverRenderFn:function(){return l.createElement(f.a,{padding:"8px"},"Bookmark story")}},l.createElement(m.a,{post:t,operation:"register",actionUrl:Object(w.q)(a)},l.createElement(E.a,{className:i(P)})))}))}},"./src/components/post/bookmark/PostPageBookmarkButton.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n("./src/components/post/bookmark/BookmarkButton.tsx"),i=n("./src/components/post/bookmark/PostPageBookmarkContext.tsx"),l=n("./src/components/post/bookmark/mutations.tsx"),c=n("./src/components/session/WithViewer.tsx"),u=n("./src/components/susi/SusiClickable.tsx"),d=n("./src/framework/design-system/components/index.ts"),m=n("./src/framework/reporter/index.ts"),p=n("./src/framework/source/index.ts"),f=n("./src/framework/style/index.ts"),g=n("./src/schema-types/globalTypes.ts"),b=n("./src/svg/bookmark-25px.svg"),h=n("./src/svg/bookmark-archive-25px.svg"),v=n("./src/svg/bookmark-remove-25px.svg"),E=n("./src/util/hooks/useIsEligibleToViewNewResponses.tsx"),x=n("./src/util/routes.ts");var y=function(e,t){return e&&{READING_LIST_QUEUE:"READING_LIST_ARCHIVE",READING_LIST_ARCHIVE:"READING_LIST_NONE"}[t]},O=function(e){return function(t){return{fill:e?t.baseColor.fill.lighter:t.baseColor.border.darker}}},j=function(e){var t=e.currentReadingListType,n=e.isEligibleToViewNewResponses,r=Object(f.useCx)(),o=O(n);return{READING_LIST_QUEUE:a.createElement(h.a,{className:r(o)}),READING_LIST_ARCHIVE:a.createElement(v.a,{className:r(o)})}[t]},w=function(e){var t=e.post,n=e.withTooltip,r=void 0===n||n,h=t.id,v=t.readingList,w=Object(f.useCx)(),_=Object(m.c)(),S=Object(p.d)(),P=a.useContext(i.a),C=P.isFirstLoadAndInReadingList,k=P.setIsFirstLoadAndInReadingList,I=a.useState(r),T=o()(I,2),R=T[0],L=T[1],A=Object(E.a)(),M=a.useCallback((function(e,t){if(v){if(_.event({READING_LIST_QUEUE:"post.addedArchive",READING_LIST_ARCHIVE:"post.removedBookmark"}[v],{postId:h,source:S}),t(y(e,v))(),y(e,v)===g.r.READING_LIST_NONE)return void k(!1);r&&L(!1)}}),[h,v,C,k,r,S]),B=a.useCallback((function(){r&&L(!0)}),[r]);return a.createElement(c.b,null,(function(e){return e?v&&a.createElement("div",null,!C||v!==g.r.READING_LIST_QUEUE&&v!==g.r.READING_LIST_ARCHIVE?a.createElement(s.b,{post:t}):a.createElement(l.a,{post:t},(function(t){return a.createElement(d.z,{isVisible:R,darkTheme:!0,placement:"top",mouseLeaveDelay:0,targetDistance:10,popoverRenderFn:function(){return a.createElement(d.a,{padding:"8px"},{READING_LIST_QUEUE:"Archive Story",READING_LIST_ARCHIVE:"Remove story from reading list"}[v])},onMouseLeave:B},a.createElement(d.m,{onClick:function(){return M(e,t)}},a.createElement(j,{currentReadingListType:v,isEligibleToViewNewResponses:A})))}))):a.createElement("div",{className:w(O(A))},a.createElement(u.a,{post:t,operation:"register",actionUrl:Object(x.q)(h)},a.createElement(b.a,null)))}))}},"./src/components/post/bookmark/PostPageBookmarkContext.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/react/index.js"),o=r.createContext({isFirstLoadAndInReadingList:!0,setIsFirstLoadAndInReadingList:function(){return null}})},"./src/components/post/bookmark/index.ts":function(e,t,n){"use strict";var r=n("./src/components/post/bookmark/BookmarkButton.tsx");n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.a}))},"./src/components/post/bookmark/mutations.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return y}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./src/schema-types/globalTypes.ts");function c(){var e=s()(["\n  fragment WithSetReadingList_post on Post {\n    ...ReadingList_post\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=s()(["\n  mutation UnarchivePostDefault($targetPostId: ID!) {\n    unarchivePost(targetPostId: $targetPostId) {\n      ...ReadingList_post\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=s()(["\n  mutation ArchivePostDefault($targetPostId: ID!) {\n    archivePost(targetPostId: $targetPostId) {\n      ...ReadingList_post\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function m(){var e=s()(["\n  mutation UnbookmarkPostDefault($targetPostId: ID!) {\n    unbookmarkPost(targetPostId: $targetPostId) {\n      ...ReadingList_post\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function p(){var e=s()(["\n  mutation BookmarkPostDefault($targetPostId: ID!) {\n    bookmarkPost(targetPostId: $targetPostId) {\n      ...ReadingList_post\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=s()(["\n  fragment ReadingList_post on Post {\n    __typename\n    id\n    readingList\n  }\n"]);return f=function(){return e},e}var g=Object(i.gql)(f()),b=Object(i.gql)(p(),g),h=Object(i.gql)(m(),g),v=Object(i.gql)(d(),g),E=Object(i.gql)(u(),g),x=Object(i.gql)(c(),g),y=function(e){var t=e.children,n=e.post,r=n.id,a=function(e){var t=Object(i.useMutation)(b,{variables:{targetPostId:e},optimisticResponse:{bookmarkPost:{__typename:"Post",id:e,readingList:l.r.READING_LIST_QUEUE}}});return o()(t,1)[0]}(r),s=function(e){var t=Object(i.useMutation)(h,{variables:{targetPostId:e},optimisticResponse:{unbookmarkPost:{__typename:"Post",id:e,readingList:l.r.READING_LIST_NONE}}});return o()(t,1)[0]}(r),c=function(e){var t=Object(i.useMutation)(v,{variables:{targetPostId:e},optimisticResponse:{archivePost:{__typename:"Post",id:e,readingList:l.r.READING_LIST_ARCHIVE}}});return o()(t,1)[0]}(r),u=function(e){var t=Object(i.useMutation)(E,{variables:{targetPostId:e},optimisticResponse:{unarchivePost:{__typename:"Post",id:e,readingList:l.r.READING_LIST_QUEUE}}});return o()(t,1)[0]}(r);if(!r)return null;return t((function(e){return function(){switch(n.readingList){case l.r.READING_LIST_NONE:if("READING_LIST_QUEUE"===e)return a();break;case l.r.READING_LIST_QUEUE:if("READING_LIST_NONE"===e)return s();if("READING_LIST_ARCHIVE"===e)return c();break;case l.r.READING_LIST_ARCHIVE:if(!e)return r;if("READING_LIST_NONE"===e)return s();if("READING_LIST_QUEUE"===e)return u()}throw new Error('Invalid reading list change from "'.concat(n.readingList||"unkown",'" to "').concat(e,'".'))}}))}},"./src/components/post/footer/CreatorActionOverflowPopover.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return Q}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/@apollo/client/react/components/index.js"),d=n("./src/store/actions/navigation.ts");function m(){var e=o()(["\n  mutation PostAllowResponsesMutation($targetPostId: ID!, $allowResponses: Boolean!) {\n    setPostAllowResponses(targetPostId: $targetPostId, allowResponses: $allowResponses) {\n      id\n      allowResponses\n    }\n  }\n"]);return m=function(){return e},e}var p=Object(i.gql)(m()),f=Object(c.c)()((function(e){var t=e.children,n=e.dispatch,r=e.onCompleted,o=e.targetPostId;return l.createElement(u.Mutation,{mutation:p,onCompleted:function(){n(Object(d.m)({message:"Responses are now hidden for this post."})),r&&r()},variables:{targetPostId:o,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:o,allowResponses:!1}}},(function(e){return t({mutate:e})}))})),g=Object(c.c)()((function(e){var t=e.children,n=e.dispatch,r=e.onCompleted,o=e.targetPostId;return l.createElement(u.Mutation,{mutation:p,onCompleted:function(){n(Object(d.m)({message:"Responses are now shown for this post."})),r&&r()},variables:{targetPostId:o,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:o,allowResponses:!0}}},(function(e){return t({mutate:e})}))})),b=n("./src/components/mutations/UserBlockMutation.tsx"),h=n("./src/components/mutations/UserReportStoryMutation.tsx"),v=n("./src/components/mutations/UserUnblockMutation.tsx"),E=n("./src/components/mute/MutePopoverOptions.tsx"),x=n("./src/framework/design-system/components/index.ts"),y=function(e){var t=e.onConfirm,n=e.isVisible,r=e.hide;return l.createElement(x.f,{onConfirm:t,isVisible:n,hide:r,titleText:"Hide responses",confirmText:"Confirm",isDestructiveAction:!1},"People will still be able to respond, but the link to see responses will not be displayed at the bottom of your post.")},O=n("./src/components/post/footer/actions/CollectionSubmission.tsx"),j=n("./src/components/collection/CollectionAvatar.tsx"),w=n("./src/components/post/footer/actions/PubStatusMutations.tsx"),_=n("./src/components/post/footer/actions/shared.ts"),S=n("./src/components/ui/PopoverMenu.tsx"),P=n("./src/framework/design-system/type/index.ts"),C=function(e){var t=e.viewer,n=e.show,r=e.post;return t&&"PENDING"===r.statusForCollection&&(Object(_.d)(r)||Object(_.e)(r,t))?l.createElement(S.b,null,l.createElement(x.m,{onClick:n},"Manage submission")):null},k=function(e){var t=e.children,n=e.isVisible,r=e.post,o=e.hide,a=e.showLoadingIndicator,s=Object(w.a)(r),i=Object(w.b)(r),u=Object(c.e)(),m=r.pendingCollection;return m?l.createElement(x.p,{isVisible:n,hide:o,popoverRenderFn:function(){return l.createElement(x.a,{padding:"16px",maxWidth:"280px"},l.createElement(x.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(x.a,{paddingRight:"8px"},l.createElement(j.a,{collection:m,size:40})),l.createElement(P.b,{scale:"S"},"This draft is submitted to ",m.name,".")),l.createElement(x.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(x.a,{paddingRight:"8px"},l.createElement(x.b,{buttonStyle:"OBVIOUS",onClick:function(){o(),a(),s(r.pendingCollection).then((function(){window.location.reload(!1)}))}},"Accept")),l.createElement(x.b,{buttonStyle:"SUBTLE",onClick:function(){i(r.pendingCollection).then((function(){u(Object(d.m)({message:"Story removed from ".concat(m.name||"publication")}))})),o()}},"Don't accept")))}},t):t},I=function(e){var t=e.viewer,n=e.show,r=e.post;return t&&("APPROVED"===r.statusForCollection&&(Object(_.d)(r)||Object(_.e)(r,t)||Object(_.c)(r,t))||"PENDING"===r.statusForCollection&&Object(_.c)(r,t))?l.createElement(S.b,null,l.createElement(x.m,{onClick:n},"Remove story from publication")):null},T=function(e){var t=e.children,n=e.isVisible,r=e.hide,o=e.post,a=e.viewer,s=Object(c.e)(),i=Object(w.b)(o),u=o.collection||o.pendingCollection;return u?l.createElement(x.p,{isVisible:n,hide:r,popoverRenderFn:function(){return l.createElement(x.a,{padding:"16px",maxWidth:"280px"},l.createElement(x.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(x.a,{paddingRight:"8px"},l.createElement(j.a,{collection:u,size:40})),"APPROVED"===o.statusForCollection?l.createElement(P.b,{scale:"S"},Object(_.c)(o,a)?"Your":"This"," story is published in"," ",u.name,"."):"PENDING"===o.statusForCollection?l.createElement(P.b,{scale:"S"},"Your story is being reviewed by ",u.name," editors."):l.createElement(P.b,{scale:"S"},"This draft is submitted to ",u.name)),l.createElement(x.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(x.a,{paddingRight:"8px"},l.createElement(x.b,{buttonStyle:"SUBTLE",onClick:function(){i(u).then((function(){s(Object(d.m)({message:"Story removed from ".concat(u.name||"publication")}))}),(function(){s(Object(d.m)({message:"There was a problem removing the story from ".concat(u.name||"publication"),toastStyle:"ERROR"}))})),r()}},"PENDING"===o.statusForCollection?"Cancel submission":"Remove from ".concat(u.name||"")))))}},t):t},R=n("./src/components/post/multivote/ClapMutation.tsx"),L=n("./src/components/publisher/auroraHooks.ts"),A=n("./src/components/publisher/publisherHelpers.tsx"),M=n("./src/components/session/useFlag.tsx"),B=n("./src/components/session/useViewer.tsx"),D=n("./src/components/susi/SusiClickable.tsx"),N=n("./src/components/user/UserBlockConfirmDialog.tsx"),H=n("./src/components/user/UserReportStoryDialog.tsx"),U=n("./src/framework/source/index.ts"),F=n("./src/store/actions/multiVote.ts"),V=n("./src/svg/overflow-dots-filled-25px.svg"),z=n("./src/util/hooks/useUserAgentMobileOrTablet.tsx"),q=n("./src/util/post/claps.ts"),G=n("./src/util/routes.ts");function W(){var e=o()(["\n  fragment CreatorActionOverflowPopover_post on Post {\n    allowResponses\n    id\n    statusForCollection\n    isLocked\n    isPublished\n    clapCount\n    viewerClapCount\n    mediumUrl\n    pinnedAt\n    pinnedByCreatorAt\n    ...useIsPinnedInContext_post\n    pendingCollection {\n      id\n      name\n      viewerIsEditor\n      creator {\n        id\n      }\n      avatar {\n        id\n      }\n      domain\n      slug\n    }\n    creator {\n      id\n      isBlocking\n      ...MutePopoverOptions_creator\n      ...auroraHooks_publisher\n    }\n    collection {\n      id\n      viewerIsEditor\n      name\n      creator {\n        id\n      }\n      avatar {\n        id\n      }\n      domain\n      slug\n      ...MutePopoverOptions_collection\n      ...auroraHooks_publisher\n    }\n    ...ClapMutation_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return W=function(){return e},e}var $=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}};function K(){return l.createElement(x.B,null,(function(e){return l.createElement(V.a,{className:e($)})}))}var Y=function(e){var t,n,r=e.creator,o=e.post,a=e.collection,i=e.showLoadingIndicator,u=l.useState(!1),m=s()(u,2),p=m[0],j=m[1],w=l.useState(!1),_=s()(w,2),P=_[0],V=_[1],W=l.useState(!1),$=s()(W,2),Y=$[0],Q=$[1],X=Object(c.f)((function(e){return e.multiVote.clapsPerPost})),J=Object(c.e)(),Z=l.useCallback((function(e){return J(Object(F.d)(e))}),[J]),ee=Object(q.a)(X,o),te=ee.clapCount,ne=ee.viewerClapCount,re=Object(d.u)(),oe=Object(B.b)().value,ae=null==oe?void 0:oe.id,se=Object(R.b)(),ie=Object(A.d)(o),le=s()(ie,2),ce=le[0],ue=le[1],de=Object(L.e)(o.collection),me=Object(L.e)(o.creator),pe=l.useCallback((function(e){var t;re({extraParams:{collectionName:(null===(t=o.collection)||void 0===t?void 0:t.name)||"",becamePinned:!!e.data.setPinnedAt.pinnedAt},message:"",toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(t=o.collection)||void 0===t?void 0:t.name]),fe=l.useCallback((function(e){re({message:e.data.postSetPinnedByCreatorAt.pinnedByCreatorAt?"This story has been pinned to your profile's homepage":"This story has been unpinned from your profile's homepage"})}),[]),ge=l.useCallback((function(){ue().then(pe)}),[ue,pe,null==o||null===(n=o.collection)||void 0===n?void 0:n.name]),be=Object(A.e)(o),he=s()(be,2),ve=he[0],Ee=he[1],xe=l.useCallback((function(){Ee().then(fe)}),[Ee,fe]),ye=!Object(z.a)(),Oe=Object(c.f)((function(e){return e.config.authDomain})),je=Object(M.a)("can_edit_members_only_posts");if(!r||!oe)return null;var we=o.allowResponses,_e=o.id,Se=o.pendingCollection,Pe=(a||{}).viewerIsEditor||(Se||{}).viewerIsEditor,Ce=ae===r.id||Pe,ke=je&&o&&o.isLocked,Ie=Ce||ke;return l.createElement(x.A,null,(function(e){var t=e.isVisible,n=e.toggle,s=e.hide;return l.createElement(x.A,null,(function(e){var c=e.isVisible,u=e.show,d=e.hide;return l.createElement(x.A,null,(function(e){var m=e.isVisible,w=e.show,_=e.hide;return l.createElement(x.A,null,(function(e){var R=e.isVisible,L=e.show,A=e.hide;return l.createElement(b.a,{targetUserId:null==r?void 0:r.id,viewerId:oe.id,onCompleted:d},(function(e){var b=e.mutate;return l.createElement(v.a,{targetUserId:null==r?void 0:r.id,viewerId:oe.id},(function(e){var v=e.mutate;return l.createElement(h.a,{targetAuthorId:null==r?void 0:r.id,targetPostId:o.id,isBlocking:null==r?void 0:r.isBlocking},(function(e){var h=e.mutate;return l.createElement(g,{targetPostId:_e},(function(e){var g=e.mutate;return l.createElement(f,{targetPostId:_e},(function(e){var f=e.mutate;return l.createElement(l.Fragment,null,l.createElement(x.p,{isVisible:t,hide:s,popoverRenderFn:function(){var e;return l.createElement(S.a,null,l.createElement(l.Fragment,null,a&&Pe&&de&&l.createElement(S.b,null,l.createElement(x.m,{onClick:ge},ce?"Unpin this story from ":"Pin this story to ",a.name)),(null===(e=o.creator)||void 0===e?void 0:e.id)===oe.id&&me&&l.createElement(S.b,null,l.createElement(x.m,{onClick:xe},ve?"Unpin this story from your profile":"Pin this story to your profile")),ye&&Ie?l.createElement(l.Fragment,null,l.createElement(S.b,null,l.createElement(x.m,{linkStyle:"SUBTLE",href:Object(G.Db)(Oe,o.id)},"Edit story")),l.createElement(S.c,null)):null,Ce&&l.createElement(S.b,null,l.createElement(x.m,{href:Object(G.Hb)(Oe,o.id)},"Story settings")),Ce&&l.createElement(S.b,null,l.createElement(x.m,{href:Object(G.Oc)(Oe,o.id)},"View stats")),l.createElement(E.a,{hidePopover:s,creator:r,collection:a,postId:o.id}),l.createElement(O.b,{post:o,show:function(){V(!0),s()}}),l.createElement(I,{viewer:oe,post:o,show:function(){Q(!0),s()}}),l.createElement(C,{viewer:oe,post:o,show:function(){j(!0),s()}})),ae===r.id||Pe?l.createElement(l.Fragment,null,l.createElement(S.b,null,l.createElement(x.m,{onClick:function(){we?L():g(),s()}},we?"Hide responses":"Show responses")),l.createElement(S.c,null)):null,ae&&te&&ne&&ne>0?l.createElement(S.b,null,l.createElement(x.m,{onClick:function(){se(o,(null==oe?void 0:oe.id)||"",-ne),Z({postId:_e,clapCount:te-ne,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),s()}},"Undo applause for this post")):null,l.createElement(S.b,null,ae?l.createElement(x.m,{onClick:function(){w(),s()}},"Report this story"):l.createElement(U.b,{source:{susiEntry:"report_footer"}},l.createElement(D.a,{operation:"register",post:o},"Report this story"))),ae?l.createElement(S.b,null,l.createElement(x.m,{onClick:function(){r.isBlocking?v():u(),s()}},r.isBlocking?"Unblock this author":"Block this author")):null)}},l.createElement(O.a,{post:o,isVisible:P,hide:function(){V(!1)},showLoadingIndicator:i},l.createElement(T,{viewer:oe,post:o,isVisible:Y,hide:function(){Q(!1)}},l.createElement(k,{post:o,isVisible:p,hide:function(){j(!1)},showLoadingIndicator:i},l.createElement(x.a,{flexGrow:"0"},l.createElement(x.m,{onClick:n,ariaLabel:"More options"},l.createElement(K,null))))))),l.createElement(y,{onConfirm:f,isVisible:R,hide:A}),l.createElement(N.a,{onConfirm:b,isVisible:c,hide:d}),l.createElement(H.a,{onSubmit:h,isVisible:m,hide:_}))}))}))}))}))}))}))}))}))}))},Q=Object(i.gql)(W(),E.c,E.b,R.a,A.c,L.a)},"./src/components/post/footer/PostFooter.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return Gt})),n.d(t,"b",(function(){return Wt}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/WatchBounds.tsx"),c=n("./src/components/newsletter-v3/NewsletterV3Promo.tsx"),u=n("./src/components/post/EmbeddedPost.tsx"),d=n("./src/components/post/PostRecircItemV2.tsx"),m=n("./src/framework/design-system/components/index.ts"),p=n("./src/framework/design-system/type/Heading.tsx"),f=n("./src/framework/source/index.ts"),g=function(e){var t=e.posts,n=e.sourceName;return t.length?s.createElement(m.a,{marginTop:"24px",marginBottom:"40px"},s.createElement(m.a,{borderBottom:"BASE_LIGHTER",marginTop:"24px",marginBottom:"24px",paddingBottom:"16px",sm:{marginTop:"16px",paddingBottom:"12px"}},s.createElement(p.a,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},"More From Medium")),s.createElement(m.h,{alignItems:"flex-start"},t.map((function(e,t){return s.createElement(m.i,{key:"post-internal-link-".concat(t),size:{xs:12,sm:12,md:6,lg:3,xl:3}},s.createElement(m.a,{paddingBottom:"24px",maxWidth:"500px"},s.createElement(f.b,{source:{name:n,index:t}},s.createElement(d.b,{post:e}))))})))):null};function b(){var e=o()(["\n  fragment PostInternalLinks_post on Post {\n    id\n    internalLinks(paging: {limit: 8}) @include(if: $includePostInternalLinks) {\n      items {\n        ... on Post {\n          ...PostRecircItemV2_post\n        }\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}var h=Object(a.gql)(b(),d.a),v=function(e){var t,n=e.post,r=e.sourceName,o=(null==n||null===(t=n.internalLinks)||void 0===t?void 0:t.items)||[];return o&&0!==o.length?s.createElement(g,{posts:o,sourceName:r}):null},E=n("./src/components/broadcast-banner/useCdcMessaging.tsx"),x=n("./src/framework/style/index.ts"),y=s.createContext(!1),O=function(e){var t=Object(x.useCx)();return s.createElement("div",{className:t({padding:{xs:"16px 22px",sm:"16px 22px",md:"18px 24px",lg:"24px 30px",xl:"32px 40px"},marginBottom:"25px",backgroundColor:"#f4f4f4",borderLeft:"4px solid rgba(2, 184, 117, 1)"})},e.children)},j=n("./src/handlers/EmbeddedPostHandler.tsx"),w=(Object(i.c)((function(e){return{embeddedPostIds:e.config.embeddedPostIds}}))((function(e){var t=e.embeddedPostIds,n=null==t?void 0:t.coronavirus;return n?s.createElement(j.a,{postId:n},(function(e){return e?s.createElement(y.Provider,{value:!0},s.createElement(O,null,e)):null})):null})),n("./node_modules/@babel/runtime/helpers/extends.js")),_=n.n(w),S=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),P=n.n(S),C=n("./src/components/collection/package/TruncatedPostCard.tsx"),k=n("./src/components/post-listing/PostListingItemRecirc.tsx"),I=n("./src/framework/reporter/index.ts");function T(e){var t=e.posts,n=e.sourceName,r=s.useRef(null),o=Object(I.c)();return s.useEffect((function(){o.event("experiment.eligible",{experimentId:"57b820b82d68"})}),[]),0===t.length?null:s.createElement(m.a,{margin:"32px 0",md:{marginBottom:"0px"},ref:r},s.createElement(m.a,{marginBottom:"32px",borderBottom:"BASE_LIGHTER",paddingBottom:"8px"},s.createElement(p.a,{scale:"S"},"More From Medium")),s.createElement(m.h,{alignItems:"flex-start"},t.map((function(e,t){return s.createElement(m.i,{key:"recirc-".concat(t),size:{xs:12,sm:12,md:12,lg:4,xl:4}},s.createElement(f.b,{source:{name:n,index:t}},s.createElement(k.b,{post:e,ref:r})))}))))}function R(e,t){var n=Object(a.useLazyQuery)(e,t),r=P()(n,2),o=r[0],i=r[1];return[s.useCallback((function(e){!i.called&&e.isIntersecting&&o()}),[i]),i]}var L=n("./src/components/publisher/CardByline.tsx"),A=n("./src/framework/track/index.ts");function M(){var e=o()(["\n  fragment PostNextFiveStories_post on Post {\n    firstPublishedAt\n    pinnedAt\n  }\n"]);return M=function(){return e},e}function B(){var e=o()(["\n  query PostNextFiveStoriesUser($id: ID!, $from: String, $limit: PaginationLimit = 5) {\n    publisher: user(id: $id) {\n      ...PostNextFiveStories_Publisher\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function D(){var e=o()(["\n  query PostNextFiveStoriesCollection($id: ID!, $from: String, $limit: PaginationLimit = 5) {\n    publisher: collection(id: $id) {\n      ...PostNextFiveStories_Publisher\n    }\n  }\n  ","\n"]);return D=function(){return e},e}function N(){var e=o()(["\n  fragment PostNextFiveStories_Publisher on Publisher {\n    __typename\n    id\n    homepagePostsConnection(paging: {limit: $limit, from: $from}) {\n      posts {\n        ...TruncatedPostCard_post\n      }\n    }\n    ...CardByline_publisher\n  }\n  ","\n  ","\n"]);return N=function(){return e},e}var H=Object(a.gql)(N(),C.b,L.d),U=Object(a.gql)(D(),H),F=Object(a.gql)(B(),H),V=s.forwardRef((function(e,t){var n,r,o,a=e.post,i=e.rootMargin,l=(null===(n=a.collection)||void 0===n?void 0:n.id)||"",c=null===(r=a.creator)||void 0===r?void 0:r.id,u=l||c;if(!u)return null;var d=function(e){var t=e.firstPublishedAt,n=e.pinnedAt;return e.collection?n?"P".concat(n):"L".concat(t):"".concat(t)}(a),m=R(l?U:F,{variables:{id:u,from:d}}),p=P()(m,2),f=p[0],g=p[1],b=g.called,h=g.loading,v=g.error,E=g.data,x=(E=void 0===E?{publisher:void 0}:E).publisher;if(Object(A.f)({onIntersect:f,target:t,disconnect:function(){return b},rootMargin:i},[b]),!b||h||v||!x)return null;var y=null==x||null===(o=x.homepagePostsConnection)||void 0===o?void 0:o.posts;if(!x||!y)return null;var O="Collection"===x.__typename;return s.createElement(s.Fragment,null,y.map((function(e,t){var n={publisher:x,post:e,hideAuthor:!O,isFirst:0===t,includeBottomDivider:t===y.length-1,index:t};return s.createElement(C.a,_()({key:e.id},n))})))})),z=s.forwardRef((function(e,t){var n=e.post,r=e.rootMargin,o=s.useState(!1),a=P()(o,2),i=a[0],l=a[1];return i||A.a.on("load",(function(){return l(!0)})),i?s.createElement(V,{post:n,ref:t,rootMargin:r}):null})),q=Object(a.gql)(M());function G(){var e=o()(["\n  query PostRecircQuery(\n    $postId: ID!\n    $includePostRecirc: Boolean!\n    $postRecircPaging: PaginationLimit!\n  ) {\n    post(id: $postId) {\n      id\n      ...PostRecirc_post\n    }\n  }\n  ","\n"]);return G=function(){return e},e}function W(){var e=o()(["\n  fragment PostRecirc_post on Post {\n    recirc(paging: {limit: $postRecircPaging}) @include(if: $includePostRecirc) {\n      items {\n        __typename\n        ... on Post {\n          ...Recirc_post\n        }\n        ... on SuggestedPost {\n          post {\n            __typename\n            ...Recirc_post\n          }\n          postSuggestionReasons {\n            reason\n            users {\n              name\n            }\n            topics {\n              name\n            }\n            collections {\n              name\n            }\n            tags {\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return W=function(){return e},e}function $(){var e=o()(["\n  fragment Recirc_post on Post {\n    ...PostListingItemRecirc_post\n  }\n  ","\n"]);return $=function(){return e},e}var K=Object(a.gql)($(),k.a),Y=Object(a.gql)(W(),K),Q=Object(a.gql)(G(),Y),X=s.forwardRef((function(e,t){var n,r,o,a=e.postId,i=e.rootMargin,l=e.recircOptions,c=(null==l||null===(n=l.v1)||void 0===n?void 0:n.limit)||3,u=R(Q,{variables:{postId:a,includePostRecirc:!0,postRecircPaging:c},ssr:!1}),d=P()(u,2),m=d[0],p=d[1],f=p.called,g=p.loading,b=p.error,h=p.data;Object(A.f)({onIntersect:m,target:t,disconnect:function(){return f},rootMargin:i},[f]);var v=null==h||null===(r=h.post)||void 0===r||null===(o=r.recirc)||void 0===o?void 0:o.items;return!f||g||b||!v?null:s.createElement(T,{posts:v,sourceName:"post_recirc"})})),J=s.forwardRef((function(e,t){return s.createElement(X,_()({},e,{ref:t}))})),Z=Object(i.c)((function(e){return{recircOptions:e.config.recircOptions}}),null,null,{forwardRef:!0})(J),ee=n("./src/framework/design-system/type/useTypeRules.ts"),te=n("./src/util/routes.ts");function ne(){var e=o()(["\n  fragment TagList_collection on Collection {\n    id\n    slug\n    domain\n  }\n"]);return ne=function(){return e},e}function re(){var e=o()(["\n  fragment TagList_tags on Tag {\n    id\n    displayTitle\n  }\n"]);return re=function(){return e},e}var oe={padding:0,margin:0},ae={display:"inline-block",listStyleType:"none",marginRight:"8px",marginBottom:"8px"},se=function(e){return{borderRadius:"3px",padding:"5px 10px",textDecoration:"none",color:e.baseColor.text.lighter,display:"block",background:e.baseColor.background.normal,lineHeight:"22px"}};function ie(e){var t=e.tags,n=e.collection,r=Object(x.useCx)(),o=Object(i.f)((function(e){return{authDomain:e.config.authDomain,entityType:e.client.routingEntity.type}})),a=o.authDomain,l=o.entityType,c=Object(ee.a)({name:"detail",scale:"S",color:"LIGHTER"});return t?s.createElement("ul",{className:r(oe)},t.map((function(e){if(!e.id)return null;var t=n&&!n.domain?Object(te.J)(n,e.id,a):Object(te.fc)(e.id,a,l);return s.createElement("li",{key:e.id,className:r(ae)},s.createElement("a",{href:t,className:r([c,se])},e.displayTitle))}))):null}var le=Object(a.gql)(re()),ce=Object(a.gql)(ne()),ue=n("./src/components/post/bookmark/index.ts"),de=n("./src/components/post/bookmark/PostPageBookmarkButton.tsx"),me=n("./src/components/post/footer/CreatorActionOverflowPopover.tsx"),pe=n("./src/components/post/footer/PostFooterSocialPopover.tsx"),fe=n("./src/components/post/footer/actions/CollectionSubmission.tsx"),ge=n("./src/components/post/footer/actions/shared.ts"),be=n("./src/components/post/multivote/MultiVote.tsx"),he=n("./src/components/responses/MobileHideSpan.tsx"),ve=n("./src/components/responses/ResponsesIconButton.tsx"),Ee=n("./src/components/session/WithFlag.tsx"),xe=n("./src/components/social/ShareButtons.tsx"),ye=n("./src/components/susi/SusiClickable.tsx"),Oe=n("./src/framework/source/SourceContext.tsx"),je=n("./src/util/hooks/useIsEligibleToViewNewResponses.tsx");function we(){var e=o()(["\n  fragment PostFooterActionsBar_post on Post {\n    id\n    visibility\n    isPublished\n    allowResponses\n    viewerClapCount\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    creator {\n      id\n      isBlocking\n    }\n    collection {\n      id\n      viewerIsEditor\n    }\n    ...BookmarkButton_post\n    ...MultiVote_post\n    ...SusiClickable_post\n    ...ManageSubmission_post\n    ...CollectionSubmission_post\n    ...ShareButtons_post\n    ...ResponsesIconButton_post\n    ...CreatorActionOverflowPopover_post\n    ...PostFooterSocialPopover_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return we=function(){return e},e}var _e=function(e){var t,n=e.post,r=e.setIsResponsesSidebarVisible,o=e.useSocialPopover,a=e.shouldHideResponsesText,i=void 0!==a&&a,l=e.shouldHideClapsText,c=void 0!==l&&l,u=n.isPublished,d=n.content,p=n.creator,f=n.collection,g=(d||{}).isLockedPreviewOnly,b=Object(je.a)(),h=s.createElement(Oe.b,{source:{name:"post_actions_footer",susiEntry:"clap_footer"}},s.createElement(m.a,{display:"flex",flexDirection:"row"},s.createElement(m.a,{maxWidth:"155px"},b?s.createElement(s.Fragment,null,s.createElement(he.b,null,s.createElement(be.a,{post:n,buttonStyle:"SUBTLE",hasDialog:!0,shouldShowResponsiveLabelText:!0,shouldHideClapsText:c})),s.createElement(he.a,null,s.createElement(be.a,{post:n,buttonStyle:"SUBTLE_FOR_DESKTOP",hasDialog:!0,shouldHideClapsText:c}))):s.createElement(be.a,{post:n,buttonStyle:"OBVIOUS",hasDialog:!0,shouldHideClapsText:c})),s.createElement(m.a,{xs:{width:"15px"},sm:{width:"15px"},md:{width:"15px"},lg:{width:"25px"},xl:{width:"25px"}}),s.createElement(Oe.b,{source:{name:"follow_footer",susiEntry:"follow_footer"}},s.createElement(ve.a,{responsesCount:null===(t=n.postResponses)||void 0===t?void 0:t.count,location:"footer",setIsResponsesSidebarVisible:r,allowResponses:n.allowResponses,postId:n.id,isLimitedState:n.isLimitedState,shouldHideResponsesText:i})))),v=s.createElement(Ee.a,{name:"enable_disregard_trunc_state_for_footer"},(function(e){return(e||!g)&&h})),E={post:n,source:{name:"post_actions_footer"}};return s.createElement(m.A,null,(function(e){var t=e.isVisible,r=e.show;return s.createElement(s.Fragment,null,t&&s.createElement(m.n,null),s.createElement(m.a,{display:"flex",justifyContent:"space-between",marginTop:b?"25px":"15px",print:{display:"none"}},v,s.createElement(m.a,{display:"flex",alignItems:"center"},u&&s.createElement(s.Fragment,null,o?s.createElement(m.a,{paddingRight:"6px"},s.createElement(pe.a,E)):s.createElement(xe.a,E),s.createElement(m.a,{flexGrow:"0",paddingRight:"8px"},s.createElement(Oe.b,{source:{name:"post_actions_footer",susiEntry:"bookmark_footer"}},s.createElement(de.a,{post:n})))),n&&p&&s.createElement(me.a,{creator:p,post:n,collection:f,showLoadingIndicator:r}))))}))},Se=Object(a.gql)(we(),ue.b,be.b,ye.d,ge.b,fe.c,xe.b,ve.b,me.b,pe.b),Pe=n("./src/components/collection/CollectionAvatar.tsx"),Ce=n("./src/components/collection/CollectionFollowButton.tsx"),ke=n("./src/components/session/WithViewer.tsx"),Ie=n("./src/components/session/useFlag.tsx"),Te=n("./src/components/user/UserAvatar.tsx"),Re=n("./src/components/user/UserFollowButton.tsx"),Le=n("./src/components/user/UserUnblockButton.tsx"),Ae=n("./src/framework/design-system/type/index.ts");function Me(){var e=o()(["\n  fragment PostFooterByline_post on Post {\n    id\n    creator {\n      name\n      username\n      bio\n      id\n      isBlocking\n      ...UserAvatar_user\n      ...UserFollowButton_user\n    }\n    collection {\n      name\n      description\n      ...CollectionAvatar_collection\n      ...CollectionFollowButton_collection\n      ...collectionUrl_collection\n    }\n    ...CollectionFollowButton_post\n    ...UserFollowButton_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Me=function(){return e},e}var Be=Te.c.XL,De=Te.c.XL+22,Ne=function(e){var t=e.creator,n=e.post,r=Object(i.f)((function(e){return e.config.authDomain})),o=t.name,a=t.username,l=t.bio,c=void 0===l?"":l,u=t.id,d=t.isBlocking,p=t.hasDomain;return o&&a?s.createElement(ke.b,null,(function(e){return s.createElement(m.a,{marginBottom:"32px",position:"relative",minHeight:"".concat(Be,"px")},s.createElement(m.a,{tag:"span",sm:{display:"flex",alignItems:"center",marginBottom:"24px"}},s.createElement(m.a,{position:"absolute",sm:{position:"relative",width:"".concat(De,"px")}},s.createElement(Te.d,{user:t,scale:"XL",link:!0})),s.createElement(m.a,{tag:"span"},s.createElement(m.a,{paddingLeft:"".concat(De,"px"),sm:{paddingLeft:"0"}},s.createElement(Ae.e,null,"Written by")),s.createElement(m.a,{paddingLeft:"".concat(De,"px"),display:"flex",marginBottom:"6px",sm:{paddingLeft:"0"}},s.createElement(m.a,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},s.createElement(Ae.c,{scale:"M"},s.createElement(m.m,{href:Object(te.Ac)(a,r,p)},o||a)),s.createElement(m.a,{sm:{display:"none"}},e&&d?s.createElement(Le.a,{targetUserId:u}):s.createElement(Re.a,{buttonSize:"SMALL",post:n,user:t})))))),s.createElement(m.a,{maxWidth:"555px",paddingLeft:"".concat(De,"px"),sm:{display:"block",paddingLeft:"0"}},s.createElement(m.a,{maxWidth:"450px"},s.createElement(Ae.b,{scale:"L"},c)),s.createElement(m.a,{display:"none",sm:{display:"block",marginTop:"24px"}},s.createElement(Re.a,{buttonSize:"SMALL",post:n,user:t}))))})):null},He=function(e){var t=e.collection,n=e.currentLocation,r=e.post,o=t.name,a=t.description,i=void 0===a?"":a;return s.createElement(m.a,{marginBottom:"32px",position:"relative",minHeight:"".concat(Be,"px")},s.createElement(m.a,{tag:"span",sm:{display:"flex",alignItems:"center",marginBottom:"24px"}},s.createElement(m.a,{position:"absolute",sm:{position:"relative",width:"".concat(De,"px")}},s.createElement(Pe.a,{collection:t,size:Be,link:!0})),s.createElement(m.a,{tag:"span"},s.createElement(m.a,{paddingLeft:"".concat(De,"px"),display:"flex",marginBottom:"6px",sm:{paddingLeft:"0"}},s.createElement(m.a,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},s.createElement(Ae.c,{scale:"M"},s.createElement(m.m,{href:Object(te.K)(t,n)},o)),s.createElement(m.a,{sm:{display:"none"}},s.createElement(Ce.a,{collection:t,post:r})))))),s.createElement(m.a,{maxWidth:"550px",paddingLeft:"".concat(De,"px"),sm:{display:"block",paddingLeft:"0"}},s.createElement(m.a,{maxWidth:"450px"},s.createElement(Ae.b,{scale:"L"},i)),s.createElement(m.a,{display:"none",sm:{display:"block",marginTop:"24px"}},s.createElement(Ce.a,{collection:t,post:r}))))},Ue=function(e){var t=e.collection,n=e.creator,r=e.post,o=e.currentLocation,a=Object(i.f)((function(e){return e.config.authDomain}));return s.createElement(m.a,{paddingTop:"24px"},n.name&&n.username&&s.createElement(m.a,{display:"flex",flexDirection:"row"},s.createElement(m.a,{marginTop:"5px"},s.createElement(Te.d,{user:n,scale:"S",link:!0})),s.createElement(m.a,{marginLeft:"12px"},s.createElement(Ae.e,{scale:"S"},"Written by"),s.createElement(m.a,{display:"flex",flexDirection:"row"},s.createElement(Ae.c,{scale:"XS"},s.createElement(m.m,{href:Object(te.Ac)(n.username,a,n.hasDomain)},n.name||n.username)),s.createElement(m.a,{marginLeft:"12px"},s.createElement(Re.a,{buttonSize:"COMPACT",post:r,user:n}))),s.createElement(m.a,{paddingTop:"8px"},s.createElement(Ae.b,{scale:"M"},n.bio)))),t&&s.createElement(m.a,{paddingTop:"24px"},s.createElement(m.a,{display:"flex",flexDirection:"row"},s.createElement(Pe.a,{collection:t,size:40,link:!0}),s.createElement(m.a,{marginLeft:"12px"},s.createElement(m.a,{display:"flex",flexDirection:"row"},s.createElement(Ae.c,{scale:"XS"},s.createElement(m.m,{href:Object(te.K)(t,o)},t.name)),s.createElement(m.a,{marginLeft:"12px"},s.createElement(Ce.a,{collection:t,post:r,buttonSize:"COMPACT"}))),s.createElement(m.a,{paddingTop:"8px"},s.createElement(Ae.b,{scale:"M"},t.description||""))))))};var Fe=Object(a.gql)(Me(),Pe.b,Ce.b,Ce.c,te.L,Te.b,Re.b,Re.c),Ve=Object(i.c)((function(e){return{currentLocation:e.navigation.currentLocation}}))((function(e){var t=e.currentLocation,n=e.post,r=n.creator,o=n.collection,a=!!Object(Ie.a)("enable_end_of_post_cleanup");return r?s.createElement(m.a,{marginTop:"25px",marginBottom:"25px",paddingTop:"32px",borderTop:"BASE_LIGHTER",print:{display:"none"},sm:{paddingTop:a?"0":"32px"}},s.createElement(m.a,{sm:{display:a?"none":"block"}},s.createElement(Ne,{creator:r,post:n}),o&&s.createElement(s.Fragment,null,s.createElement(m.a,{paddingTop:"32px"}),s.createElement(He,{collection:o,currentLocation:t,post:n}))),a&&s.createElement(m.a,{display:"none",sm:{display:"block"}},s.createElement(Ue,{post:n,creator:r,collection:o,currentLocation:t}))):null})),ze=n("./src/components/publisher/auroraHooks.ts"),qe=n("./src/components/session/useViewer.tsx");function Ge(){var e=o()(["\n  fragment PostFooterBylineAurora_post on Post {\n    id\n    creator {\n      name\n      username\n      bio\n      id\n      isBlocking\n      hasDomain\n      ...UserFollowButton_user\n      ...auroraHooks_publisher\n    }\n    collection {\n      name\n      description\n      ...CollectionFollowButton_collection\n      ...collectionUrl_collection\n    }\n    ...UserFollowButton_post\n    ...CollectionFollowButton_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Ge=function(){return e},e}var We=function(e){var t=e.post,n=t.creator,r=t.collection,o=Object(i.f)((function(e){return{authDomain:e.config.authDomain,currentLocation:e.navigation.currentLocation}})),a=o.authDomain,l=o.currentLocation,c=Object(qe.b)().value,u={xs:"XS",sm:"XS",md:"S",lg:"S",xl:"S"},d={display:"flex",justifyContent:"space-between",alignItems:"center"},p=Object(ze.d)(t.creator),f=r?Object(te.K)(r,l,a):Object(te.Ac)((null==n?void 0:n.username)||"",a,(null==n?void 0:n.hasDomain)||!1),g="More from ".concat(r?r.name:null==n?void 0:n.name),b=r?r.description:null==n?void 0:n.bio,h=null;n&&(h=c&&n.isBlocking?s.createElement(Le.a,{buttonSize:"SMALL",targetUserId:n.id}):s.createElement(Re.a,{buttonSize:"SMALL",post:t,user:n}));var v=r?s.createElement(Ce.a,{buttonSize:"SMALL",collection:r,post:t}):h;return s.createElement(m.a,{print:{display:"none"}},(null==n?void 0:n.name)&&(null==n?void 0:n.username)&&!p&&s.createElement(m.a,{paddingBottom:"30px"},s.createElement(m.o,{size:"inset"},s.createElement(m.a,_()({},d,{borderTop:"BASE_LIGHTER",paddingTop:"33px"}),s.createElement(m.a,null,s.createElement(Ae.e,{scale:"S"},"Written by"),s.createElement(Ae.c,{scale:u,clamp:1},s.createElement(m.m,{href:Object(te.Ac)(n.username,a,n.hasDomain)},n.name||n.username))),h),n.bio&&s.createElement(m.a,{paddingTop:"6px",paddingRight:"168px"},s.createElement(Ae.b,{scale:"M"},n.bio)))),(r||p)&&s.createElement(m.a,{paddingTop:"32px",paddingBottom:"4px",backgroundColor:"BASE_LIGHT"},s.createElement(m.o,{size:"inset"},s.createElement(m.a,d,s.createElement(Ae.c,{scale:u,clamp:1},s.createElement(m.m,{href:f},g)),v),b&&s.createElement(m.a,{paddingTop:"5px",paddingRight:"168px"},s.createElement(Ae.b,{scale:"M"},b)))))},$e=Object(a.gql)(Ge(),Ce.b,Ce.c,te.L,Re.b,Re.c,ze.a);function Ke(){var e=o()(["\n  fragment PostFooterCollectionButton_collection on Collection {\n    id\n    name\n    ...collectionUrl_collection\n  }\n  ","\n"]);return Ke=function(){return e},e}var Ye=function(e){var t=e.collection,n=Object(i.f)((function(e){return{authDomain:e.config.authDomain,currentLocation:e.navigation.currentLocation}}),i.d),r=n.currentLocation,o=n.authDomain;return s.createElement(s.Fragment,null,(null==t?void 0:t.name)&&s.createElement(m.a,{maxWidth:"100%",textAlign:"center"},s.createElement(m.b,{buttonStyle:"STRONG",href:Object(te.K)(t,r,o)},"Read more from ",t.name)))},Qe=Object(a.gql)(Ke(),te.L);function Xe(){var e=o()(["\n  fragment PostFooterResponsesButton_post on Post {\n    id\n    responsesCount\n    isLimitedState\n  }\n"]);return Xe=function(){return e},e}var Je=Object(a.gql)(Xe()),Ze=Object(i.c)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var t=e.authDomain,n=e.post,r=e.setIsResponsesSidebarVisible,o=Object(x.useCx)(),a=Object(I.c)(),i=Object(f.d)(),l=n.id,c=n.responsesCount,u=n.isLimitedState,d=c&&c>0;var p=Object(je.a)(),g=p?"See responses":"See responses (".concat(c||0,")"),b=d?g:"Write the first response";return s.createElement(m.m,{href:u||p?" ":Object(te.Ub)(t,l),onClick:function(e){return u?function(e){e.preventDefault()}(e):p?(a.event("responses.viewAllClicked",{postId:n.id,source:i}),function(e){e.preventDefault(),r(!0)}(e)):void 0}},s.createElement("span",{className:o((function(e){return{color:e.baseColor.text.light,opacity:u?.25:1,cursor:u?"not-allowed":"pointer"}}))},s.createElement(m.a,{sm:{display:d?"block":"none"},border:u?"BASE_NORMAL":"ACCENT_NORMAL",borderRadius:"4px",padding:"20px",textAlign:"center"},u?s.createElement(m.z,{darkTheme:!0,popoverRenderFn:function(){return s.createElement(m.a,{padding:"8px",whiteSpace:"nowrap"},"This feature is temporarily disabled.")},placement:"top",targetDistance:15},b):s.createElement("span",{className:o((function(e){return{color:e.accentColor.text.normal}}))},b))))})),et=n("./src/svg/creative-commons-by-21px.svg"),tt=n("./src/svg/creative-commons-nc-21px.svg"),nt=n("./src/svg/creative-commons-nd-21px.svg"),rt=n("./src/svg/creative-commons-sa-21px.svg"),ot=n("./src/svg/creative-commons-zero-21px.svg"),at=function(e){return{fill:e.baseColor.fill.lighter}};function st(e,t){return{PUBLIC_DOMAIN:{title:"Public Domain",link:"https://creativecommons.org/publicdomain/mark/1.0/"},CC_40_ZERO:{title:"Creative Commons copyright waiver",link:"http://creativecommons.org/publicdomain/zero/1.0/"},CC_40_BY:{title:"Creative Commons Attribution 4.0 International",link:"http://creativecommons.org/licenses/by/4.0/"},CC_40_BY_ND:{title:"Creative Commons Attribution-NoDerivatives 4.0 International",link:"https://creativecommons.org/licenses/by-nd/4.0/"},CC_40_BY_SA:{title:"Creative Commons Attribution-ShareAlike 4.0 International",link:"https://creativecommons.org/licenses/by-sa/4.0/"},CC_40_BY_NC:{title:"Creative Commons Attribution-NonCommercial 4.0 International",link:"https://creativecommons.org/licenses/by-nc/4.0/"},CC_40_BY_NC_ND:{title:"Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International",link:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},CC_40_BY_NC_SA:{title:"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International",link:"https://creativecommons.org/licenses/by-nc-sa/4.0/"}}[e][t]}var it=function(e){var t=e.license,n=Object(x.useCx)();return t?s.createElement(m.a,null,s.createElement(m.a,{display:"inline-block"},s.createElement(Ae.b,{scale:"S"},s.createElement(m.z,{darkTheme:!0,placement:"top",popoverRenderFn:function(){return s.createElement(m.a,{width:"300px",padding:"8px"},function(e){switch(e){case"PUBLIC_DOMAIN":return"Except where otherwise noted, this work is in the public domain.";case"CC_40_ZERO":return"Except where otherwise noted, this work has been dedicated to the public domain using CC0.";default:return"Except where otherwise noted, this work is licensed under a ".concat(st(e,"title")," license by the author.")}}(t))}},s.createElement(m.m,{disableSourceParam:!0,href:st(t,"link"),linkStyle:"SUBTLE",inline:!0,target:"_blank"},function(e){switch(e){case"PUBLIC_DOMAIN":return"Public domain.";case"CC_40_ZERO":return"No rights reserved";default:return"Some rights reserved"}}(t))))),s.createElement(m.a,{display:"inline-block"},s.createElement(Ae.b,{scale:"S"},"CC_40_ZERO"===t&&s.createElement("span",null," by the author."),s.createElement("span",{className:n(at),style:{marginLeft:"5px",verticalAlign:"text-bottom"}},function(e){return{CC_40_ZERO:s.createElement(ot.a,null),CC_40_BY:s.createElement(et.a,null),CC_40_BY_ND:s.createElement(s.Fragment,null,s.createElement(et.a,null),s.createElement(nt.a,null)),CC_40_BY_SA:s.createElement(s.Fragment,null,s.createElement(et.a,null),s.createElement(rt.a,null)),CC_40_BY_NC:s.createElement(s.Fragment,null,s.createElement(et.a,null),s.createElement(tt.a,null)),CC_40_BY_NC_ND:s.createElement(s.Fragment,null,s.createElement(et.a,null),s.createElement(tt.a,null),s.createElement(nt.a,null)),CC_40_BY_NC_SA:s.createElement(s.Fragment,null,s.createElement(et.a,null),s.createElement(tt.a,null),s.createElement(rt.a,null)),PUBLIC_DOMAIN:s.createElement(s.Fragment,null)}[e]}(t))))):null},lt=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),ct=n.n(lt),ut=n("./node_modules/@apollo/client/react/components/index.js");function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(){var e=o()(["\n  fragment ThanksTo_post on Post {\n    id\n    creator {\n      id\n    }\n    collaborators {\n      id\n      user {\n        id\n        name\n      }\n      state\n    }\n  }\n"]);return pt=function(){return e},e}function ft(){var e=o()(["\n  mutation setCollaboratorState($postId: ID!, $collaboratorId: ID!, $isVisible: Boolean!) {\n    setCollaboratorState(postId: $postId, collaboratorId: $collaboratorId, isVisible: $isVisible)\n  }\n"]);return ft=function(){return e},e}var gt=Object(a.gql)(ft()),bt=Object(a.gql)(pt()),ht=function(e){var t=e.viewer,n=e.post,r=e.collaborator,o=r.user,a=n.creator;return o&&t&&a&&(t.id===a.id||t.id===o.id)?s.createElement(ut.Mutation,{mutation:gt,optimisticResponse:{setCollaboratorState:!0},update:function(e,t){var o,a=e.readFragment({id:"Post:".concat(n.id),fragment:bt});e.writeFragment({id:"Post:".concat(n.id),fragment:bt,data:mt({},a,{collaborators:(null!==(o=null==a?void 0:a.collaborators)&&void 0!==o?o:[]).map((function(e){return e.id===r.id?mt({},e,{state:"visible"===e.state?"hidden":"visible"}):e}))})})}},(function(e){return"hidden-collab"===r.state&&a.id===t.id?"(declined)":s.createElement(s.Fragment,null,"(",s.createElement(m.m,{onClick:function(t){e({variables:{postId:n.id,collaboratorId:o.id,isVisible:"visible"!==r.state}})}},"visible"===r.state?"hide":"show"),")")})):null},vt=function(e){var t=e.index,n=e.total;return t===n-1?"":n>=3?t===n-2?", and ":", ":" and "},Et=function(e){var t=e.post,n=t.collaborators,r=t.creator;return r&&n&&n.length?s.createElement(ke.b,null,(function(e){return s.createElement(m.a,null,s.createElement(Ae.b,{scale:"S"},"Thanks to ",n.map((function(o,a){var i=o.user;return i?s.createElement(s.Fragment,{key:o.id},i.name,function(e,t,n){return e&&(e.id===t.id||n&&e.id===n.id)}(e,r,i)&&s.createElement(s.Fragment,null," ",s.createElement(ht,{viewer:e,post:t,collaborator:o})),s.createElement(vt,{index:a,total:n.length})):null})),". "))})):null};function xt(){var e=o()(["\n  fragment TranslatedBy_post on Post {\n    creator {\n      name\n      username\n      hasDomain\n    }\n    translationSourcePost {\n      id\n      title\n      mediumUrl\n    }\n  }\n"]);return xt=function(){return e},e}var yt=Object(a.gql)(xt()),Ot=function(e){var t=e.post,n=Object(i.f)((function(e){return e.config.authDomain})),r=t.creator;if(!t.translationSourcePost||!r)return null;var o=s.createElement(m.m,{linkStyle:"SUBTLE",inline:!0,href:Object(te.Gb)(t.translationSourcePost)},"original"),a=s.createElement(m.m,{linkStyle:"SUBTLE",inline:!0,href:Object(te.Ac)(r.username||"",n,r.hasDomain)},r.name);return s.createElement(m.a,null,s.createElement(Ae.b,{scale:"S"},"Translated from ",o," by ",a,"."))},jt=n("./src/components/sequence/SequenceCoverImage.tsx");function wt(){var e=o()(["\n  fragment SequencePreview_sequence on Sequence {\n    sequenceId\n    ...SequenceCoverImage_sequence\n    description\n    eyebrow\n    slug\n    tabletImage {\n      id\n    }\n    title\n    hideIndex\n  }\n  ","\n"]);return wt=function(){return e},e}var _t={textTransform:"uppercase"};function St(e){var t=e.sequence,n=Object(x.useCx)();return s.createElement(m.a,{display:"flex",flexDirection:"column",marginBottom:"56px"},s.createElement(m.a,{display:"flex",marginTop:"48px",xs:{marginTop:"32px",display:"flex"}},s.createElement(m.a,{flexShrink:"0",borderRadius:"4px",overflow:"hidden",md:{display:"none"}},s.createElement(jt.b,{sequence:t,width:200,height:265})),s.createElement(m.a,{flexShrink:"0",borderRadius:"4px",overflow:"hidden",display:"none",md:{display:"block"},xs:{display:"none !important"}},s.createElement(jt.b,{sequence:t,width:180,height:238})),s.createElement(m.a,{flexShrink:"0",borderRadius:"4px",overflow:"hidden",display:"none",xs:{display:"block"}},s.createElement(jt.b,{sequence:t,width:98,height:130})),s.createElement(m.a,{display:"flex",flexDirection:"column",marginLeft:"32px",justifyContent:"center",xs:{marginLeft:"20px",display:"flex"}},s.createElement("div",{className:n(_t)},s.createElement(Ae.e,null,"About this ",t.eyebrow||"Collection")),t.title&&t.slug&&s.createElement(m.d,{href:Object(te.Qb)(t.slug)},s.createElement(m.a,null,s.createElement(Ae.g,{scale:"L"},t.title))),t.description&&s.createElement(m.a,{marginTop:"14px",xs:{display:"none"},maxWidth:"680px"},s.createElement(Ae.b,{scale:"L"},t.description)))),t.description&&s.createElement(m.a,{display:"none",marginTop:"29px",xs:{display:"block"}},s.createElement(Ae.b,{scale:"M"},t.description)))}var Pt=Object(a.gql)(wt(),jt.a);function Ct(){var e=o()(["\n  query SequencePostRecircQuery(\n    $postId: ID!\n    $includeSequenceRecirc: Boolean!\n    $postRecircPaging: PaginationLimit!\n  ) {\n    post(id: $postId) {\n      id\n      ...SequencePostRecirc_post\n    }\n  }\n  ","\n"]);return Ct=function(){return e},e}function kt(){var e=o()(["\n  fragment SequencePostRecirc_post on Post {\n    elevateRecirc(paging: {limit: $postRecircPaging}) @include(if: $includeSequenceRecirc) {\n      items {\n        __typename\n        ... on Post {\n          ...PostListingItemRecirc_post\n        }\n      }\n    }\n  }\n  ","\n"]);return kt=function(){return e},e}var It=Object(a.gql)(kt(),k.a),Tt=Object(a.gql)(Ct(),It),Rt=s.forwardRef((function(e,t){var n,r,o,a=e.postId,i=e.rootMargin,l=e.recircOptions,c=(null==l||null===(n=l.v1)||void 0===n?void 0:n.limit)||3,u=R(Tt,{variables:{postId:a,includeSequenceRecirc:!0,postRecircPaging:c},ssr:!1}),d=P()(u,2),m=d[0],p=d[1],f=p.called,g=p.loading,b=p.error,h=p.data;Object(A.f)({onIntersect:m,target:t,disconnect:function(){return f},rootMargin:i},[f]);var v=null==h||null===(r=h.post)||void 0===r||null===(o=r.elevateRecirc)||void 0===o?void 0:o.items;return!f||g||b||!v?null:s.createElement(T,{posts:v,sourceName:"elevate_recirc"})})),Lt=s.forwardRef((function(e,t){return s.createElement(Rt,_()({},e,{ref:t}))})),At=Object(i.c)((function(e){return{recircOptions:e.config.recircOptions}}),null,null,{forwardRef:!0})(Lt),Mt=n("./src/components/style/BaseThemeProvider.tsx"),Bt=n("./src/components/style/UnboundFellThemeProvider.tsx"),Dt=n("./src/framework/track/IntersectionPresenter.tsx"),Nt=n("./src/styles/colors.ts"),Ht=n("./src/styles/flex.ts"),Ut=n("./src/svg/unlisted-19px.svg"),Ft=n("./src/util/hooks/postRecircHooks.tsx");function Vt(){var e=o()(["\n  fragment PostFooter_post on Post {\n    id\n    visibility\n    license\n    isPublished\n    allowResponses\n    layerCake\n    newsletterId\n    collection {\n      viewerIsEditor\n      newsletterV3 {\n        isSubscribed\n        showPromo\n      }\n      ...auroraHooks_publisher\n      ...NewsletterV3Promo_publisher\n      ...PostFooter_collection\n      ...TagList_collection\n    }\n    creator {\n      ...auroraHooks_publisher\n    }\n    sequence {\n      sequenceId\n      ...SequencePreview_sequence\n    }\n    tags {\n      id\n      ...TagList_tags\n    }\n    topics {\n      topicId\n      name\n    }\n    viewerClapCount\n    ...PostFooterActionsBar_post\n    ...PostFooterByline_post\n    ...PostFooterBylineAurora_post\n    ...PostFooterResponsesButton_post\n    ...PostInternalLinks_post\n    ...PostNextFiveStories_post\n    ...PostRecirc_post\n    ...SequencePostRecirc_post\n    ...ThanksTo_post\n    ...TranslatedBy_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Vt=function(){return e},e}function zt(){var e=o()(["\n  fragment PostFooter_collection on Collection {\n    name\n    description\n    ...PostFooterCollectionButton_collection\n  }\n  ","\n"]);return zt=function(){return e},e}var qt=function(e){return{color:e.baseColor.text.normal}},Gt=(t.c=Object(i.c)((function(e){return{clapsPerPost:e.multiVote.clapsPerPost,isAmp:e.config.isAmp,embeddedPostIds:e.config.embeddedPostIds}}),{})((function(e){var t=e.post,n=e.isAmp,r=e.setIsResponsesSidebarVisible,o=e.embeddedPostIds,a=e.hideRecirc,i=t.id,d=t.layerCake,p=t.tags,f=t.topics,g=t.sequence,b=t.visibility,h=t.isPublished,y=t.allowResponses,O=t.collection,j=s.useRef(null),w=s.useRef(null),_=Object(x.useCx)(),S=s.useContext(l.b),P=Object(Ie.a)("enable_aurora_recirc"),C=Object(Ft.a)()||n,k=function(e,t,n,r){var o=Object(E.a)({tier:r,topics:n,tags:t,flag:"enable_more_on_coronavirus"}).shouldShowCdcMessaging;return!(!(null==e?void 0:e.coronavirus)||!o)}(o,null==p?void 0:p.map((function(e){return e.id})),null==f?void 0:f.map((function(e){return e.name})),d),I=Object(ze.b)(O||t.creator);s.useEffect((function(){var e=I?j:w;S.updateWatchedBounds("footer",e,{type:"footer"})}),[w,j]);var T,R=!!Object(Ie.a)("enable_end_of_post_cleanup"),L=Object(je.a)(),A=null==O?void 0:O.newsletterV3;return s.createElement("div",{ref:w},s.createElement(Oe.b,{source:{susiEntry:"follow_footer",name:"follow_footer"}},s.createElement("div",{className:_([(T=!h||k,{marginTop:"40px",clear:"both",marginBottom:T?"40px":void 0}),Object(Ht.a)({flexDirection:"column",justifyContent:"center"})])},s.createElement(m.o,{size:"inset"},!h&&s.createElement(m.a,{height:"20px",borderTop:"BASE_LIGHTER"}),(null==O?void 0:O.newsletterV3)&&(null==A?void 0:A.showPromo)&&((null==O?void 0:O.viewerIsEditor)||!(null==A?void 0:A.isSubscribed))&&s.createElement(c.a,{postId:i,publisher:O}),s.createElement(m.a,{display:"flex",flexWrap:"wrap"},h&&s.createElement(Et,{post:t}),h&&s.createElement(Ot,{post:t})),s.createElement(m.a,{display:"flex",flexWrap:"wrap",alignItems:"center"},"UNLISTED"===b&&s.createElement(m.a,null,s.createElement(Ae.b,{scale:"S"},s.createElement(Ut.a,null)," ",s.createElement("span",{className:_(qt)},"Unlisted"),"ALL_RIGHTS_RESERVED"!==t.license&&s.createElement("span",{style:{marginLeft:"5px",marginRight:"5px"}},"|"))),t.license&&"ALL_RIGHTS_RESERVED"!==t.license&&s.createElement(it,{license:t.license})),I&&s.createElement(s.Fragment,null,!n&&s.createElement(m.a,{marginTop:"25px",paddingBottom:"25px"},s.createElement(_e,{post:t,setIsResponsesSidebarVisible:r,useSocialPopover:!0,shouldHideResponsesText:!0,shouldHideClapsText:!0})),p&&p.length>0&&s.createElement(m.a,{marginTop:"25px",paddingBottom:"40px"},s.createElement(ie,{tags:p,collection:t.collection}))),!I&&s.createElement(s.Fragment,null,p&&p.length>0&&s.createElement(m.a,{marginTop:"25px"},s.createElement(ie,{tags:p,collection:t.collection})),!n&&s.createElement(_e,{post:t,setIsResponsesSidebarVisible:r})),I&&!O&&s.createElement(m.a,{paddingTop:"40px"})),s.createElement("div",{ref:j},s.createElement(m.o,{size:"inset"},h&&s.createElement(s.Fragment,null,!I&&s.createElement(Ve,{post:t}),y&&s.createElement(m.a,{borderTop:I?void 0:"BASE_LIGHTER",paddingTop:I?void 0:"25px",print:{display:"none"},sm:{borderTop:R?"NONE":"BASE_LIGHTER",paddingTop:R?"0":"25px"}},!L&&s.createElement(Ze,{post:t,setIsResponsesSidebarVisible:r}))),!I&&k&&s.createElement(m.a,{paddingTop:"25px"},s.createElement(Dt.a,{ref:w,rootMargin:"0px 0px 1000px 0px"},s.createElement(u.a,{postId:null==o?void 0:o.coronavirus,sourcePost:t})))),I&&s.createElement(s.Fragment,null,s.createElement(We,{post:t}),s.createElement(m.a,{backgroundColor:"BASE_LIGHT",print:{display:"none"},paddingTop:"25px"},s.createElement(m.o,{size:"full"},s.createElement(z,{post:t,ref:w,rootMargin:"0px 0px 2000px 0px"}),O&&s.createElement(m.a,{marginBottom:"96px",marginTop:"40px"},s.createElement(Ye,{collection:O}))))),!a&&h&&!k&&s.createElement(Mt.b,null,s.createElement(Bt.a,null,s.createElement(m.a,{background:Nt.B,marginTop:P?void 0:"64px",print:{display:"none"}},s.createElement(m.o,null,g&&!g.hideIndex&&!I&&s.createElement(St,{sequence:g}),!C&&!I&&(g?s.createElement(At,{ref:w,postId:i,rootMargin:"0px 0px 2000px 0px",post:t}):s.createElement(Z,{ref:w,postId:i,rootMargin:"0px 0px 2000px 0px",post:t})),C&&(!I||P&&I)&&s.createElement(v,{post:t,sourceName:"post_internal_links"})))))))))})),Object(a.gql)(zt(),Qe)),Wt=Object(a.gql)(Vt(),ze.a,c.b,Gt,Se,Fe,$e,Je,h,q,Y,It,Pt,le,ce,bt,yt)},"./src/components/post/footer/PostFooterSocialPopover.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return P}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n.n(l),u=n("./src/components/social/ShareButton.tsx"),d=n("./src/components/ui/PopoverMenu.tsx"),m=n("./src/framework/design-system/components/index.ts"),p=n("./src/framework/design-system/type/index.ts"),f=n("./src/framework/source/index.ts"),g=n("./src/framework/style/index.ts"),b=n("./src/store/actions/navigation.ts"),h=n("./src/svg/link-slim.svg");function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var E=c.a.createElement("g",{fillRule:"evenodd"},c.a.createElement("path",{d:"M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"}),c.a.createElement("path",{d:"M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"})),x=function(e){return c.a.createElement("svg",v({width:25,height:25},e),E)},y=n("./src/util/hooks/useToggle.tsx");function O(){var e=o()(["\n  fragment PostFooterSocialPopover_post on Post {\n    id\n    mediumUrl\n    title\n    ...ShareButton_post\n  }\n  ","\n"]);return O=function(){return e},e}function j(e){return{fill:e.baseColor.fill.normal}}function w(e){return{fill:e.baseColor.fill.lighter}}var _={height:"16px",width:"16px",marginLeft:"4px"},S=function(e){var t,n=e.post,r=e.source,o=n.mediumUrl,a=n.title,i=Object(b.u)(),c=Object(g.useTheme)(),v=Object(g.useCx)(),E=Object(y.a)(!1),O=s()(E,3),S=O[0],P=O[1],C=O[2],k=(null==c||null===(t=c.breakpoints)||void 0===t?void 0:t.md)||728;return l.createElement(f.b,{source:r},l.createElement(m.p,{isVisible:S,hide:C,popoverRenderFn:function(){return l.createElement(d.a,null,l.createElement(d.b,{paddingTopBottom:"8px"},l.createElement(u.a,{socialPlatform:"TWITTER",buttonStyle:"LINK_INLINE_SHORT_LABEL",post:n})),l.createElement(d.b,{paddingTopBottom:"8px"},l.createElement(u.a,{socialPlatform:"FACEBOOK",buttonStyle:"LINK_INLINE_SHORT_LABEL",post:n})),l.createElement(d.b,{paddingTopBottom:"8px"},l.createElement(u.a,{socialPlatform:"LINKEDIN",buttonStyle:"LINK_INLINE_SHORT_LABEL",post:n})),o&&l.createElement(d.b,{paddingTopBottom:"8px"},l.createElement(m.m,{onClick:function(){navigator.clipboard.writeText(o),i({message:"Link copied",toastStyle:"MESSAGE",duration:2e3}),C()}},l.createElement(m.a,{display:"inline-block"},l.createElement(h.a,{className:v([w,_])}),l.createElement(m.a,{display:"inline-block",marginLeft:"20px"},l.createElement(p.b,{scale:"S"},"Copy link"))))))}},l.createElement(m.m,{onClick:function(){var e,t=null===(e=window)||void 0===e?void 0:e.innerWidth;navigator&&navigator.share&&o&&t&&t<k?navigator.share({url:o,text:a||"",title:a||""}):P()},ariaLabel:"Share Post"},l.createElement(x,{className:v(j)}))))},P=Object(i.gql)(O(),u.b)},"./src/components/post/footer/actions/CollectionSubmission.tsx":function(e,t,n){"use strict";n.d(t,"c",(function(){return k})),n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return M}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/@apollo/client/react/components/index.js"),c=n("./node_modules/react/index.js"),u=n("./src/components/collection/CollectionAvatar.tsx"),d=n("./src/components/post/footer/actions/PubStatusMutations.tsx"),m=n("./src/components/post/footer/actions/shared.ts"),p=n("./src/components/session/WithViewer.tsx"),f=n("./src/components/ui/PopoverMenu.tsx"),g=n("./src/framework/design-system/components/index.ts"),b=n("./src/framework/design-system/type/index.ts"),h=n("./src/framework/track/index.ts");function v(){var e=s()(["\n  fragment CollectionSubmission_post on Post {\n    id\n    ...CollectionSubmissionPopover_post\n    ...CollectionSubmissionPopoverMenuItem_post\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function E(){var e=s()(["\n  fragment CollectionSubmissionPopover_post on Post {\n    id\n    isPublished\n    creator {\n      id\n    }\n  }\n"]);return E=function(){return e},e}function x(){var e=s()(["\n  fragment CollectionSubmissionPopoverMenuItem_post on Post {\n    id\n    statusForCollection\n    isPublished\n    creator {\n      id\n    }\n  }\n"]);return x=function(){return e},e}function y(){var e=s()(["\n  query CollectionSubmissionPopoverQuery {\n    viewer {\n      id\n      writerCollections {\n        ...CollectionSubmissionPopoverQuery_collection\n      }\n      adminCollections {\n        ...CollectionSubmissionPopoverQuery_collection\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function O(){var e=s()(["\n  fragment CollectionSubmissionPopoverQuery_collection on Collection {\n    ...CollectionSubmissionOption_collection\n    ...ManageSubmission_collection\n  }\n  ","\n  ","\n"]);return O=function(){return e},e}function j(){var e=s()(["\n  fragment CollectionSubmissionOption_collection on Collection {\n    id\n    name\n    slug\n    ...CollectionAvatar_collection\n  }\n  ","\n"]);return j=function(){return e},e}var w=Object(i.gql)(j(),u.b),_=Object(i.gql)(O(),w,m.a),S=Object(i.gql)(y(),_),P=Object(i.gql)(x()),C=Object(i.gql)(E()),k=Object(i.gql)(v(),C,P),I=[{name:"",value:"No publication",content:c.createElement(g.a,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},c.createElement(b.b,{scale:"M",color:"DARKER"},"No publication"))}];function T(e){var t=e.collection;return t.name?c.createElement(g.a,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},c.createElement(b.b,{scale:"M",color:"DARKER"},t.name),c.createElement(u.a,{collection:t,size:32})):null}function R(e){var t=e.show,n=e.post,r=n.statusForCollection,a=n.isPublished,s=c.useState(!1),i=o()(s,2),l=i[0],u=i[1];return l||h.a.on("load",(function(){return u(!0)})),!r&&a&&l?c.createElement(A,{post:n,noQueryReturn:null},(function(e){var r=e.loading,o=e.error,a=e.data;if(r||o)return null;var s=(void 0===a?{viewer:void 0}:a).viewer,i=n.creator;if(!s||!i||s.id!==i.id)return null;var l=s.adminCollections,u=s.writerCollections;return 0===l.length&&0===u.length?null:c.createElement(f.b,null,c.createElement(g.m,{onClick:t},"Add to publication"))})):null}function L(e){var t=e.isVisible,n=e.hide;return c.createElement(g.g,{isVisible:t,hide:n,withCloseButton:!0},c.createElement(g.a,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},c.createElement(b.c,{scale:"M",tag:"h3"},"Story submitted"),c.createElement(g.a,{paddingTop:"8px",paddingBottom:"24px"},c.createElement(b.f,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),c.createElement(g.b,{buttonStyle:"OBVIOUS",onClick:n},"OK")))}var A=function(e){var t=e.children,n=e.post,r=e.noQueryReturn,o=n.creator;return o?c.createElement(p.b,null,(function(e){return e?e.id!==o.id?r:c.createElement(l.Query,{query:S,ssr:!1},(function(e){var n=e.loading,r=e.error,o=e.data;return t({loading:n,error:r,data:o})})):r})):r},M=function(e){var t=e.post,n=e.hide,r=e.showLoadingIndicator,a=e.isVisible,s=e.children,i=c.useState(!1),l=o()(i,2),u=l[0],m=l[1],p=c.useState(""),f=o()(p,2),v=f[0],E=f[1],x=Object(d.a)(t),y=Object(d.c)(t);return u||h.a.on("load",(function(){return m(!0)})),t.isPublished&&u?c.createElement(g.A,null,(function(e){var o=e.isVisible,i=e.hide,l=e.show;return c.createElement(c.Fragment,null,c.createElement(L,{hide:i,isVisible:o}),c.createElement(A,{post:t,noQueryReturn:s},(function(e){var o=e.loading,i=e.error,u=e.data;if(o||i)return s;var d=(void 0===u?{viewer:void 0}:u).viewer,m=t.creator;if(!d||!m||d.id!==m.id)return s;var p=d.adminCollections,f=d.writerCollections;if(0===p.length&&0===f.length)return s;var h=p.concat(f).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:c.createElement(T,{collection:e})}})),O=I.concat(h),j=p.reduce((function(e,t){return e[t.slug||""]=t,e}),{}),w=f.reduce((function(e,t){return e[t.slug||""]=t,e}),{}),_="";if(v){var S=O.find((function(e){return e.name===v}));S&&(_=S.value)}return c.createElement(g.p,{placement:"top",hide:n,isVisible:a,popoverRenderFn:function(){return c.createElement(g.a,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},c.createElement(b.b,{scale:"M",color:"DARKER"},"Add your story to a publication:"),c.createElement(g.a,{marginTop:"10px"},c.createElement(g.r,{value:_,onChange:E,options:O})),c.createElement(g.a,{display:"flex",marginTop:"20px"},c.createElement(b.b,{scale:"M",color:"LIGHTER"},v in j?c.createElement(g.b,{onClick:function(){var e=j[v];n(),r(),x(e).then((function(){window.location.reload(!1)}))},buttonStyle:"OBVIOUS"},"Add story"):c.createElement(g.b,{onClick:function(){var e=w[v];y(e),n(),l()},disabled:!v},"Submit")),c.createElement(g.a,{marginLeft:"10px"},c.createElement(b.b,{scale:"M",color:"LIGHTER"},c.createElement(g.m,{onClick:n},c.createElement(g.a,{padding:"10px"},"Cancel"))))),c.createElement(g.a,{marginTop:"10px"},c.createElement(b.b,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},s)})))})):s}},"./src/components/post/footer/actions/PubStatusMutations.tsx":function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./src/schema-types/globalTypes.ts");function u(){var e=s()(["\n  mutation RejectPostFromPubMutation(\n    $postId: ID!\n    $collectionSlug: String!\n    $status: CollectionPostStatus!\n  ) {\n    manageCollectionPostStatus(postId: $postId, collectionSlug: $collectionSlug, status: $status) {\n      __typename\n      id\n      statusForCollection\n      collection {\n        id\n      }\n      pendingCollection {\n        id\n        slug\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=s()(["\n  mutation ManageCollectionPostStatusMutation(\n    $postId: ID!\n    $collectionSlug: String!\n    $status: CollectionPostStatus!\n  ) {\n    manageCollectionPostStatus(postId: $postId, collectionSlug: $collectionSlug, status: $status) {\n      __typename\n      id\n      statusForCollection\n      pendingCollection {\n        id\n        slug\n      }\n    }\n  }\n"]);return d=function(){return e},e}var m=Object(i.gql)(d()),p=Object(i.gql)(u()),f=function(e){var t=Object(i.useMutation)(m),n=o()(t,1)[0];return Object(l.useCallback)((function(t){return n({variables:{collectionSlug:(null==t?void 0:t.slug)||"",postId:e.id,status:c.c.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:c.c.PENDING,pendingCollection:t}}})}),[e])},g=function(e){var t=Object(i.useMutation)(m),n=o()(t,1)[0];return Object(l.useCallback)((function(t){return n({variables:{collectionSlug:(null==t?void 0:t.slug)||"",postId:e.id,status:c.c.APPROVED}})}),[e])},b=function(e){var t=Object(i.useMutation)(p),n=o()(t,1)[0];return Object(l.useCallback)((function(t){return n({variables:{collectionSlug:(null==t?void 0:t.slug)||"",postId:e.id,status:c.c.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])}},"./src/components/post/footer/actions/shared.ts":function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./src/components/collection/CollectionAvatar.tsx");function i(){var e=o()(["\n  fragment ManageSubmission_post on Post {\n    id\n    statusForCollection\n    collection {\n      ...ManageSubmission_collection\n    }\n    pendingCollection {\n      ...ManageSubmission_collection\n    }\n    creator {\n      id\n    }\n  }\n  ","\n"]);return i=function(){return e},e}function l(){var e=o()(["\n  fragment ManageSubmission_collection on Collection {\n    name\n    viewerIsEditor\n    creator {\n      id\n    }\n    ...CollectionAvatar_collection\n  }\n  ","\n"]);return l=function(){return e},e}var c=function(e,t){return t&&e.creator&&t.id===e.creator.id},u=function(e,t){var n=e.pendingCollection||e.collection;return n&&n.creator&&t.id===n.creator.id},d=function(e){var t=e.pendingCollection||e.collection;return t&&t.viewerIsEditor},m=Object(a.gql)(l(),s.b),p=Object(a.gql)(i(),m)},"./src/components/post/grouping/ParagraphLayoutGrouping.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return P}));var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./src/components/post/grouping/ParagraphStyleGrouping.tsx"),m=n("./src/framework/design-system/index.ts"),p=n("./src/framework/style/index.ts"),f=n("./src/schema-types/globalTypes.ts"),g=n("./src/util/richText.ts");function b(){var e=s()(["\n  fragment ParagraphLayoutGrouping_customStyleSheet on CustomStyleSheet {\n    id\n    ...ParagraphStyleGrouping_customStyleSheet\n  }\n  ","\n"]);return b=function(){return e},e}function h(){var e=s()(["\n  fragment ParagraphLayoutGrouping_privateNote on Note {\n    ...ParagraphStyleGrouping_privateNote\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=s()(["\n  fragment ParagraphLayoutGrouping_highlight on Quote {\n    ...ParagraphStyleGrouping_highlight\n  }\n  ","\n"]);return v=function(){return e},e}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var x={clear:"both"},y={clear:"both",width:"100%"},O=function(e){var t={boxSizing:"border-box",margin:"0 auto",width:"100%"};return"INSET_CENTER"===e?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{maxWidth:"700px",padding:"0 1.25em"}):t},j=u.memo((function(e){var t=e.layoutGroup,n=e.postBodyInserts,r=e.customStyleSheet,o=e.isEmbedded,a=Object(p.useCx)(),s=t.styleGroups[0].paragraphViewModels[0].richTextStyle,i=t.styleGroups.map((function(e,t){return u.createElement(d.a,{key:t,styleGroup:e,postBodyInserts:n,customStyleSheet:r})}));if(Object(g.j)(s)||o)return u.createElement(u.Fragment,null,i);switch(t.effectiveLayout){case"OUTSET_CENTER":case"OUTSET_ROW":return u.createElement("div",{className:a(x)},u.createElement(m.j,{size:{xs:"full",sm:"full",md:"full",lg:"outset",xl:"outset"}},i));case"FULL_WIDTH":return u.createElement("div",{className:a(y)},i);default:return"FULL_PAGE"===s?u.createElement(m.j,{size:"inset"},i):u.createElement("div",{className:a(O(t.effectiveLayout))},i)}})),w=Object(c.gql)(v(),d.c),_=Object(c.gql)(h(),d.d),S=Object(c.gql)(b(),d.b),P=function(e){var t=[],n=[];e.forEach((function(e){var r=C(e.paragraphStyle,e.paragraph.layout),a=t[t.length-1];if(a&&a.effectiveLayout===r)n.push(e);else{if(a){var s,i=Object(d.e)(n);(s=a.styleGroups).push.apply(s,o()(i))}n.length=0,n.push(e),t.push({styleGroups:[],effectiveLayout:r})}}));var r=t[t.length-1];if(r){var a,s=Object(d.e)(n);(a=r.styleGroups).push.apply(a,o()(s))}return t},C=function(e,t){switch(t){case f.g.INSET_LEFT:case f.g.OUTSET_LEFT:return"IMG"===e||"IFRAME"===e?f.g.INSET_CENTER:t;case f.g.OUTSET_ROW_CONTINUE:return f.g.OUTSET_ROW;default:return t||f.g.INSET_CENTER}}},"./src/components/post/multivote/ClapMutation.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return v}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./src/components/post/multivote/MultiVoteCount.tsx");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(){var e=l()(["\n  mutation ClapMutation($targetPostId: ID!, $userId: ID!, $numClaps: Int!) {\n    clap(targetPostId: $targetPostId, userId: $userId, numClaps: $numClaps) {\n      ...ClapMutation_post\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function g(){var e=l()(["\n  fragment ClapMutation_post on Post {\n    __typename\n    id\n    clapCount\n    viewerClapCount\n    ...MultiVoteCount_post\n  }\n  ","\n"]);return g=function(){return e},e}var b=Object(c.gql)(g(),d.b),h=Object(c.gql)(f(),b),v=function(){var e=Object(c.useMutation)(h),t=s()(e,1)[0];return Object(u.useCallback)((function(e,n,r){return t({variables:{targetPostId:e.id,userId:n,numClaps:r},optimisticResponse:{clap:p({__typename:"Post"},e,{clapCount:e.clapCount+r,viewerClapCount:(e.viewerClapCount||0)+r})},update:function(t,n){var o,a=null==n||null===(o=n.data)||void 0===o?void 0:o.clap;if(a){var s=t.readFragment({id:"Post:".concat(a.id),fragment:b,fragmentName:"ClapMutation_post"});t.writeFragment({id:"Post:".concat(a.id),fragment:b,fragmentName:"ClapMutation_post",data:p({},s,{clapCount:e.clapCount+r,viewerClapCount:(e.viewerClapCount||0)+r})})}}})}),[])}},"./src/components/post/multivote/MultiVote.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return Fe})),n.d(t,"a",(function(){return Ve}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n.n(l),u=n("./node_modules/react-redux/es/index.js"),d=n("./src/components/post/multivote/ClapMutation.tsx"),m=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),p=n.n(m),f=n("./src/framework/design-system/components/index.ts"),g=n("./src/framework/style/index.ts"),b=n("./src/styles/colors.ts"),h=n("./src/styles/mediaTypes.ts");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E={top:"0",left:"0",width:"60px",height:"60px"},x={top:"-2px",left:"0",width:"25px",height:"36px"},y=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute",pointerEvents:"none"},e?E:x)},O={"0%":{opacity:"0",transform:"scale(1)"},"32%":{opacity:"1"},"100%":{opacity:"0",transform:"scale(1.5)"}},j={"0%":{opacity:"0",transform:"scale(1)"},"32%":{opacity:"1",transform:"scale(1.3)"},"100%":{opacity:"0",transform:"scale(1.6)"}},w=function(e){return p()({animation:"370ms ease-out 1 ".concat(e)},Object(h.c)("reduce"),{animationDuration:"0.1ms"})},_=function(e){var t=e?30:13;return{position:"absolute",top:"".concat(48,"%"),left:"".concat(-5,"px"),transformOrigin:"".concat(t+2+3,"px"),width:"".concat(2,"px"),height:"".concat(2,"px"),borderRadius:"50%",backgroundColor:b.j}},S=function(e){var t=e?30:13;return{position:"absolute",top:"".concat(44,"%"),left:"".concat(-9,"px"),transformOrigin:"".concat(t+6+3,"px"),width:"0",height:"0",borderTop:"2px solid transparent",borderBottom:"2px solid transparent",borderLeft:"".concat(6,"px solid ").concat(b.f)}};function P(e){var t=e.isLarge,n=e.offset,r=e.onBurstEnd,o=Object(g.useCx)(),a=o(y(t));return l.createElement(f.C,{keyframes:{dotKeyframesName:O,triangleKeyframesName:j}},(function(e){for(var s=e.dotKeyframesName,i=e.triangleKeyframesName,c=[],u=[],d=0;d<5;d++){var m=72*d+n;c.push(l.createElement("div",{key:m,className:"".concat(o(_(t))),style:{transform:"rotate(".concat(m,"deg)")}})),u.push(l.createElement("div",{key:m,className:"".concat(o(S(t))),style:{transform:"rotate(".concat(m+13,"deg)")}}))}return l.createElement("div",{className:a},l.createElement("div",{className:"".concat(a," ").concat(o(w(s))),onAnimationEnd:function(){return r(n)}},c),l.createElement("div",{className:"".concat(a," ").concat(o(w(i)))},u))}))}var C=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),k=n.n(C),I=n("./node_modules/@babel/runtime/helpers/extends.js"),T=n.n(I),R=n("./src/styles/breakpoints.ts"),L=n("./src/svg/clap-25px.svg");function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var M=c.a.createElement("g",{fillRule:"evenodd"},c.a.createElement("path",{d:"M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"})),B=function(e){return c.a.createElement("svg",A({width:29,height:29},e),M)};function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N=c.a.createElement("path",{d:"M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z",fillRule:"evenodd"}),H=function(e){return c.a.createElement("svg",D({width:33,height:33,viewBox:"0 0 33 33"},e),N)},U=n("./src/svg/clap-filled-25px.svg");function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var V=c.a.createElement("g",{fillRule:"evenodd"},c.a.createElement("path",{d:"M13.74 1l.76 2.97.76-2.97zM18.63 2.22l-1.43-.47-.4 3.03zM11.79 1.75l-1.43.47 1.84 2.56zM24.47 14.3L21.45 9c-.29-.43-.69-.7-1.12-.78a1.16 1.16 0 0 0-.91.22c-.3.23-.48.52-.54.84l.05.07 2.85 5c1.95 3.56 1.32 6.97-1.85 10.14a8.46 8.46 0 0 1-.55.5 5.75 5.75 0 0 0 3.36-1.76c3.26-3.27 3.04-6.75 1.73-8.91M14.58 10.89c-.16-.83.1-1.57.7-2.15l-2.5-2.49c-.5-.5-1.38-.5-1.88 0-.18.18-.27.4-.33.63l4.01 4z"}),c.a.createElement("path",{d:"M17.81 10.04a1.37 1.37 0 0 0-.88-.6.81.81 0 0 0-.64.15c-.18.13-.71.55-.24 1.56l1.43 3.03a.54.54 0 1 1-.87.61L9.2 7.38a.99.99 0 1 0-1.4 1.4l4.4 4.4a.54.54 0 1 1-.76.76l-4.4-4.4L5.8 8.3a.99.99 0 0 0-1.4 0 .98.98 0 0 0 0 1.39l1.25 1.24 4.4 4.4a.54.54 0 0 1 0 .76.54.54 0 0 1-.76 0l-4.4-4.4a1 1 0 0 0-1.4 0 .98.98 0 0 0 0 1.4l1.86 1.85 2.76 2.77a.54.54 0 0 1-.76.76L4.58 15.7a.98.98 0 0 0-1.4 0 .99.99 0 0 0 0 1.4l5.33 5.32c3.37 3.37 6.64 4.98 10.49 1.12 2.74-2.74 3.27-5.54 1.62-8.56l-2.8-4.94z"})),z=function(e){return c.a.createElement("svg",F({width:29,height:29},e),V)};function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var G=c.a.createElement("g",{fillRule:"evenodd"},c.a.createElement("path",{d:"M29.58 17.1l-3.85-6.78c-.37-.54-.88-.9-1.44-.99a1.5 1.5 0 0 0-1.16.28c-.42.33-.65.74-.7 1.2v.01l3.63 6.37c2.46 4.5 1.67 8.8-2.33 12.8-.27.27-.54.5-.81.73a7.55 7.55 0 0 0 4.45-2.26c4.16-4.17 3.87-8.6 2.21-11.36zm-4.83.82l-3.58-6.3c-.3-.44-.73-.74-1.19-.81a1.1 1.1 0 0 0-.89.2c-.64.51-.75 1.2-.33 2.1l1.83 3.86a.6.6 0 0 1-.2.75.6.6 0 0 1-.77-.07l-9.44-9.44c-.51-.5-1.4-.5-1.9 0a1.33 1.33 0 0 0-.4.95c0 .36.14.7.4.95l5.6 5.61a.6.6 0 1 1-.84.85l-5.6-5.6-.01-.01-1.58-1.59a1.35 1.35 0 0 0-1.9 0 1.35 1.35 0 0 0 0 1.9l1.58 1.59 5.6 5.6a.6.6 0 0 1-.84.86L4.68 13.7c-.51-.51-1.4-.51-1.9 0a1.33 1.33 0 0 0-.4.95c0 .36.14.7.4.95l2.36 2.36 3.52 3.52a.6.6 0 0 1-.84.85l-3.53-3.52a1.34 1.34 0 0 0-.95-.4 1.34 1.34 0 0 0-.95 2.3l6.78 6.78c3.72 3.71 9.33 5.6 13.5 1.43 3.52-3.52 4.2-7.13 2.08-11.01zM11.82 7.72c.06-.32.21-.63.46-.89a1.74 1.74 0 0 1 2.4 0l3.23 3.24a2.87 2.87 0 0 0-.76 2.99l-5.33-5.33zM13.29.48l-1.92.88 2.37 2.84zM21.72 1.36L19.79.5l-.44 3.7zM16.5 3.3L15.48 0h2.04z"})),W=function(e){return c.a.createElement("svg",q({width:33,height:33},e),G)};function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var K=c.a.createElement("path",{d:"M20.13 8.11l-5.61 5.61-5.6-5.61-.81.8 5.61 5.61-5.61 5.61.8.8 5.61-5.6 5.61 5.6.8-.8-5.6-5.6 5.6-5.62",fillRule:"evenodd"}),Y=function(e){return c.a.createElement("svg",$({width:29,height:29},e),K)},Q=n("./src/util/hooks/useInterval.tsx"),X=n("./node_modules/exenv/index.js"),J=n.n(X).a.canUseDOM?l.useLayoutEffect:l.useEffect,Z=n("./src/util/useragent.ts");function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne={S:l.createElement(L.a,{"aria-label":"clap"}),M:l.createElement(B,{"aria-label":"clap"}),L:l.createElement(H,{"aria-label":"clap"})},re={S:l.createElement(U.a,{"aria-label":"clap"}),M:l.createElement(z,{"aria-label":"clap"}),L:l.createElement(W,{"aria-label":"clap"})},oe={"0%":{transform:"scale(1)",opacity:1},"70%":{transform:"scale(1.4)",opacity:0},"100%":{opacity:0}},ae={left:"0",height:"100%",position:"absolute",top:"0",width:"100%"},se=function(e){var t;return t={backgroundColor:e.backgroundColor,border:"1px solid ".concat(e.baseColor.border.lighter),borderRadius:"50%",display:"flex",alignItems:"center",height:"60px",position:"relative",width:"60px"},p()(t,Object(h.c)("no-preference"),{transition:"border-color 150ms ease"}),p()(t,":hover",{borderColor:e.baseColor.border.dark}),t},ie=function(e){return{border:"1px solid ".concat(e.baseColor.border.dark)}},le={transform:"translateX(-35px)"},ce=p()({transform:"translateX(0)"},Object(h.c)("no-preference"),{transition:"transform .2s ".concat("cubic-bezier(.25,0,.6,1.4)")}),ue=p()({},":hover + .".concat("multi-vote-undo-revealed"),le),de=function(e){var t;return t={},p()(t,R.sm(e),{display:"none"}),p()(t,"border","none"),p()(t,"cursor","pointer"),p()(t,"fill",e.baseColor.fill.lighter),p()(t,"left","4px"),p()(t,"outline","none"),p()(t,"padding","0"),p()(t,"position","absolute"),p()(t,"transition","transform .3s ".concat("cubic-bezier(.25,0,.6,1.4)"," 1s")),p()(t,":hover",le),p()(t,":focus",{fill:e.baseColor.fill.dark}),p()(t,Object(h.c)("reduce"),{transitionDuration:"0.1ms !important"}),t},me=function(e,t){var n,r,o=t.baseColor.fill;return n=o.lighter,{fill:r=o.normal,":focus":{fill:e?r:n},":hover":{fill:e?r:n}}},pe=function(){return{opacity:.25,cursor:"not-allowed"}},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){return te({padding:0,outline:0,border:0,userSelect:"none",cursor:"pointer","> svg":{pointerEvents:"none"},":active":{borderStyle:e?"solid":"none"}},t?ue:null,{"-webkit-user-select":"none"})}},ge=!1;function be(e){var t=e.callback,n=e.ms,r=void 0===n?300:n,o=e.callImmediately,a=void 0===o||o,i=l.useState(!1),c=s()(i,2),u=c[0],d=c[1];Object(Q.a)(t,u?r:null);var m=l.useCallback((function(e){"touchstart"===e.type&&(ge=!0),("mousedown"!==e.type||!ge&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;return 0===e.button&&!(Object(Z.c)(t)&&e.ctrlKey)}(e))&&(a&&t(),d(!0))})),p=l.useCallback((function(){d(!1)}));return J((function(){if(u)return document.addEventListener("mouseup",p),function(){return document.removeEventListener("mouseup",p)}}),[u]),{onMouseDown:m,onTouchStart:m,onTouchEnd:p}}function he(e){var t=e.pulseOnHover,n=void 0===t||t,r=e.children,o=Object(g.useCx)();return l.createElement(f.C,{keyframes:{pulseAnimation:oe}},(function(e){var t,a=e.pulseAnimation;return l.createElement("div",{className:o([se].concat(n?(t=a,function(e){return p()({},Object(h.c)("no-preference"),{"::before":te({background:"\n      radial-gradient(circle, ".concat(e.baseColor.border.darker," 60%, transparent 70%)\n    "),borderRadius:"50%",content:'""',display:"block",zIndex:0},ae),":hover::before":{animation:"".concat(t," 2000ms infinite cubic-bezier(.1,.12,.25,1)")}})}):ie))},r)}))}function ve(e){var t=e.isSuppressed,n=e.onClick,r=Object(g.useCx)();return l.createElement("button",{className:"".concat(r([de].concat(t?ce:[]))).concat(t?"":" multi-vote-undo-revealed"),onClick:n},l.createElement(Y,null))}function Ee(e){var t=e.canUndo,n=void 0!==t&&t,r=e.isCircle,o=void 0!==r&&r,a=e.isFilled,s=void 0!==a&&a,i=e.isDisabled,c=void 0!==i&&i,u=e.isUndoSuppressed,d=void 0!==u&&u,m=e.scale,f=void 0===m?"L":m,b=e.onClickAndHold,v=e.onUndo,E=Object(g.useCx)(),x=o?function(e){return function(t){var n=me(e,t);return te({alignItems:"center",background:t.backgroundColor,borderRadius:"50%",display:"flex",justifyContent:"center",zIndex:2},ae,{},n,p()({},Object(h.c)("no-preference"),{transition:"fill ".concat(200,"ms ease")}))}}(c):function(e){return function(t){return me(e,t)}}(c),y=be({callback:b,ms:200}),O=s||c?re[f]:ne[f];return b?l.createElement(l.Fragment,null,l.createElement("button",T()({className:E([fe(o,n),x])},y),O),n&&l.createElement(ve,{onClick:v,isSuppressed:d})):l.createElement("div",{className:E([fe(o),x].concat(k()(c?[pe]:[])))},O)}function xe(e){var t=e.canUndo,n=e.isCircle,r=e.isFilled,o=e.isUndoSuppressed,a=e.disableReason,s=e.scale,i=e.onClickAndHold,c=e.onUndo,u=e.shouldHideClapsText,d={isFilled:r,scale:s},m={onClickAndHold:i},p=!!a;return p||u?l.createElement(f.z,{darkTheme:!0,popoverRenderFn:function(){return l.createElement(f.a,{padding:"8px",whiteSpace:"nowrap"},a||"Clap")},placement:"top",targetDistance:15,hideOnClick:!0},l.createElement(Ee,T()({isDisabled:p},d,{onClickAndHold:p?void 0:i}))):n?l.createElement(he,{pulseOnHover:!r},l.createElement(Ee,T()({isCircle:!0,canUndo:t,isUndoSuppressed:o,onUndo:c},d,m))):l.createElement(Ee,T()({},d,m))}var ye=n("./src/components/post/multivote/MultiVoteCount.tsx"),Oe={"0%":{transform:"matrix(0.97, 0, 0, 1, 0, 12)",opacity:"0"},"20%":{transform:"matrix(0.99, 0, 0, 1, 0, 2)",opacity:".7"},"40%":{transform:"matrix(1, 0, 0, 1, 0, -1)",opacity:"1"},"70%":{transform:"matrix(1, 0, 0, 1, 0, 0)",opacity:"1"},"100%":{transform:"matrix(1, 0, 0, 1, 0, 0)",opacity:"1"}},je={"0%":{opacity:"1",transform:"translateY(0px)"},"10%":{opacity:"1",transform:"translateY(-3px)"},"100%":{opacity:"0",transform:"translateY(-50px)"}},we={"0%":{transform:"scale(1)"},"15%":{transform:"scale(1.1)"},"100%":{transform:"scale(1)"}},_e=function(e){return function(t){return p()({backgroundColor:t.baseColor.fill.normal,bottom:"FAR"===e?"85px":"39px",color:t.backgroundColor,borderRadius:"50%",fontSize:"15px",height:"35px",left:"FAR"===e?"12px":"-4px",lineHeight:"35px",position:"absolute",textAlign:"center",width:"35px"},Object(h.c)("reduce"),{animationDuration:"0.1ms !important"})}},Se=function(e,t){var n=e.current;n&&(n.style.animation=t,n.scrollTop)};function Pe(e){var t=e.clappedAt,n=e.count,r=e.onFloatEnd,o=e.placement,a=Object(g.useCx)(),i=l.useState(t),c=s()(i,2),u=c[0],d=c[1],m=t!==u,p=l.useRef({enter:"",exit:"",pop:""}),b=l.useRef(null),h=l.useCallback((function(e){b.current=e,e&&Se(b,"".concat(p.current.enter," ").concat("400ms ease-out"))}),[]);function v(e){var t=p.current;e.animationName===t.enter||e.animationName===t.pop?Se(b,"".concat(t.exit," ").concat("400ms ease-out 500ms")):e.animationName===t.exit&&r()}return m&&(Se(b,""),Se(b,"".concat(p.current.pop," ").concat("500ms")),d(t)),l.createElement(f.C,{keyframes:{enter:Oe,exit:je,pop:we}},(function(e){return p.current=e,l.createElement("div",{ref:h,className:a([_e(o)]),onAnimationEnd:v},"+".concat(n))}))}var Ce={"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.1)"},"100%":{transform:"scale(1)"}};function ke(e){var t=e.isPopping,n=void 0!==t&&t,r=e.onPopEnd,o=e.children,a=Object(g.useCx)();return l.createElement(f.C,{keyframes:{popAnimation:Ce}},(function(e){var t,s=e.popAnimation;return l.createElement("div",{className:n?a((t=s,p()({animation:"".concat(t," 500ms 1")},Object(h.c)("reduce"),{animationDuration:"0.1ms"}))):"",onAnimationEnd:r},o)}))}var Ie=n("./src/components/session/useViewer.tsx"),Te=n("./src/components/style/BaseThemeProvider.tsx"),Re=n("./src/components/susi/SusiClickable.tsx"),Le=n("./src/framework/reporter/index.ts"),Ae=n("./src/framework/source/index.ts"),Me=n("./src/store/actions/multiVote.ts"),Be=n("./src/util/post/claps.ts"),De=n("./src/util/routes.ts");function Ne(){var e=o()(["\n  fragment MultiVote_post on Post {\n    id\n    clapCount\n    creator {\n      id\n      ...SusiClickable_user\n    }\n    viewerClapCount\n    isPublished\n    ...SusiClickable_post\n    collection {\n      id\n      slug\n    }\n    isLimitedState\n    ...MultiVoteCount_post\n  }\n  ","\n  ","\n  ","\n"]);return Ne=function(){return e},e}var He={SUBTLE:"S",SUBTLE_PADDED:"M",OBVIOUS:"L",SUBTLE_FOR_DESKTOP:"L"},Ue=function(e){var t,n=e.post,r=e.buttonStyle,o=e.hasDialog,a=e.shouldShowResponsiveLabelText,i=void 0!==a&&a,c=e.shouldHideClapsText,m=void 0!==c&&c,p=Object(d.b)(),g=Object(Ie.b)().value,b=null!==(t=null==g?void 0:g.id)&&void 0!==t?t:"",h=Object(u.f)((function(e){return e.multiVote.clapsPerPost})),v=Object(u.e)(),E=l.useCallback((function(e){return v(Object(Me.d)(e))}),[v]),x=l.useCallback((function(e){return v(Object(Me.c)(e))}),[v]),y=l.useState(),O=s()(y,2),j=O[0],w=O[1],_=l.useState(0),S=s()(_,2),C=S[0],k=S[1],I=l.useState([]),T=s()(I,2),R=T[0],L=T[1],A=l.useState(!1),M=s()(A,2),B=M[0],D=M[1],N=l.useState(!1),H=s()(N,2),U=H[0],F=H[1],V=l.useState(0),z=s()(V,2),q=z[0],G=z[1],W=Object(Be.a)(h,n),$=W.clapCount,K=W.viewerClapCount,Y=W.viewerHasClappedSinceFetch,Q=Object(Le.c)(),X=Object(Ae.d)();function J(e){L(R.filter((function(t){return t!==e})))}function Z(){p(n,b,C),k(0),Q.event("post.clientUpvote",{postId:n.id,postIds:[n.id],voteCount:C,source:X})}l.useEffect((function(){if(j&&clearTimeout(j),0!==C){var e=setTimeout(Z,500);w(e)}else w(void 0)}),[C]),l.useEffect((function(){return function(){x({postId:n.id})}}),[]);var ee,te=n.collection,ne=n.creator,re=n.id,oe=n.isPublished,ae=n.isLimitedState,se=(ee=!(!ne||ne.id!==b),ae?"This feature is temporarily disabled.":oe?ee?"You cannot applaud your own story.":void 0:"You cannot applaud a draft."),ie="OBVIOUS"===r,le="SUBTLE_FOR_DESKTOP"===r,ce=le||i,ue=ce||ie,de=!!(K&&K>0),me=!!($&&$>0),pe=He[r],fe=te&&te.slug?Object(De.qc)(te.slug,re):Object(De.pc)(re),ge={marginRight:le?void 0:ie&&!se?"16px":"5px"},be={marginLeft:ie&&!se?"16px":"8px"},he={marginLeft:le?"7px":void 0,marginTop:le?"8px":"5px"},ve={marginRight:"8px",marginTop:"2px"};return l.createElement(f.a,{display:"flex",alignItems:le?"flex-start":"center"},l.createElement(f.a,{xs:be,sm:be,md:ge,lg:ge,xl:ge,position:"relative"},b||se?l.createElement(l.Fragment,null,B&&l.createElement(Te.b,null,l.createElement(Pe,{count:K,clappedAt:q,placement:ie?"FAR":"NEAR",onFloatEnd:function(){D(!1)}})),l.createElement(ke,{isPopping:U,onPopEnd:function(){F(!1)}},l.createElement(xe,{scale:pe,canUndo:de,isCircle:ie,isFilled:de,isUndoSuppressed:R.length>0,disableReason:se,onClickAndHold:function(){for(var e=360*Math.random();-1!==R.indexOf(e);)e+=360;L(R.concat(e)),G(Date.now()),D(!0),F(!0),function(){if(K&&K>=50)return;E({postId:n.id,clapCount:$+1,viewerClapCount:K+1,viewerHasClappedSinceFetch:!0}),k(C+1)}()},onUndo:function(){K&&(p(n,b,-K),E({postId:n.id,clapCount:$-K,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),k(0),Q.event("post.clientUnvote",{postId:n.id,postIds:[n.id],unvoteCount:K,source:X}))},shouldHideClapsText:m})),R.map((function(e){return l.createElement(P,{key:e,isLarge:ie,offset:e,onBurstEnd:J})}))):l.createElement(Re.a,{operation:"register",post:n,user:n.creator,actionUrl:fe},l.createElement(xe,{isCircle:ie,scale:pe}))),me&&(!B||ce)&&l.createElement(f.a,{xs:ve,sm:ve,md:he,lg:he,xl:he},l.createElement(ye.a,{shouldShowNetwork:ie,post:n,clapCount:$,showFullNumber:Y,hasLabel:ue,hasDialog:o,shouldShowResponsiveLabelText:le||i,shouldHideClapsText:m})))},Fe=Object(i.gql)(Ne(),Re.d,Re.f,ye.b),Ve=function(e){var t;return l.createElement(Ae.b,{source:{postId:null===(t=e.post)||void 0===t?void 0:t.id},extendSource:!0},l.createElement(Ue,e))}},"./src/components/post/multivote/MultiVoteCount.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return ne}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/pluralize/pluralize.js"),c=n.n(l),u=n("./node_modules/react/index.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/extends.js"),p=n.n(m),f=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),g=n.n(f),b=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),h=n.n(b),v=n("./node_modules/@babel/runtime/regenerator/index.js"),E=n.n(v),x=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),y=n.n(x),O=n("./node_modules/lodash/merge.js"),j=n.n(O),w=n("./node_modules/@apollo/client/react/components/index.js"),_=n("./node_modules/react-redux/es/index.js"),S=n("./src/components/user/UserAvatar.tsx"),P=n("./src/components/user/UserFollowButton.tsx"),C=n("./src/framework/design-system/components/index.ts"),k=n("./src/framework/design-system/type/index.ts"),I=n("./src/framework/design-system/type/useTypeRules.ts");function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var R=d.a.createElement("g",{fillRule:"evenodd"},d.a.createElement("path",{d:"M7.94 1h-.89L7.5 2.9zM10.09 1.33l-.84-.3-.23 1.95zM5.73 1.04l-.84.3L5.97 3zM5.63 11.57a3043.52 3043.52 0 0 0-1.6-1.6C2.32 8.26 1.25 7.5 1.75 7c.25-.25.62-.3.93 0 .45.46 1.54 1.65 1.54 1.65a.69.69 0 0 0 .34.2c.17.04.36-.06.5-.2.14-.13.06-.47-.06-.6L2.94 5.98c-.29-.29-.39-.78-.08-1.09.3-.29.64-.14.9.12l2.1 2.15a.33.33 0 0 0 .24.1.42.42 0 0 0 .26-.12c.13-.12.2-.36.07-.49L5 5.2c-.56-.56-.6-.95-.36-1.2.35-.35.82-.24 1.45.48l2.8 2.95-.59-1.46s-.37-.97 0-1.17c.37-.2.74.33 1 .72l1.37 2.62a3.29 3.29 0 0 1-.57 4.05c-1.22 1.22-3.18.69-4.48-.6z"}),d.a.createElement("path",{d:"M11.37 4.73c-.26-.4-.7-.4-.98-.19-.19.15-.16.48-.15.7l1.18 2.07c.91 1.49 1.23 2.7.19 4.1.31-.14.4-.27.58-.49.65-.8 1.05-2.47.39-3.88a3.35 3.35 0 0 0-.03-.05l-1.18-2.26z"})),L=function(e){return d.a.createElement("svg",T({width:15,height:15},e),R)},A=n("./src/util/routes.ts");function M(){var e=o()(["\n  query PostVotersDialogQuery($postId: ID!, $pagingOptions: PagingOptions) {\n    post(id: $postId) {\n      id\n      title\n      clapCount\n      voterCount\n      voters(paging: $pagingOptions) {\n        items {\n          user {\n            id\n            username\n            name\n            bio\n            ...UserAvatar_user\n            ...UserFollowButton_user\n          }\n          clapCount\n        }\n        pagingInfo {\n          next {\n            page\n          }\n        }\n      }\n      ...UserFollowButton_post\n    }\n  }\n  ","\n  ","\n  ","\n"]);return M=function(){return e},e}var B=function(e){return{position:"relative",bottom:"12px",borderRadius:"10px",color:e.backgroundColor,fill:e.backgroundColor,background:e.accentColor.fill.normal,textAlign:"center"}},D={left:"20px",padding:"0 6px"},N={left:"24px",padding:"0 2px"},H=function(e){var t=e.clapCount,n=Object(I.a)({name:"detail",color:"DARKER",scale:"S"}),r=t?[n,B,D]:[B,N];return u.createElement(C.B,null,(function(e){return u.createElement("span",{className:e(r)},t?"+".concat(t):u.createElement(L,null))}))},U=function(e){var t=e.user,n=e.clapCount,r=e.post,o=Object(_.f)((function(e){return e.config.authDomain})),a=t.username,s=t.name,i=t.hasDomain,l=t.bio,c=void 0===l?"":l;return s&&a?u.createElement(C.a,{padding:"12px 0"},u.createElement(C.a,{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},u.createElement(C.a,{display:"flex",alignItems:"flex-start"},u.createElement(C.a,{marginRight:"20px"},u.createElement(S.d,{user:t,scale:"S"}),u.createElement(H,{clapCount:n})),u.createElement(C.a,{display:"flex",flexDirection:"column",alignItems:"flex-start"},u.createElement(C.m,{href:Object(A.Ac)(a,o,i)},u.createElement(k.c,{scale:"XS"},s," ")),u.createElement(k.b,{scale:"S"},c))),u.createElement(C.a,{marginLeft:"48px"},u.createElement(P.a,{buttonSize:"SMALL",post:r,user:t})))):null},F=function(e){var t=e.isVisible,n=e.hide,r=e.post,o=e.fetchMore,a=u.useState(!1),s=y()(a,2),i=s[0],l=s[1],c=u.useCallback((function(){return E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||i){e.next=8;break}return l(!0),e.prev=2,e.next=5,E.a.awrap(o());case 5:return e.prev=5,l(!1),e.finish(5);case 8:case"end":return e.stop()}}),null,null,[[2,,5,8]])}),[o,i,l]);if(!r)return null;var d=r.title,m=r.voters,p=r.clapCount,f=r.voterCount;return u.createElement(C.g,{isVisible:t,hide:n,withAnimation:!0},u.createElement(C.a,{maxWidth:"550px",sm:{paddingTop:"0"},paddingTop:"88px"},u.createElement(C.a,{display:"flex",flexDirection:"column",marginBottom:"24px",textAlign:"center"},u.createElement(k.c,{scale:"S"},p," claps from ",f," ",1===f?"person":"people",' for "',d,'"')),m&&m.items.map((function(e){var t=e.user,n=e.clapCount;return t&&u.createElement(U,{user:t,clapCount:n,post:r,key:t.id})})),o&&u.createElement(C.a,{display:"flex",flexDirection:"column",margin:"24px",alignItems:"center"},u.createElement(C.b,{buttonStyle:"SOCIAL",size:"SMALL",onClick:c},"Show more claps"))))};function V(e){var t=e.postId,n=e.isVisible,r=h()(e,["postId","isVisible"]);return n?u.createElement(w.Query,{ssr:!1,query:z,variables:{postId:t,pagingOptions:{limit:10}}},(function(e){var t,o=e.data,a=(o=void 0===o?{}:o).post,s=e.loading,i=e.error,l=e.fetchMore;if(s)return u.createElement(C.n,null);if(i||!(null==a?void 0:a.voters))return null;var c=a.voters.pagingInfo&&a.voters.pagingInfo.next;if(c){var d={page:c.page};t=function(){return l({variables:{pagingOptions:d},updateQuery:function(e,t){var n,r,o,a,s,i,l=t.fetchMoreResult;return j()({},l,{post:{voters:{items:[].concat(g()(null!==(n=null==e||null===(r=e.post)||void 0===r||null===(o=r.voters)||void 0===o?void 0:o.items)&&void 0!==n?n:[]),g()(null!==(a=null==l||null===(s=l.post)||void 0===s||null===(i=s.voters)||void 0===i?void 0:i.items)&&void 0!==a?a:[]))}}})}})}}return u.createElement(F,p()({isVisible:n,post:a,loading:s,fetchMore:t},r))})):null}var z=Object(i.gql)(M(),S.b,P.c,P.b),q=n("./src/util/numbers.ts");function G(){var e=o()(["\n  fragment PostVotersNetwork_post on Post {\n    voterCount\n    viewerClapCount\n    recommenders {\n      name\n    }\n  }\n"]);return G=function(){return e},e}var W=function(e){var t=e.post,n=e.showVoters,r=(t.viewerClapCount?[{name:"you"}]:[]).concat(t.recommenders||[]).slice(0,2).map((function(e){return e.name}));if(!r.length)return null;var o=(t.voterCount||0)-r.length,a=r.join(o>0?", ":" and "),s="".concat(r.length>1?",":""," and"),i=c()("other",o),l=o>0?"".concat(s," ").concat(Object(q.g)(o)," ").concat(i):"";return u.createElement(C.a,{sm:{display:"none"}},u.createElement(C.m,{onClick:n},u.createElement(k.b,{scale:"S"},"Applause from ".concat(a).concat(l))))},$=Object(i.gql)(G()),K=n("./src/components/responses/MobileHideSpan.tsx"),Y=n("./src/framework/design-system/components/util/VisibilityController.tsx"),Q=n("./src/framework/design-system/type/Detail.tsx"),X=n("./src/framework/style/index.ts");function J(){var e=o()(["\n  fragment MultiVoteCount_post on Post {\n    id\n    ...PostVotersNetwork_post\n  }\n  ","\n"]);return J=function(){return e},e}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=e.clapCount,n=e.hasLabel,r=void 0!==n&&n,o=e.showFullNumber,a=void 0!==o&&o,s=e.post,i=e.shouldShowNetwork,l=e.hasDialog,d=void 0!==l&&l,m=e.shouldShowResponsiveLabelText,p=void 0!==m&&m,f=e.shouldHideClapsText,g=void 0!==f&&f,b=s.id;if(!(t>0))return null;var h=r&&!g?c()("clap",t):"",v=function(e){var t=e.showVoters;return i&&t?u.createElement(W,{showVoters:t,post:s}):null},E=a?Object(q.g)(t):Object(q.d)(t),x=function(e){var t=e.showVoters,n=Object(X.useCx)();return u.createElement("div",{className:n(ee({},p||r?{position:"relative",top:"1px"}:{},{"& button":{textAlign:"left"}}))},u.createElement(Q.a,{color:p||r||g?"DARKER":"LIGHTER",scale:"M"},p?u.createElement(u.Fragment,null,t?u.createElement(C.m,{onClick:t},E,u.createElement(K.a,null," ",h)):E,u.createElement(K.a,null,u.createElement(v,{showVoters:t}))):u.createElement(u.Fragment,null,t?u.createElement(C.m,{onClick:t},E," ",h):E,u.createElement(v,{showVoters:t}))))};return d&&b?u.createElement(Y.a,null,(function(e){var t=e.isVisible,n=e.show,r=e.hide;return u.createElement(u.Fragment,null,u.createElement(x,{showVoters:n}),u.createElement(V,{isVisible:t,hide:r,postId:b}))})):u.createElement(x,null)}var ne=Object(i.gql)(J(),$)},"./src/components/publisher/CardByline.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"c",(function(){return T})),n.d(t,"e",(function(){return R})),n.d(t,"b",(function(){return L})),n.d(t,"d",(function(){return A}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/components/collection/BoldCollectionName.tsx"),c=n("./src/components/collection/package/interim-components/ClickableWrapper.tsx"),u=n("./src/components/format/Date.tsx"),d=n("./node_modules/date-fns/index.js");function m(e){var t=e.hasPrefix,n=void 0!==t&&t,r=e.timestamp,o=Date.now(),a=Object(d.differenceInHours)(o,r);if(0===a)return n?"just now":"Just now";if(a>=1&&a<24)return"".concat(a," hour").concat(a>1?"s":""," ago");var s=Object(d.differenceInDays)(o,r);return s>=1&&s<7?"".concat(s," day").concat(s>1?"s":""," ago"):Object(u.a)({timestamp:r})}var p=n("./src/components/post/DraftStatus.tsx"),f=n("./src/components/ui/Byline.tsx"),g=n("./src/framework/design-system/type/index.ts"),b=n("./src/framework/design-system/util/style/responsiveStyles.ts"),h=n("./src/framework/style/index.ts"),v=n("./src/svg/star-15px.svg"),E=n("./src/util/routes.ts");function x(){var e=o()(["\n  fragment CardByline_publisher on Publisher {\n    __typename\n    ... on User {\n      id\n      ...CardByline_user\n    }\n    ... on Collection {\n      id\n      ...CardByline_collection\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}function y(){var e=o()(["\n  fragment CardByline_collection on Collection {\n    __typename\n    id\n    name\n    ...collectionUrl_collection\n  }\n  ","\n"]);return y=function(){return e},e}function O(){var e=o()(["\n  fragment CardByline_user on User {\n    __typename\n    id\n    name\n    username\n    hasDomain\n  }\n"]);return O=function(){return e},e}function j(){var e=o()(["\n  fragment CardByline_post on Post {\n    ...DraftStatus_post\n  }\n  ","\n"]);return j=function(){return e},e}var w=function(e){return{fill:e.baseColor.fill.light,marginTop:"-2px",paddingLeft:"4px"}};function _(e,t){return t&&Object(b.a)(e)?e[t]:e}var S=function(e){var t=e.author,n=e.forceSize,r=e.scale,o=void 0===r?"M":r,a=Object(i.f)((function(e){return e.config.authDomain}));return(null==t?void 0:t.username)?s.createElement(c.a,{href:Object(E.Ac)(t.username,a,t.hasDomain)},s.createElement(g.b,{color:"ACCENT",scale:_(o,n)},t.name)):null},P=function(e){var t=e.collection,n=e.forceSize,r=e.scale,o=void 0===r?"M":r,a=Object(i.f)((function(e){return{authDomain:e.config.authDomain,currentLocation:e.navigation.currentLocation}})),u=a.authDomain,d=a.currentLocation;if(!t)return null;var m=Object(E.K)(t,d,u);return s.createElement(c.a,{href:m},s.createElement(g.b,{scale:_(o,n),color:"DARKER"},"Published in ",s.createElement(l.a,{collection:t})))},C=function(e){var t=e.small,n=void 0!==t&&t,r=e.hideDot,o=void 0!==r&&r,a=Object(h.useCx)();return s.createElement("span",{className:a({margin:"0 ".concat(n?4:7,"px")})},o?null:"·")},k=function(e){var t=e.datePrefix,n=void 0===t?"":t,r=e.forceSize,o=e.isOneLine,a=e.withMidDot,i=void 0===a||a,l=e.href,d=e.onClick,f=e.publishedAt,b=e.scale,E=void 0===b?"M":b,x=e.showStar,y=void 0!==x&&x,O=e.timeColor,j=void 0===O?"LIGHTER":O,S=e.timeToRead,P=e.post,k=Object(h.useCx)();if(!f&&!S)return null;var I=o?m:u.a;return s.createElement(c.a,{href:l,onClick:d},s.createElement(g.b,{color:j,scale:_(E,r)},o&&i&&s.createElement(C,{small:!0,hideDot:!!S&&!!f}),f?s.createElement(s.Fragment,null,n,s.createElement(I,{hasPrefix:!(!o||!n)||void 0,timestamp:f})):null,f&&S?s.createElement(C,null):null,S||null,!f&&s.createElement(s.Fragment,null,s.createElement(C,{small:o}),s.createElement(g.b,{color:"DARKER",scale:_(E,r),tag:"span"},s.createElement(p.a,{post:P}))),y&&s.createElement(v.a,{className:k(w)})))},I=function(e){var t=e.avatar,n=void 0===t?null:t,r=e.datePrefix,o=e.forceSize,a=e.hideAuthor,i=void 0!==a&&a,l=e.href,c=e.onClick,u=e.isOneLine,d=void 0!==u&&u,m=e.publisher,p=e.publishedAt,g=e.scale,b=e.showStar,h=void 0!==b&&b,v=e.timeColor,E=e.timeToRead,x=e.post,y="Collection"===m.__typename?s.createElement(P,{collection:m,forceSize:o,scale:g}):i?null:s.createElement(S,{author:m,forceSize:o,scale:g}),O="Collection"===m.__typename||!i;return s.createElement(f.a,{avatar:i?null:n,isOneLine:d,title:y,description:s.createElement(k,{datePrefix:r,publishedAt:p,timeToRead:E,withMidDot:O,href:l,onClick:c,showStar:h,forceSize:o,scale:g,timeColor:v,isOneLine:d,post:x})})},T=Object(a.gql)(j(),p.b),R=Object(a.gql)(O()),L=Object(a.gql)(y(),E.L),A=Object(a.gql)(x(),R,L)},"./src/components/publisher/MetaHeader.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return ne})),n.d(t,"c",(function(){return re})),n.d(t,"b",(function(){return oe})),n.d(t,"d",(function(){return ae}));var r,o,a,s,i,l,c=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),u=n.n(c),d=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/extends.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/typeof.js"),b=n.n(g),h=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(h),E=n("./node_modules/lodash/merge.js"),x=n.n(E),y=n("./node_modules/@apollo/client/index.js"),O=n("./node_modules/react/index.js"),j=n("./node_modules/react-redux/es/index.js"),w=n("./src/components/metabar/Logo.tsx"),_=n("./src/components/metabar/MetabarActions.tsx"),S=n("./src/components/metabar/MetabarActionsLO.tsx"),P=n("./src/components/metabar/OpenInApp.tsx"),C=n("./src/components/metabar/constants.ts"),k=n("./src/components/navigation/Anchor.tsx"),I=n("./src/components/publisher/MetaHeaderBackground.tsx"),T=n("./src/components/publisher/MetaHeaderEngagement.tsx"),R=n("./src/components/publisher/MetaHeaderLogo.tsx"),L=n("./src/components/publisher/MetaHeaderTagline.tsx"),A=n("./src/components/publisher/MetaHeaderThemeProvider.tsx"),M=n("./src/components/publisher/MetaHeaderV2.tsx"),B=n("./src/components/publisher/publisherHelpers.tsx"),D=n("./src/components/publisher/theming/defaultStyleSheet.ts"),N=n("./src/components/session/useFlag.tsx"),H=n("./src/components/session/useViewer.tsx"),U=n("./src/framework/design-system/components/index.ts"),F=n("./src/framework/style/index.ts"),V=n("./src/metadata/Favicon.tsx"),z=n("./src/schema-types/globalTypes.ts"),q=n("./src/styles/zIndex.ts");function G(){var e=m()(["\n  fragment MetaHeader_post on Post {\n    id\n    ...MetabarActions_post\n    ...MetabarActionsLO_post\n    ...MetaHeaderV2_post\n  }\n  ","\n  ","\n  ","\n"]);return G=function(){return e},e}function W(){var e=m()(["\n  fragment MetaHeader_customStyleSheet on CustomStyleSheet {\n    id\n    ...MetaHeaderBackground_customStyleSheet\n    ...MetaHeaderLogo_customStyleSheet\n    ...MetaHeaderTagline_customStyleSheet\n    ...MetaHeaderThemeProvider_customStyleSheet\n    ...MetaHeaderV2_customStyleSheet\n    header {\n      nameTreatment\n      headerScale\n      horizontalAlignment\n      logoScale\n      backgroundColor {\n        rgb\n      }\n      backgroundImage {\n        id\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return W=function(){return e},e}function $(){var e=m()(["\n  fragment MetaHeader_publisher on Publisher {\n    __typename\n    name\n    ... on Collection {\n      id\n      description\n      favicon {\n        id\n      }\n      shortDescription\n      slug\n      tagline\n    }\n    ... on User {\n      id\n      username\n      bio\n      hasDomain\n    }\n    ...MetabarActions_publisher\n    ...MetaHeaderEngagement_publisher\n    ...MetaHeaderLogo_publisher\n    ...MetaHeaderTagline_publisher\n    ...MetaHeaderThemeProvider_publisher\n    ...MetaHeaderV2_publisher\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return $=function(){return e},e}var K=function(e,t){return t!==z.j.NAME_TREATMENT_TEXT?e?"60px":"104px":e?"50px":"90px"},Y={xs:"235px",sm:"235px",md:"235px",lg:"295px",xl:"295px"},Q=(r={},v()(r,z.e.HEADER_SCALE_SMALL,"0px"),v()(r,z.e.HEADER_SCALE_MEDIUM,Y),v()(r,z.e.HEADER_SCALE_LARGE,Y),r),X=(o={},v()(o,z.a.START,"flex-start"),v()(o,z.a.END,"flex-end"),v()(o,z.a.CENTER,"center"),o),J=(a={},v()(a,z.a.START,"left"),v()(a,z.a.END,"right"),v()(a,z.a.CENTER,"center"),a),Z=(s={},v()(s,z.e.HEADER_SCALE_LARGE,"12px"),v()(s,z.e.HEADER_SCALE_MEDIUM,"8px"),v()(s,z.e.HEADER_SCALE_SMALL,"8px"),s),ee=(i={},v()(i,z.e.HEADER_SCALE_LARGE,"48px"),v()(i,z.e.HEADER_SCALE_MEDIUM,"36px"),v()(i,z.e.HEADER_SCALE_SMALL,"24px"),i),te=(l={},v()(l,z.e.HEADER_SCALE_LARGE,"24px"),v()(l,z.e.HEADER_SCALE_MEDIUM,"20px"),v()(l,z.e.HEADER_SCALE_SMALL,"16px"),l),ne=function(e){var t,n,r,o,a,s,i,l,c,u=e.publisher,d=e.customStyleSheet,m=e.post,p=e.forceSmall,g=void 0!==p&&p,h=e.headerLink,E=void 0!==h&&h,y=e.hideAboutLink,G=void 0!==y&&y,W=!!Object(N.a)("enable_meta_header_v2"),$=Object(D.b)(),Y=g?z.e.HEADER_SCALE_SMALL:null!==(t=null==d||null===(n=d.header)||void 0===n?void 0:n.headerScale)&&void 0!==t?t:$.headerScale,ne=Y===z.e.HEADER_SCALE_SMALL?z.a.CENTER:z.a.END,re=null!==(r=null==d||null===(o=d.header)||void 0===o?void 0:o.horizontalAlignment)&&void 0!==r?r:$.horizontalAlignment,oe=Object(j.f)((function(e){return e.config.authDomain})),ae=Object(j.f)((function(e){return e.config.isAmp})),se=Object(H.b)().value,ie=function(e,t){var n,r,o,a=!!(null==e||null===(n=e.header)||void 0===n?void 0:n.backgroundColor)||t&&!!(null==e||null===(r=e.header)||void 0===r?void 0:r.postBackgroundColor),s=!!(null==e||null===(o=e.header)||void 0===o?void 0:o.backgroundImage);return!a&&!s}(d,g),le=(null==d||null===(a=d.header)||void 0===a?void 0:a.logoImage)||null,ce=null==d||null===(s=d.header)||void 0===s?void 0:s.logoScale,ue=null!==(i=null==d||null===(l=d.header)||void 0===l?void 0:l.nameTreatment)&&void 0!==i?i:$.nameTreatment,de=Object(L.d)(d,u).isTaglineVisible,me=O.useMemo((function(){return function(e,t,n,r){return function(o){return{display:"flex",flexGrow:"1",flexDirection:"column",overflow:"hidden",transition:"min-height ".concat(600,"ms"),minHeight:Q[e],textAlign:J[t],alignItems:X[t],justifyContent:X[n],paddingTop:{xs:"24px",sm:"24px",md:"32px",lg:"32px",xl:"32px"},paddingBottom:{xs:"24px",sm:"24px",md:"32px",lg:"32px",xl:"32px"},borderBottom:r?void 0:"1px solid ".concat(o.baseColor.border.normal)}}}(Y,re,ne,!ie)}),[Y,re,ne,ie]),pe=Object(B.f)(u,oe),fe="".concat(Object(B.a)(u)," Homepage"),ge=re!==z.a.START||de,be=ue===z.j.NAME_TREATMENT_LOGO&&!!le,he=ge?"marginBottom":"marginRight",ve=ce||$.logoScale,Ee=function(e){return ue===z.j.NAME_TREATMENT_TEXT?{xs:v()({},e,Z[ve]),sm:v()({},e,Z[ve]),md:v()({},e,ee[ve]),lg:v()({},e,ee[ve]),xl:v()({},e,ee[ve])}:v()({},e,te[ve])},xe=X[re],ye=O.useMemo((function(){return x()({},Ee("marginTop"),Ee("marginBottom"))}),[]);return W?O.createElement(M.a,{publisher:u,customStyleSheet:d,post:m,forceSmall:g,headerLink:E,hideAboutLink:G}):O.createElement(O.Fragment,null,"Collection"===u.__typename&&O.createElement(V.a,{faviconImageId:null==u||null===(c=u.favicon)||void 0===c?void 0:c.id}),O.createElement(A.a,{publisher:u,customStyleSheet:d,withAltBackground:g},O.createElement(I.a,{customStyleSheet:d,withAltBackground:g},O.createElement(F.WithCx,null,(function(e){return O.createElement(U.o,null,O.createElement(U.a,{display:"flex",alignItems:"center",height:"".concat(C.a,"px"),sm:{display:"flex",height:"".concat(C.c,"px")}},O.createElement(U.a,{display:"flex",alignItems:"center",flexGrow:"1",zIndex:q.a.metabar},O.createElement(k.a,{href:"https://".concat(oe,"/"),ariaLabel:"Homepage"},O.createElement(w.a,{contrast:ie?"dark":"normal"})),Y===z.e.HEADER_SCALE_SMALL&&O.createElement(U.a,{display:"flex",alignItems:"center",sm:{display:"none"}},O.createElement(U.a,{marginTop:"1px",marginLeft:"16px",marginRight:"16px"},O.createElement(w.d,null)),O.createElement(k.a,{href:pe,"aria-label":fe},O.createElement(R.a,{customStyleSheet:d,publisher:u,withAltNameTreatment:g,withTextColorSubtle:ie,withCustomSizing:!1})),!g&&O.createElement(U.a,{marginLeft:"16px"},O.createElement(T.a,{publisher:u}))),se?O.createElement(P.a,{postId:m&&m.id,collectionSlug:"Collection"===u.__typename?u.slug:void 0,username:"Collection"===u.__typename?void 0:u.username}):null),O.createElement(U.a,{flexGrow:"0",zIndex:q.a.metabar},ae?O.createElement(S.a,{withoutConversionButton:!0,post:m,publisher:u,hideAboutLink:G}):O.createElement(_.c,{post:m,publisher:u,withoutConversionButton:!0,hideAboutLink:G,setIsMetabarLocked:function(){}}))),Y===z.e.HEADER_SCALE_SMALL&&O.createElement(U.a,{display:"none",sm:{display:"flex",height:"".concat("NAME_TREATMENT_TEXT"===ue?"50px":"60px"),alignItems:"center"},xs:{flexDirection:"column",alignItems:"flex-start",height:K(g,ue),justifyContent:g?"center":"space-evenly"}},O.createElement(k.a,{href:pe,"aria-label":fe},O.createElement(R.a,{customStyleSheet:d,publisher:u,withAltNameTreatment:g,withTextColorSubtle:ie,withCustomSizing:!1})),!g&&O.createElement(U.a,{xs:{marginBottom:"".concat("NAME_TREATMENT_TEXT"===ue?"4px":"0"),marginTop:"".concat("NAME_TREATMENT_TEXT"===ue?"0":"4px"),marginLeft:"0"},sm:{marginLeft:"16px"}},O.createElement(T.a,{publisher:u}))),Y!==z.e.HEADER_SCALE_SMALL&&O.createElement("div",{className:e(me)},O.createElement(U.a,{display:"flex",flexDirection:ge?"column":"row",flexWrap:"wrap",alignItems:ge?xe:"center"},O.createElement(U.a,f()({display:"flex",flexDirection:ge?"column":"row",alignItems:ge?xe:"center"},Ee(he),function(e,t){var n=e?Object(R.d)(t,e,W):{};return be&&n&&n.width&&"object"===b()(n.width)&&"xl"in n.width?{maxWidth:n.width.xl}:{maxWidth:"100%"}}(le,null!=ce?ce:$.logoScale)),E?O.createElement(k.a,{href:pe,"aria-label":fe},O.createElement(R.a,{customStyleSheet:d,publisher:u,withAltNameTreatment:g,withTextColorSubtle:!1,withCustomSizing:!0})):O.createElement(R.a,{customStyleSheet:d,publisher:u,withAltNameTreatment:g,withTextColorSubtle:!1,withCustomSizing:!0}),de&&O.createElement(U.a,{paddingTop:be?"16px":"8px",minWidth:"300px",maxWidth:"80%"},O.createElement(L.a,{customStyleSheet:d,publisher:u,color:ie?"LIGHTER":"DARKER"}))),O.createElement(U.a,ge?{}:ye,O.createElement(T.a,{publisher:u,isSizeResponsive:!0})))))})))))},re=Object(y.gql)($(),_.b,T.b,R.c,L.c,A.c,M.d),oe=Object(y.gql)(W(),I.b,R.b,L.b,A.b,M.b),ae=(Object(y.gql)(G(),_.a,S.b,M.c),function(e){var t,n=O.useState(!1),r=u()(n,2),o=r[0],a=r[1];return O.useEffect((function(){var t;if(null==e||null===(t=e.header)||void 0===t?void 0:t.headerScale){a(!0);var n=setTimeout((function(){a(!1)}),600);return function(){n&&clearTimeout(n)}}}),[null==e||null===(t=e.header)||void 0===t?void 0:t.headerScale]),o})},"./src/components/publisher/MetaHeaderBackground.tsx":function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return P}));var r,o=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),a=n.n(o),s=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(s),l=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),c=n.n(l),u=n("./node_modules/@apollo/client/index.js"),d=n("./node_modules/react/index.js"),m=n("./node_modules/react-helmet-async/lib/index.module.js"),p=n("./src/components/collection/theming/customStyleSheet.ts"),f=n("./src/components/publisher/theming/defaultStyleSheet.ts"),g=n("./src/framework/style/index.ts"),b=n("./src/schema-types/globalTypes.ts"),h=n("./src/util/miroImage.ts");function v(){var e=a()(["\n  fragment MetaHeaderBackground_customStyleSheet on CustomStyleSheet {\n    id\n    header {\n      headerScale\n      backgroundImageDisplayMode\n      backgroundImageVerticalAlignment\n      backgroundColorDisplayMode\n      backgroundColor {\n        ...getHexFromColorValue_colorValue\n        ...getOpaqueHexFromColorValue_colorValue\n      }\n      secondaryBackgroundColor {\n        ...getHexFromColorValue_colorValue\n      }\n      postBackgroundColor {\n        ...getHexFromColorValue_colorValue\n      }\n      backgroundImage {\n        ...MetaHeaderBackground_imageMetadata\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function E(){var e=a()(["\n  fragment MetaHeaderBackground_imageMetadata on ImageMetadata {\n    id\n    originalWidth\n  }\n"]);return E=function(){return e},e}var x=(r={},c()(r,b.a.START,"top"),c()(r,b.a.END,"bottom"),c()(r,b.a.CENTER,"center"),r),y=function(e,t){return Object(h.d)({miroId:e.id,width:t||e.originalWidth||2e3,strategy:h.a.Resample,freezeGifs:!1})},O=function(e,t){var n=(e||{}).header,r=t?Object(p.k)(null==n?void 0:n.postBackgroundColor):null,o=t?Object(p.m)(null==n?void 0:n.backgroundColor):Object(p.k)(null==n?void 0:n.backgroundColor);return{altHex:r,primaryHex:o,backgroundColor:r||o}},j=function(e,t){var n,r,o=(e||{}).header,a=Object(f.b)(),s=null!==(n=null==e||null===(r=e.header)||void 0===r?void 0:r.headerScale)&&void 0!==n?n:a.headerScale;return t||s===b.e.HEADER_SCALE_SMALL?null:null==o?void 0:o.backgroundImage},w=function(e,t){var n,r,o,a,s,l,c,u,m,g=(e||{}).header,h=Object(f.b)(),v=null!==(n=null==e||null===(r=e.header)||void 0===r?void 0:r.backgroundImageDisplayMode)&&void 0!==n?n:h.backgroundColorDisplayMode,E=t?b.d.COLOR_DISPLAY_MODE_SOLID:null!==(o=null==e||null===(a=e.header)||void 0===a?void 0:a.backgroundColorDisplayMode)&&void 0!==o?o:h.backgroundColorDisplayMode,w=j(e,t),_=(s=w,l=d.useState(""),c=i()(l,2),u=c[0],m=c[1],d.useEffect((function(){if(s){var e=new Image;e.onload=function(){return m((function(t){return t||e.src}))},e.src=y(s,64);var t=new Image;t.onload=function(){return m(t.src)},t.src=y(s)}}),[null==s?void 0:s.id]),u),S=O(e,t),P=S.altHex,C=S.primaryHex,k=S.backgroundColor;return d.useMemo((function(){return function(t){var n=Object(p.k)(null==g?void 0:g.secondaryBackgroundColor),r={display:"flex",flexDirection:"column"};if(w||E!==b.d.COLOR_DISPLAY_MODE_SOLID||(r.backgroundColor=k||t.backgroundColor),P)return r;var o=[];if(w&&E===b.d.COLOR_DISPLAY_MODE_SOLID?o.push("linear-gradient(to bottom, ".concat(C||"transparent",", ").concat(C||"transparent",")")):E===b.d.COLOR_DISPLAY_MODE_VERTICAL_GRADIENT&&o.push("linear-gradient(to bottom, ".concat(C||"transparent",", ").concat(n||"transparent",")")),w){var a,s;o.push("url(".concat(_,")"));var i=null!==(a=null==e||null===(s=e.header)||void 0===s?void 0:s.backgroundImageVerticalAlignment)&&void 0!==a?a:h.backgroundImageVerticalAlignment,l=x[i];switch(r.backgroundPosition=l,v){case b.f.IMAGE_DISPLAY_MODE_FILL:r.backgroundSize="cover";break;case b.f.IMAGE_DISPLAY_MODE_TILE:r.backgroundRepeatX="repeat",r.backgroundRepeatY="repeat",r.backgroundSize="auto";break;case b.f.IMAGE_DISPLAY_MODE_FIT:r.backgroundRepeatX="no-repeat",r.backgroundRepeatY="no-repeat",r.backgroundSize="contain";break;case b.f.IMAGE_DISPLAY_MODE_AUTO:r.backgroundRepeatX="no-repeat",r.backgroundRepeatY="no-repeat",r.backgroundSize="auto"}}return o.length>0&&(r.backgroundImage=o.join(", ")),r}}),[e,_])},_=function(e){var t,n=e.customStyleSheet,r=e.withAltBackground,o=void 0!==r&&r,a=e.children,s=Object(g.useCx)(),i=w(n,o),l=(null!==(t=null==n?void 0:n.header)&&void 0!==t?t:{}).backgroundImage;return d.createElement(d.Fragment,null,l&&d.createElement(m.a,null,d.createElement("link",{rel:"preload",href:y(l),as:"image"}),d.createElement("link",{rel:"preload",href:y(l,64),as:"image"})),d.createElement("div",{className:s(i)},a))},S=Object(u.gql)(E()),P=Object(u.gql)(v(),S,p.l,p.n)},"./src/components/publisher/MetaHeaderEngagement.tsx":function(e,t,n){"use strict";n.d(t,"c",(function(){return T})),n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return L}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/components/session/useFlag.tsx"),c=n("./src/framework/design-system/index.ts"),u=n("./src/routes/RoutingContext.tsx"),d=n("./src/util/routes.ts");function m(){var e=o()(["\n  fragment PublisherAboutLink_publisher on Publisher {\n    __typename\n    id\n    ... on Collection {\n      slug\n    }\n    ... on User {\n      hasDomain\n      username\n    }\n  }\n"]);return m=function(){return e},e}var p=function(e){var t=Object(l.a)("enable_aurora_profile_about_page");return"Collection"===e.__typename||t},f=function(e){var t,n,r=e.publisher,o=Object(i.f)((function(e){return e.config}),i.d).authDomain,a=Object(u.d)("ShowCollectionMasthead",{collectionSlug:"Collection"===r.__typename&&null!==(t=r.slug)&&void 0!==t?t:""}),l="User"===r.__typename&&r.hasDomain,m="User"===r.__typename&&null!==(n=r.username)&&void 0!==n?n:"",f=Object(d.zc)(m,o,l);if(!p(r))return null;var g="Collection"===r.__typename?a:f;return s.createElement(c.h,{href:g},"About")},g=Object(a.gql)(m()),b=n("./src/components/collection/CollectionFollowButton.tsx"),h=n("./src/components/user/UserFollowButton.tsx");function v(){var e=o()(["\n  fragment PublisherFollowButton_publisher on Publisher {\n    __typename\n    ... on Collection {\n      ...CollectionFollowButton_collection\n    }\n    ... on User {\n      ...UserFollowButton_user\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}var E=function(e){var t=e.publisher,n=e.buttonSize,r=e.isLinkStyle,o=void 0!==r&&r;if("Collection"===t.__typename)return s.createElement(b.a,{buttonSize:n,collection:t,isLinkStyle:o});var a="string"==typeof n?n:"REGULAR";return s.createElement(h.a,{buttonSize:a,user:t,isLinkStyle:o})},x=Object(a.gql)(v(),b.b,h.c),y=n("./src/framework/design-system/type/index.ts"),O=n("./src/util/numbers.ts");function j(){var e=o()(["\n  fragment PublisherFollowerCount_publisher on Publisher {\n    __typename\n    ... on Collection {\n      subscriberCount\n    }\n    ... on User {\n      socialStats {\n        followerCount\n      }\n    }\n  }\n"]);return j=function(){return e},e}var w=function(e){var t,n,r=null!==(t="Collection"===e.__typename?e.subscriberCount:null===(n=e.socialStats)||void 0===n?void 0:n.followerCount)&&void 0!==t?t:0;return{followerCount:r,isFollowerCountVisible:r>0}},_=function(e){var t=e.publisher,n=w(t),r=n.followerCount;return n.isFollowerCountVisible?s.createElement(y.b,{tag:"span",scale:"L",color:"DARKER"},"".concat(Object(O.d)(r)," Follower").concat(1===r?"":"s")):null},S=Object(a.gql)(j()),P=n("./src/components/session/useViewer.tsx"),C=n("./src/framework/source/index.ts");function k(){var e=o()(["\n  fragment MetaHeaderEngagement_publisher on Publisher {\n    ...PublisherAboutLink_publisher\n    ...PublisherFollowButton_publisher\n    ...PublisherFollowerCount_publisher\n    ... on Collection {\n      creator {\n        id\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return k=function(){return e},e}var I={xs:"SMALL",sm:"SMALL",md:"REGULAR",lg:"REGULAR",xl:"REGULAR"},T=function(e,t){var n,r=Object(P.b)().value,o=!!r&&"User"===e.__typename&&r.id===e.id,a=!!r&&"Collection"===e.__typename&&r.id===(null==e||null===(n=e.creator)||void 0===n?void 0:n.id),s=!o&&!a,i=w(e).isFollowerCountVisible,l=p(e)&&!t;return{isAboutLinkVisible:l,isFollowButtonVisible:s,isFollowerCountVisible:i,isEngagementVisible:s||i||l}},R=function(e){var t=e.publisher,n=e.isSizeResponsive,r=void 0!==n&&n,o=e.hideAboutLink,a=void 0!==o&&o,i=Object(l.a)("enable_meta_header_v2"),u=T(t,a),d=u.isAboutLinkVisible,m=u.isFollowButtonVisible,p=u.isFollowerCountVisible,g=u.isEngagementVisible;return i?g?s.createElement(y.b,{scale:"L",leadingTrim:!0},s.createElement(c.a,{display:"flex",alignItems:"center"},p&&s.createElement(s.Fragment,null,s.createElement(_,{publisher:t}),(d||m)&&s.createElement(c.a,{marginLeft:"12px",marginRight:"12px"},"·")),d&&s.createElement(c.a,{marginRight:m?"24px":void 0},s.createElement(f,{publisher:t})),m&&s.createElement(C.b,{source:{susiEntry:"follow_header"},extendSource:!0},s.createElement(E,{publisher:t,isLinkStyle:!0})))):null:s.createElement(C.b,{source:{susiEntry:"follow_header"},extendSource:!0},s.createElement(E,{publisher:t,buttonSize:r?I:"SMALL"}))},L=Object(a.gql)(k(),g,x,S)},"./src/components/publisher/MetaHeaderLogo.tsx":function(e,t,n){"use strict";n.d(t,"d",(function(){return M})),n.d(t,"a",(function(){return H})),n.d(t,"e",(function(){return U})),n.d(t,"b",(function(){return V})),n.d(t,"c",(function(){return z}));var r,o,a,s,i,l,c=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),u=n.n(c),d=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),m=n.n(d),p=n("./node_modules/@apollo/client/index.js"),f=n("./node_modules/react/index.js"),g=n("./src/components/collection/PublisherLogo.tsx"),b=n("./src/components/collection/package/header/calculateLogoDimensions.ts"),h=n("./src/components/collection/theming/customStyleSheet.ts"),v=n("./src/components/publisher/auroraHooks.ts"),E=n("./src/components/publisher/theming/defaultStyleSheet.ts"),x=n("./src/components/session/useFlag.tsx"),y=n("./src/components/ui/image/index.ts"),O=n("./src/framework/design-system/type/useTypeRules.ts"),j=n("./src/framework/style/index.ts"),w=n("./src/schema-types/globalTypes.ts"),_=n("./src/util/miroImage.ts");function S(){var e=u()(["\n  fragment MetaHeaderLogo_publisher on Publisher {\n    __typename\n    id\n    name\n    ... on Collection {\n      logo {\n        ...MetaHeaderLogo_imageMetadata\n        ...PublisherLogo_image\n      }\n    }\n    ...auroraHooks_publisher\n  }\n  ","\n  ","\n  ","\n"]);return S=function(){return e},e}function P(){var e=u()(["\n  fragment MetaHeaderLogo_customStyleSheet on CustomStyleSheet {\n    id\n    header {\n      nameColor {\n        ...getHexFromColorValue_colorValue\n      }\n      nameTreatment\n      postNameTreatment\n      logoImage {\n        ...MetaHeaderLogo_imageMetadata\n      }\n      logoScale\n    }\n  }\n  ","\n  ","\n"]);return P=function(){return e},e}function C(){var e=u()(["\n  fragment MetaHeaderLogo_imageMetadata on ImageMetadata {\n    id\n    originalWidth\n    originalHeight\n    ...PublisherLogo_image\n  }\n  ","\n"]);return C=function(){return e},e}var k=function(e,t){var n,r,o=null!==(n=null==t?void 0:t.originalWidth)&&void 0!==n?n:0,a=null!==(r=null==t?void 0:t.originalHeight)&&void 0!==r?r:0,s=Math.min(e.width/o,e.height/a);return{width:Math.floor(s*o),height:Math.floor(s*a)}},I=(r={},m()(r,w.e.HEADER_SCALE_SMALL,{small:{width:150,height:60},large:{width:250,height:100}}),m()(r,w.e.HEADER_SCALE_MEDIUM,{small:{width:220,height:88},large:{width:350,height:140}}),m()(r,w.e.HEADER_SCALE_LARGE,{small:{width:280,height:128},large:{width:450,height:180}}),r),T=(o={},m()(o,w.e.HEADER_SCALE_SMALL,{small:{width:175,height:70},large:{width:175,height:70}}),m()(o,w.e.HEADER_SCALE_MEDIUM,{small:{width:225,height:90},large:{width:225,height:90}}),m()(o,w.e.HEADER_SCALE_LARGE,{small:{width:275,height:110},large:{width:275,height:110}}),o),R=(a={},m()(a,w.e.HEADER_SCALE_SMALL,{small:{width:160,height:32},large:{width:240,height:48}}),m()(a,w.e.HEADER_SCALE_MEDIUM,{small:{width:280,height:56},large:{width:360,height:72}}),m()(a,w.e.HEADER_SCALE_LARGE,{small:{width:280,height:64},large:{width:520,height:104}}),a),L=(s={},m()(s,w.e.HEADER_SCALE_SMALL,{small:{width:280,height:24},large:{width:320,height:32}}),m()(s,w.e.HEADER_SCALE_MEDIUM,{small:{width:280,height:40},large:{width:600,height:60}}),m()(s,w.e.HEADER_SCALE_LARGE,{small:{width:280,height:60},large:{width:680,height:80}}),s),A=function(e,t,n){var r,o,a=(null!==(r=null==t?void 0:t.originalWidth)&&void 0!==r?r:0)/(null!==(o=null==t?void 0:t.originalHeight)&&void 0!==o?o:0);return a<=2.5?n?T[e]:I[e]:a<5?R[e]:L[e]},M=function(e,t,n){var r=A(e,t,n),o=k(r.small,t),a=k(r.large,t);return{width:{xs:"".concat(o.width,"px"),sm:"".concat(o.width,"px"),md:"".concat(a.width,"px"),lg:"".concat(a.width,"px"),xl:"".concat(a.width,"px")},height:{xs:"".concat(o.height,"px"),sm:"".concat(o.height,"px"),md:"".concat(a.height,"px"),lg:"".concat(a.height,"px"),xl:"".concat(a.height,"px")}}},B=(i={},m()(i,w.e.HEADER_SCALE_SMALL,{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}),m()(i,w.e.HEADER_SCALE_MEDIUM,{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}),m()(i,w.e.HEADER_SCALE_LARGE,{xs:"S",sm:"S",md:"XL",lg:"XL",xl:"XL"}),i),D=(l={},m()(l,w.e.HEADER_SCALE_SMALL,{fontSize:{xs:"40px",sm:"40px",md:"54px",lg:"54px",xl:"54px"},lineHeight:{xs:"44px",sm:"44px",md:"56px",lg:"56px",xl:"56px"}}),m()(l,w.e.HEADER_SCALE_MEDIUM,{fontSize:{xs:"60px",sm:"60px",md:"90px",lg:"90px",xl:"90px"},lineHeight:{xs:"64px",sm:"64px",md:"96px",lg:"96px",xl:"96px"}}),m()(l,w.e.HEADER_SCALE_LARGE,{fontSize:{xs:"80px",sm:"80px",md:"126px",lg:"126px",xl:"126px"},lineHeight:{xs:"84px",sm:"84px",md:"136px",lg:"136px",xl:"136px"}}),l),N={wordBreak:"break-word"},H=function(e){var t,n,r,o,a,s,i,l=e.customStyleSheet,c=e.publisher,u=e.withTextColorSubtle,d=void 0!==u&&u,m=e.withAltNameTreatment,p=e.withCustomSizing,v=void 0===p||p,S=e.forceSmall,P=void 0!==S&&S,C=Object(j.useCx)(),I=!!Object(x.a)("enable_meta_header_v2"),T=(null!==(t=null==l?void 0:l.header)&&void 0!==t?t:{}).nameColor,R=Object(h.k)(T),L=Object(E.b)(),H=P?w.e.HEADER_SCALE_SMALL:null!==(n=null==l||null===(r=l.header)||void 0===r?void 0:r.logoScale)&&void 0!==n?n:L.logoScale,F=null!==(o=null==l||null===(a=l.header)||void 0===a?void 0:a.nameTreatment)&&void 0!==o?o:L.nameTreatment,V=null!==(s=null==l||null===(i=l.header)||void 0===i?void 0:i.postNameTreatment)&&void 0!==s?s:L.postNameTreatment,z=Object(O.a)({name:"heading",scale:I?B[H]:"S",leadingTrim:!!I}),q=D[H],G=[z,function(e){return{color:R||e.baseColor.text[d?"normal":"dark"]}},N];I||G.push(q);var W=U(l,c),$=W.logo,K=W.shouldShowLogo,Y=(null==$?void 0:$.originalHeight)||0,Q=(null==$?void 0:$.originalWidth)||0,X=Object(b.a)("xs",Y,Q);if(!v)return f.createElement(g.a,{withTextColorSubtle:d,customNameColor:R,nameTreatment:m?V:F,maxHeight:35,maxWidth:X.maxWidth,textScale:I?"XS":"M",logo:$,name:c.name,clamp:I?0:1,leadingTrim:!!I||void 0,withWordBreak:I});if(!K||!$)return f.createElement("span",{className:C(G)},c.name||"");var J=A(H,$,I),Z=k(J.large,$);return f.createElement(y.c,{miroId:$.id,alt:c.name||"Publication logo",width:Z.width,height:Z.height,strategy:_.a.Resample,rules:M(null!=H?H:L.logoScale,$,I)})},U=function(e,t){var n,r,o,a=Object(E.b)(),s=null==e||null===(n=e.header)||void 0===n?void 0:n.logoImage,i=null!==(r=null==e||null===(o=e.header)||void 0===o?void 0:o.nameTreatment)&&void 0!==r?r:a.nameTreatment,l=Object(v.f)(t),c=void 0!==s,u="Collection"===t.__typename?t.logo:null,d=l&&c?s:u;return{logo:d,shouldShowLogo:(null==d?void 0:d.id)&&i===w.j.NAME_TREATMENT_LOGO}},F=Object(p.gql)(C(),g.b),V=Object(p.gql)(P(),h.l,F),z=Object(p.gql)(S(),F,g.b,v.a)},"./src/components/publisher/MetaHeaderTagline.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return x}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/collection/theming/customStyleSheet.ts"),l=n("./src/components/format/Linkifier.tsx"),c=n("./src/components/publisher/theming/defaultStyleSheet.ts"),u=n("./src/components/session/useFlag.tsx"),d=n("./src/framework/design-system/type/useTypeRules.ts"),m=n("./src/framework/style/index.ts"),p=n("./src/schema-types/globalTypes.ts");function f(){var e=o()(["\n  fragment MetaHeaderTagline_publisher on Publisher {\n    __typename\n    ... on Collection {\n      tagline\n    }\n    ... on User {\n      bio\n    }\n  }\n"]);return f=function(){return e},e}function g(){var e=o()(["\n  fragment MetaHeaderTagline_customStyleSheet on CustomStyleSheet {\n    id\n    header {\n      taglineColor {\n        ...getHexFromColorValue_colorValue\n      }\n      taglineTreatment\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var b={xs:"S",sm:"S",md:"M",lg:"L",xl:"L"},h=function(e){var t,n=e.publisher,r=e.customStyleSheet,o=e.color,a=void 0===o?"LIGHTER":o,c=Object(m.useCx)(),p=Object(u.a)("enable_meta_header_v2"),f=Object(d.a)({name:"subtitle",scale:p?"M":b,color:a}),g=(null!==(t=null==r?void 0:r.header)&&void 0!==t?t:{}).taglineColor,h=Object(i.k)(g),E=h?{color:h}:{},x=v(r,n),y=x.tagline;return x.isTaglineVisible?s.createElement("span",{className:c([f,E])},s.createElement(l.a,null,y)):null},v=function(e,t){var n,r,o=Object(c.b)(),a=null!==(n=null==e||null===(r=e.header)||void 0===r?void 0:r.taglineTreatment)&&void 0!==n?n:o.taglineTreatment,s="Collection"===t.__typename?t.tagline:t.bio;return{tagline:s,isTaglineVisible:!!s&&a===p.v.TAGLINE_TREATMENT_HEADER}},E=Object(a.gql)(g(),i.l),x=Object(a.gql)(f())},"./src/components/publisher/MetaHeaderThemeProvider.tsx":function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return E})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return y}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/lodash/merge.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./src/components/session/useFlag.tsx"),u=n("./src/framework/style/index.ts"),d=n("./src/util/theme.ts");function m(){var e=o()(["\n  fragment MetaHeaderThemeProvider_publisher on Publisher {\n    __typename\n    customStyleSheet {\n      ...MetaHeaderThemeProvider_customStyleSheet\n    }\n    ... on Collection {\n      colorPalette {\n        ...customDefaultBackgroundTheme_colorPalette\n      }\n    }\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}function p(){var e=o()(["\n  fragment MetaHeaderThemeProvider_customStyleSheet on CustomStyleSheet {\n    id\n    ...useMetaHeaderTheme_customStyleSheet\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=o()(["\n  fragment useMetaHeaderTheme_customStyleSheet on CustomStyleSheet {\n    ...customDefaultBackgroundTheme_customStyleSheet\n    global {\n      colorPalette {\n        primary {\n          colorPalette {\n            tintBackgroundSpectrum {\n              ...ThemeUtil_colorSpectrum\n            }\n          }\n        }\n      }\n    }\n    header {\n      backgroundColor {\n        colorPalette {\n          tintBackgroundSpectrum {\n            ...ThemeUtil_colorSpectrum\n          }\n        }\n      }\n      postBackgroundColor {\n        colorPalette {\n          tintBackgroundSpectrum {\n            ...ThemeUtil_colorSpectrum\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var g=function(e,t){var n,r,o,a,s,i,l=null==e||null===(n=e.header)||void 0===n||null===(r=n.backgroundColor)||void 0===r||null===(o=r.colorPalette)||void 0===o?void 0:o.tintBackgroundSpectrum,c=null==e||null===(a=e.header)||void 0===a||null===(s=a.postBackgroundColor)||void 0===s||null===(i=s.colorPalette)||void 0===i?void 0:i.tintBackgroundSpectrum;return t&&null!=c?c:l},b=function(e){var t,n,r,o,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0,i=Object(u.useTheme)(),l=Object(c.a)("enable_meta_header_v2"),m=g(e,a),p=null==e||null===(t=e.global)||void 0===t||null===(n=t.colorPalette)||void 0===n||null===(r=n.primary)||void 0===r||null===(o=r.colorPalette)||void 0===o?void 0:o.tintBackgroundSpectrum,f=m?Object(d.r)({tint:m,accentTint:p},i):Object(d.g)(e,i,s);return l?h(f):f},h=function(e){return s()({},e,{newFonts:{heading:{fontSize:{XL:80,L:64,M:48,S:36,XS:27},lineHeight:{XL:88,L:72,M:56,S:40,XS:34},weight:700}}})},v=function(e){var t=e.publisher,n=e.customStyleSheet,r=e.children,o=e.withAltBackground,a="Collection"===t.__typename?t.colorPalette:null,s=b(n,o,a);return l.createElement(u.ThemeProvider,{theme:s},r)},E=Object(i.gql)(f(),d.i,d.b),x=Object(i.gql)(p(),E),y=Object(i.gql)(m(),x,d.h)},"./src/components/publisher/MetaHeaderV2.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return ae})),n.d(t,"d",(function(){return se})),n.d(t,"b",(function(){return ie})),n.d(t,"c",(function(){return le})),n.d(t,"e",(function(){return ue}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./src/components/metabar/Logo.tsx"),p=n("./src/components/navigation/Anchor.tsx"),f=n("./src/components/collection/CollectionAvatar.tsx"),g=n("./src/components/collection/CollectionMetabarActionsPopover.tsx"),b=n("./src/components/collection/package/header/MetaHeaderPubMenu.tsx"),h=n("./src/components/metabar/MetabarActionsPopover.tsx"),v=n("./src/components/metabar/NewCollectionPostButton.tsx"),E=n("./src/components/search/SearchWidget.tsx"),x=n("./src/components/session/useViewer.tsx"),y=n("./src/components/user/UserAvatar.tsx"),O=n("./src/framework/design-system/components/index.ts"),j=n("./src/framework/source/index.ts"),w=n("./src/util/hooks/useUserAgentMobileOrTablet.tsx"),_=n("./src/util/routes.ts");function S(){var e=o()(["\n  fragment MetaHeaderActions_publisher on Publisher {\n    __typename\n    ...MetaHeaderPubMenu_publisher\n    ...SearchWidget_publisher\n    ... on Collection {\n      id\n      viewerIsEditor\n      creator {\n        id\n      }\n      ...CollectionAvatar_collection\n      ...CollectionMetabarActionsPopover_collection\n    }\n    ... on User {\n      id\n      ...UserAvatar_user\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return S=function(){return e},e}var P=function(e){var t=e.publisher,n=e.hideAboutLink,r=void 0!==n&&n,o=Object(d.f)((function(e){return e.config.authDomain})),a=!Object(w.a)(),s=Object(x.b)().value,i="Collection"===t.__typename?t:null,l=i&&i.creator&&i.creator.id===(null==s?void 0:s.id),c=i&&i.viewerIsEditor,m=l||c,p="User"===(null==t?void 0:t.__typename)?t:null,S=!!p&&(null==s?void 0:s.id)===p.id,P=m||S;return u.createElement(O.a,{display:"flex",alignItems:"center",marginRight:P?"24px":"12px",height:"32px",overflow:"visible"},s&&!P&&u.createElement(b.a,{publisher:t,hideAboutLink:r}),s&&u.createElement(j.b,{source:{name:"search-popover"}},u.createElement(O.a,{marginRight:"2px"},u.createElement(E.b,{publisher:t,setIsMetabarLocked:function(){}}))),i&&m&&u.createElement(u.Fragment,null,u.createElement(O.a,{marginLeft:"12px",marginRight:"12px"},u.createElement(g.a,{collection:i,paddingTop:"0px",paddingBottom:"0px"},u.createElement(f.a,{collection:i,size:32}))),a&&u.createElement(v.a,{collection:i,paddingTop:"0px",paddingBottom:"0px",marginLeft:"12px"})),s&&S&&u.createElement(u.Fragment,null,u.createElement(O.a,{marginLeft:"12px",marginRight:"12px"},u.createElement(h.a,{viewer:s,setIsMetabarLocked:function(){}},u.createElement(y.d,{user:s,scale:"XS"}))),u.createElement(O.a,{marginLeft:"12px"},u.createElement(O.b,{href:Object(_.sb)(o),buttonStyle:"STRONG",size:"SMALL"},"New story"))))},C=Object(c.gql)(S(),b.b,E.c,f.b,g.b,y.b),k=n("./src/components/publisher/MetaHeaderBackground.tsx"),I=n("./src/components/publisher/MetaHeaderEngagement.tsx"),T=n("./src/components/publisher/MetaHeaderLogo.tsx"),R=n("./src/components/publisher/MetaHeaderTagline.tsx"),L=n("./src/components/publisher/MetaHeaderThemeProvider.tsx"),A=n("./src/components/metabar/OpenInApp.tsx"),M=n("./src/components/susi/SusiClickable.tsx"),B=n("./src/framework/design-system/index.ts"),D=n("./src/framework/design-system/util/style/converters.ts"),N=n("./src/styles/zIndex.ts");function H(){var e=o()(["\n  fragment MetaHeaderTop_publisher on Publisher {\n    __typename\n    ... on Collection {\n      slug\n      ...CollectionMetabarActionsPopover_collection\n      ...CollectionAvatar_collection\n      ...MetaHeaderTop_collection\n    }\n    ... on User {\n      username\n      id\n    }\n  }\n  ","\n  ","\n  ","\n"]);return H=function(){return e},e}function U(){var e=o()(["\n  fragment MetaHeaderTop_post on Post {\n    id\n    collection {\n      ...MetaHeaderTop_collection\n    }\n    pendingCollection {\n      ...MetaHeaderTop_collection\n    }\n  }\n  ","\n"]);return U=function(){return e},e}function F(){var e=o()(["\n  fragment MetaHeaderTop_collection on Collection {\n    id\n    viewerIsEditor\n    creator {\n      id\n    }\n  }\n"]);return F=function(){return e},e}var V,z=function(e){var t,n,r=e.publisher,o=e.post,a=e.withBottomBorder,s=Object(d.f)((function(e){return e.config.authDomain})),i=Object(x.b)().value,l="Collection"===(null==r?void 0:r.__typename)?r.slug:void 0,c="User"===(null==r?void 0:r.__typename)?r.username:null,b="Collection"===(null==r?void 0:r.__typename)?r:null!==(t=null==o?void 0:o.pendingCollection)&&void 0!==t?t:null==o?void 0:o.collection,v=i&&b&&(null==b||null===(n=b.creator)||void 0===n?void 0:n.id)===(null==i?void 0:i.id),E=null==b?void 0:b.viewerIsEditor,O=v||E,j=i&&"User"===(null==r?void 0:r.__typename)&&i.id===r.id;return u.createElement(B.a,{zIndex:N.a.metabar,position:"relative",borderBottom:a?"BASE_LIGHTER":"NONE"},u.createElement(B.j,null,u.createElement(B.a,{height:Object(D.b)(62),display:"flex",alignItems:"center"},u.createElement(B.a,{flexGrow:"1",flexDirection:"row",display:"flex",alignItems:"center"},!i&&u.createElement(B.a,{marginRight:"16px"},u.createElement(M.a,{susiEntry:"nav_reg",isButton:!0,buttonStyle:"OBVIOUS",operation:"register"},"Get started")),u.createElement(A.a,{removeSpacing:!0,isButton:!1,collectionSlug:l,postId:null==o?void 0:o.id,username:c})),"Collection"===(null==r?void 0:r.__typename)&&O&&u.createElement(B.a,{marginRight:"16px",sm:{marginRight:"10px"}},u.createElement(g.a,{collection:r},u.createElement(f.a,{collection:r,size:32}))),"User"===(null==r?void 0:r.__typename)&&i&&j&&u.createElement(B.a,{marginRight:"16px",sm:{marginRight:"10px"}},u.createElement(h.a,{viewer:i,setIsMetabarLocked:function(){}},u.createElement(y.d,{user:i,scale:"XS"}))),u.createElement(p.a,{href:"https://".concat(s,"/"),ariaLabel:"Homepage"},u.createElement(m.a,null)))))},q=Object(c.gql)(F()),G=Object(c.gql)(U(),q),W=Object(c.gql)(H(),g.b,f.b,q),$=n("./src/components/publisher/publisherHelpers.tsx"),K=n("./src/components/publisher/theming/defaultStyleSheet.ts"),Y=n("./src/framework/design-system/type/createLeadingTrimRule.ts"),Q=n("./src/framework/design-system/util/style/responsiveStyles.ts"),X=n("./src/framework/style/index.ts"),J=n("./src/metadata/Favicon.tsx"),Z=n("./src/schema-types/globalTypes.ts");function ee(){var e=o()(["\n  fragment MetaHeaderV2_post on Post {\n    id\n    ...SusiClickable_post\n    ...MetaHeaderTop_post\n  }\n  ","\n  ","\n"]);return ee=function(){return e},e}function te(){var e=o()(["\n  fragment MetaHeaderV2_customStyleSheet on CustomStyleSheet {\n    id\n    header {\n      headerScale\n      horizontalAlignment\n    }\n    ...MetaHeaderBackground_customStyleSheet\n    ...MetaHeaderLogo_customStyleSheet\n    ...MetaHeaderTagline_customStyleSheet\n    ...MetaHeaderThemeProvider_customStyleSheet\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return te=function(){return e},e}function ne(){var e=o()(["\n  fragment MetaHeaderV2_publisher on Publisher {\n    __typename\n    name\n    ...MetaHeaderEngagement_publisher\n    ...MetaHeaderLogo_publisher\n    ...MetaHeaderTagline_publisher\n    ...MetaHeaderThemeProvider_publisher\n    ...MetaHeaderActions_publisher\n    ...MetaHeaderTop_publisher\n    ... on Collection {\n      id\n      favicon {\n        id\n      }\n      tagline\n    }\n    ... on User {\n      id\n      bio\n      hasDomain\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return ne=function(){return e},e}var re=(V={},l()(V,Z.a.START,"flex-start"),l()(V,Z.a.END,"flex-end"),l()(V,Z.a.CENTER,"center"),V),oe=function(e){return{maxWidth:Object(D.b)(e.maxWidths.inset),minWidth:"0",width:"100%",marginTop:"12px"}},ae=function(e){var t,n,r,o=e.publisher,a=e.customStyleSheet,i=e.post,l=e.forceSmall,c=void 0!==l&&l,f=e.hideAboutLink,g=void 0!==f&&f,b=Object(T.e)(a,o).shouldShowLogo,h=Object(X.useCx)(),v=Object(d.f)((function(e){return e.config.authDomain})),E=Object(d.f)((function(e){return e.config.isAmp})),y=Object(x.b)().value,O=Object(K.b)(),j=ce({customStyleSheet:a,forceSmall:c}),w=ue({publisher:o,customStyleSheet:a,forceSmall:c}),_=j===Z.e.HEADER_SCALE_SMALL,S=_&&b,C=Object(X.useTheme)().newFonts.heading,A=S?void 0:Object(Q.b)((function(e){var t=s()(e,1)[0];return Object(D.b)(-1*t)}),Object(Y.b)(C,"XS")),H=_?Z.a.START:null!==(t=null==a||null===(n=a.header)||void 0===n?void 0:n.horizontalAlignment)&&void 0!==t?t:O.horizontalAlignment,U=Object(I.c)(o,g).isEngagementVisible,F=!!Object(k.d)(a,c),V=!_&&U,q=V?48:0,G=_?160:312,W=G-q,ee=_?W:W-62,te=Object($.f)(o,v),ne="".concat(Object($.a)(o)," Homepage"),ae=!!Object(k.c)(a,c).backgroundColor,se=!(F||ae)||!_&&U;return u.createElement(u.Fragment,null,"Collection"===o.__typename&&u.createElement(J.a,{faviconImageId:null==o||null===(r=o.favicon)||void 0===r?void 0:r.id}),u.createElement(B.a,{borderBottom:se?"BASE_LIGHTER":void 0,minHeight:Object(D.b)(G)},u.createElement(L.a,{publisher:o,customStyleSheet:a,withAltBackground:c},u.createElement(k.a,{customStyleSheet:a,withAltBackground:c},u.createElement(B.a,{display:"none",sm:{display:"block"}},u.createElement(z,{withBottomBorder:!F,post:i,publisher:o})),u.createElement(B.j,null,u.createElement(B.a,{display:"flex",flexDirection:_?"row":"column",alignItems:_?"center":void 0,justifyContent:"space-between",minHeight:Object(D.b)(W),sm:{flexDirection:"column",justifyContent:_?"center":"flex-end",alignItems:"flex-start",minHeight:Object(D.b)(ee)},paddingBottom:_||U?void 0:Object(D.b)(48)},!_&&u.createElement(B.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:Object(D.b)(24),sm:{display:"none"},zIndex:N.a.metabar},(!y||E)&&u.createElement(B.a,{marginRight:"24px"},u.createElement(M.a,{buttonSize:"SMALL",isButton:!0,buttonStyle:"OBVIOUS",operation:"register",post:i,susiEntry:"nav_reg"},"Get started")),y&&u.createElement(P,{publisher:o,hideAboutLink:g}),u.createElement(p.a,{href:"https://".concat(v,"/"),ariaLabel:"Homepage"},u.createElement(m.a,{contrast:ae?"darker":"normal"}))),u.createElement(B.a,{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"flex-start"},u.createElement("div",{className:h({paddingTop:A,display:"flex",width:"100%"})},u.createElement(B.a,{width:"100%",display:"flex",flexDirection:_?"row":"column",alignItems:_?b?"center":"flex-end":re[H],marginBottom:_?"0px":"40px",marginTop:_?"-40px":"42px",textAlign:H===Z.a.CENTER?"center":void 0,flexWrap:"wrap",sm:_?{alignItems:"flex-start",flexDirection:"column"}:{marginTop:"50px"}},u.createElement(B.a,{marginLeft:H===Z.a.START?void 0:Object(D.b)(24),marginRight:Object(D.b)(24),marginTop:"40px"},u.createElement(p.a,{href:te,ariaLabel:ne},u.createElement(T.a,{publisher:o,customStyleSheet:a,withAltNameTreatment:c,withCustomSizing:!_,withTextColorSubtle:!1}))),w&&u.createElement("div",{className:h(oe)},u.createElement(R.a,{customStyleSheet:a,publisher:o})),_&&u.createElement(B.a,{sm:{marginTop:"20px"},marginTop:"40px"},u.createElement(I.a,{publisher:o,hideAboutLink:g})))),_&&u.createElement(B.a,{display:"flex",justifySelf:"flex-end",alignItems:"center",sm:{display:"none"},zIndex:N.a.metabar},(!y||E)&&u.createElement(B.a,{marginRight:"24px"},u.createElement(M.a,{isButton:!0,buttonStyle:"OBVIOUS",operation:"register",post:i,susiEntry:"nav_reg"},"Get started")),y&&u.createElement(P,{publisher:o,hideAboutLink:g}),u.createElement(p.a,{href:"https://".concat(v,"/"),ariaLabel:"Homepage"},u.createElement(m.a,{contrast:ae?"darker":"normal"})))))))),V&&u.createElement(B.j,null,u.createElement(B.a,{height:Object(D.b)(q),display:"flex",alignItems:"center",justifyContent:re[H]},u.createElement(I.a,{publisher:o,hideAboutLink:g})))))},se=Object(c.gql)(ne(),I.b,T.c,R.c,L.c,C,W),ie=Object(c.gql)(te(),k.b,T.b,R.b,L.b),le=Object(c.gql)(ee(),M.d,G),ce=function(e){var t,n,r=e.customStyleSheet,o=e.forceSmall,a=void 0!==o&&o,s=Object(K.b)();return a?Z.e.HEADER_SCALE_SMALL:null!==(t=null==r||null===(n=r.header)||void 0===n?void 0:n.headerScale)&&void 0!==t?t:s.headerScale},ue=function(e){var t=e.publisher,n=e.customStyleSheet,r=e.forceSmall,o=void 0!==r&&r,a=Object(R.d)(n,t).isTaglineVisible,s=ce({customStyleSheet:n,forceSmall:o});return a&&s!==Z.e.HEADER_SCALE_SMALL}},"./src/components/publisher/publisherHelpers.tsx":function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return E})),n.d(t,"b",(function(){return x})),n.d(t,"f",(function(){return y})),n.d(t,"a",(function(){return O}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n.n(l);function u(){var e=s()(["\n  mutation postSetPinnedByCreatorAt($postId: ID!, $isPinned: Boolean!) {\n    postSetPinnedByCreatorAt(targetPostId: $postId, isPinned: $isPinned) {\n      __typename\n      ... on Post {\n        id\n        pinnedByCreatorAt\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=s()(["\n  mutation setPinnedAt($postId: ID!, $collectionId: ID!, $pinnedAt: Boolean!) {\n    __typename\n    setPinnedAt(targetPostId: $postId, targetCollectionId: $collectionId, pinnedAt: $pinnedAt) {\n      __typename\n      ... on Post {\n        id\n        collection {\n          id\n        }\n        pendingCollection {\n          id\n        }\n        pinnedAt\n      }\n    }\n  }\n"]);return d=function(){return e},e}var m=Object(i.gql)(d()),p=Object(i.gql)(u()),f=n("./src/routes/RoutingContext.tsx"),g=n("./src/util/routes.ts");function b(){var e=s()(["\n  fragment useIsPinnedInContext_post on Post {\n    id\n    collection {\n      id\n    }\n    pendingCollection {\n      id\n    }\n    pinnedAt\n    pinnedByCreatorAt\n  }\n"]);return b=function(){return e},e}var h=Object(i.gql)(b()),v=function(e){var t=e.id,n=e.collection,r=e.pendingCollection,a=e.pinnedAt,s=(n||r||{id:""}).id,l=Object(i.useMutation)(m,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:t,collection:n,pendingCollection:r,pinnedAt:a?0:Date.now()}}}),u=o()(l,1)[0],d=c.a.useCallback((function(){return u({variables:{postId:t,collectionId:s,pinnedAt:!a}})}),[t,s,a,u]);return[a,d]},E=function(e){var t=e.id,n=e.pinnedByCreatorAt,r=Object(i.useMutation)(p,{optimisticResponse:{postSetPinnedByCreatorAt:{__typename:"Post",id:t,pinnedByCreatorAt:n?0:Date.now()}}}),a=o()(r,1)[0],s=c.a.useCallback((function(){return a({variables:{postId:t,isPinned:!n}})}),[t,a,n]);return[n,s]},x=function(e,t){var n=v(e),r=o()(n,2),a=r[0],s=r[1],i=E(e),l=o()(i,2),u=l[0],d=l[1],m=c.a.useCallback((function(){return"Collection"===t?s():d()}),[t,s,d]);return["Collection"===t?a:u,m]},y=function(e,t){var n="Collection"===e.__typename?e.slug:null,r=Object(f.d)("ShowCollectionHome",n?{collectionSlug:n}:{collectionSlug:""});return"Collection"===e.__typename?r:"User"===e.__typename&&e.username?Object(g.Ac)(e.username,t,e.hasDomain):""},O=function(e){switch(e.__typename){case"Collection":return"Publication";case"User":return"Author";default:return"Publisher"}}},"./src/components/publisher/theming/defaultStyleSheet.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n("./src/components/session/useFlag.tsx"),o=n("./src/schema-types/globalTypes.ts"),a=function(){return s(!!Object(r.a)("enable_meta_header_v2"))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{horizontalAlignment:o.a.START,headerScale:e?o.e.HEADER_SCALE_SMALL:o.e.HEADER_SCALE_MEDIUM,logoScale:o.e.HEADER_SCALE_MEDIUM,backgroundColorDisplayMode:o.d.COLOR_DISPLAY_MODE_SOLID,backgroundImageDisplayMode:o.f.IMAGE_DISPLAY_MODE_FILL,backgroundImageVerticalAlignment:o.a.START,nameTreatment:o.j.NAME_TREATMENT_TEXT,postNameTreatment:o.j.NAME_TREATMENT_LOGO,taglineTreatment:o.v.TAGLINE_TREATMENT_SIDEBAR,backgroundColor:null,secondaryBackgroundColor:null,postBackgroundColor:null,taglineColor:null,backgroundImage:null,logoImage:null,nameColor:null}},i=function(){return l(!!Object(r.a)("enable_sohne"))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{font1:{name:e?o.u.SANS_SERIF_1:o.u.SERIF_1},font2:{name:o.u.SANS_SERIF_1},font3:{name:o.u.SERIF_2}}}},"./src/components/read-next/ReadNext.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return M}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./src/components/ui/image/index.ts"),p=n("./src/framework/design-system/components/index.ts"),f=n("./src/framework/design-system/type/Detail.tsx"),g=n("./src/framework/design-system/type/Overline.tsx"),b=n("./src/framework/style/index.ts"),h=n("./src/util/miroImage.ts"),v=n("./src/util/routes.ts");function E(){var e=o()(["\n  fragment ReadNextPostCard_post on Post {\n    id\n    title\n    mediumUrl\n    primaryTopic {\n      name\n      slug\n    }\n    collection {\n      id\n      name\n    }\n    previewImage {\n      id\n      alt\n      focusPercentX\n      focusPercentY\n    }\n  }\n"]);return E=function(){return e},e}var x=Object(c.gql)(E()),y=Object(d.c)((function(e){return{mediumOwnedAndOperatedCollectionIds:e.config.mediumOwnedAndOperatedCollectionIds,isCustomDomain:e.client.isCustomDomain}}))((function(e){var t=e.isCustomDomain,n=e.mediumOwnedAndOperatedCollectionIds,r=e.post,o=r&&r.previewImage||{},a=o.focusPercentX,s=o.focusPercentY,i=o.id,l=o.alt,c=r.collection||{},d=c.name,E=c.id,x=r.primaryTopic&&r.primaryTopic.name,y=E&&(n.includes(E)?d:x)||"",O=r&&r.title||"",j=Object(v.Gb)(r,t),w=Object(b.useCx)(),_=u.createElement(p.a,{marginBottom:"4px"},u.createElement(g.a,{tag:"span"},u.createElement(f.a,{scale:"S",color:"DARKER"},u.createElement("div",{className:w({whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})},y))));return u.createElement(p.d,{href:j},u.createElement(p.a,{display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"20px"},_,u.createElement(p.a,{display:"flex",flexDirection:"row"},u.createElement(m.c,{miroId:i||"",alt:l||"",height:50,width:50,freezeGifs:!0,strategy:h.a.Crop,rules:{marginRight:"9px",marginTop:"4px"},focusPercentX:a||50,focusPercentY:s||50}),u.createElement(p.a,{display:"flex",flexDirection:"column",width:"130px"},u.createElement(f.a,{scale:"S",color:"DARKER",clamp:3},O)))))})),O=n("./src/components/session/WithViewer.tsx"),j=n("./src/framework/design-system/components/buttons/CloseButton.tsx"),w=n("./src/framework/design-system/type/index.ts"),_=n("./src/framework/reporter/index.ts"),S=n("./src/framework/source/index.ts"),P=n("./src/screens/helpers/visits.ts"),C=n("./src/util/constants.ts");function k(){var e=o()(["\n  query ReadNextQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      readNext {\n        ... on ReadNextItem {\n          reason\n          post {\n            ... on Post {\n              ...ReadNextPostCard_post\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={display:"none"},L={":last-of-type":{xs:R,sm:R,md:R,lg:R,xl:{display:"block"}}},A=function(e){var t=e.isVisible,n=void 0===t||t,r=e.postId,o=u.useState(!1),a=l()(o,2),s=a[0],i=a[1],d=Object(c.useQuery)(O.a).data,m=(d=void 0===d?{viewer:void 0}:d).viewer,f=Object(c.useLazyQuery)(B),g=l()(f,2),h=g[0],v=g[1],E=v.called,x=v.loading,C=v.error,k=v.data,I=(k=void 0===k?{post:void 0}:k).post,R=m&&M(m)&&!(Object(P.k)()||s),A=Object(_.c)(),D=Object(b.useCx)(),N=Object(S.e)(),H=I&&I.readNext;return u.useEffect((function(){x||!C||H&&H.length||A.event("readNextError",{post:I,postId:r,error:C,readNextLength:H&&H.length||0})}),[x]),u.useEffect((function(){n&&H&&(A.event("readNext.viewed",{position:"sidebar"}),H.slice(0,4).map((function(e,t){var n=e.post,r=e.reason;return A.event("post.clientPresented",{source:Object(S.c)(T({},N,{index:t,postFeedReason:r||void 0})),location:"post/".concat(n&&n.id)}),!0})))}),[n,H]),!E&&R&&h({variables:{postId:r||""}}),E&&!x&&!C&&I&&H&&H.length&&R?u.createElement(S.b,{source:{name:"read_next",sectionType:S.a.READ_NEXT_SIDEBAR},extendSource:!0},u.createElement(p.a,{width:"188px"},u.createElement(p.a,{md:{display:"none"},lg:{width:"780px",margin:"0 24px"},position:"relative",backgroundColor:"BACKGROUND",paddingBottom:"24px",paddingTop:"24px",width:"100%"},u.createElement(p.a,{position:"absolute",right:"0",top:"-4px"},u.createElement(j.a,{onClick:function(){Object(P.b)(),i(!0)},size:"SMALL",isPositionAbsolute:!1})),u.createElement(p.a,{width:"200px"},u.createElement(w.d,{scale:"XS"},"Your journey starts here.")),u.createElement(p.a,{display:"flex",flexDirection:"column",justifyContent:"space-between"},I.readNext.slice(0,4).map((function(e,t){var n=e.post;return u.createElement("div",{className:D(L),key:t},u.createElement(y,{key:t,post:n}))})))))):null};function M(e){return e&&e.createdAt+C.a>Date.now()}var B=Object(c.gql)(k(),x)},"./src/components/responses/MobileHideSpan.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),s=n.n(a),i=n("./node_modules/react/index.js"),l=n("./src/framework/design-system/components/index.ts"),c=function(e){var t=e.xs,n=e.sm,r=e.children,a=s()(e,["xs","sm","children"]);return i.createElement(l.a,o()({xs:{display:"none"},sm:{display:t?"inline-block":"none"},md:{display:t||n?"inline-block":"none"},lg:{display:"inline-block"},xl:{display:"inline-block"},tag:"span"},a),r)},u=function(e){var t=e.xs,n=e.sm,r=e.children,a=s()(e,["xs","sm","children"]);return i.createElement(l.a,o()({xs:{display:"inline-block"},sm:{display:t?"none":"inline-block"},md:{display:t||n?"none":"inline-block"},lg:{display:"none"},xl:{display:"none"},tag:"span"},a),r)}},"./src/components/responses/ReadOrEditSimpleResponseContext.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/react/index.js"),o=r.createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},"./src/components/responses/ResponseQuote.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./src/components/post/paragraph/TextParagraph.tsx"),u=n("./src/framework/style/index.ts"),d=n("./src/schema-types/globalTypes.ts"),m=n("./src/util/quote.ts");function p(){var e=o()(["\n  fragment ResponseQuote_post on Post {\n    inResponseToMediaResource {\n      href\n      mediumQuote {\n        quoteId\n        startOffset\n        endOffset\n        paragraphs {\n          ...TextParagraph_paragraph\n        }\n        ...buildQuotePreviewParagraph_quote\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.inResponseToMediaResource,n=Object(u.useCx)(),r=null==t?void 0:t.mediumQuote;if(!r)return null;var o=Object(m.a)(r);if(!o||!o.type)return null;var a=o.type;return a===d.m.IMG||a===d.m.IFRAME||a===d.m.COVER_TITLE||a===d.m.HR||a===d.m.MIXTAPE_EMBED||a===d.m.SECTION_CAPTION?null:l.createElement("div",{onClick:function(){var e=null==t?void 0:t.href;if(e){var n=null==e?void 0:e.split("#")[1];if(n){var r=n.split("--")[0];if(r){var o=document.getElementById(r);if(o){var a=(null==o?void 0:o.offsetTop)-100;a&&window.scrollTo({top:a,behavior:"smooth"})}}}}},className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer"})},l.createElement(c.g,{paragraph:g({},o,{name:"embedded-quote-".concat(r.quoteId,"-").concat(o.name)}),paragraphStyle:a,spaceTop:4,richTextStyle:"STREAM"}))},h=Object(i.gql)(p(),m.c,c.d)},"./src/components/responses/ResponsesContext.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/react/index.js"),o=r.createContext({setIsSavingResponse:function(){return null},editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){return null},setInResponseToQuote:function(){return null}})},"./src/components/responses/ResponsesIconButton.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return j}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n.n(s),l=n("./src/components/responses/MobileHideSpan.tsx"),c=n("./src/framework/design-system/components/index.ts"),u=n("./src/framework/design-system/type/index.ts"),d=n("./src/framework/reporter/index.ts"),m=n("./src/framework/source/index.ts"),p=n("./src/framework/style/index.ts"),f=n("./src/svg/response-25px.svg");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=i.a.createElement("path",{clipRule:"evenodd",d:"M24.28 25.5l.32-.29c2.11-1.94 3.4-4.61 3.4-7.56C28 11.83 22.92 7 16.5 7S5 11.83 5 17.65s5.08 10.66 11.5 10.66c1.22 0 2.4-.18 3.5-.5l.5-.15.41.33a8.86 8.86 0 0 0 4.68 2.1 7.34 7.34 0 0 1-1.3-4.15v-.43zm1 .45c0 1.5.46 2.62 1.69 4.44.22.32.01.75-.38.75a9.69 9.69 0 0 1-6.31-2.37c-1.2.35-2.46.54-3.78.54C9.6 29.3 4 24.09 4 17.65 4 11.22 9.6 6 16.5 6S29 11.22 29 17.65c0 3.25-1.42 6.18-3.72 8.3z"}),h=function(e){return i.a.createElement("svg",g({width:33,height:33,viewBox:"0 0 33 33",fill:"none"},e),b)},v=n("./src/util/hooks/useIsEligibleToViewNewResponses.tsx");function E(){var e=o()(["\n  fragment ResponsesIconButton_post on Post {\n    allowResponses\n    postResponses {\n      count\n    }\n  }\n"]);return E=function(){return e},e}var x=function(e){return{fill:e.baseColor.fill.normal}},y=function(e){return{fill:e.baseColor.fill.normal,opacity:.4,cursor:"not-allowed"}},O=function(e){var t=e.allowResponses,n=e.responsesCount,r=e.location,o=e.setIsResponsesSidebarVisible,a=e.postId,i=e.isLimitedState,g=e.shouldHideResponsesText,b=void 0!==g&&g,E=Object(p.useCx)(),O=Object(d.c)(),j=Object(m.d)(),w=Object(v.a)();if(!w||!t)return null;var _="sidebar"===r,S="preview"===r,P="response"===r,C=_||S?s.createElement(f.a,{className:E(x),"aria-label":"responses"}):P?s.createElement(c.a,{position:"relative",top:"2px"},s.createElement(f.a,{"aria-label":"responses"})):s.createElement(s.Fragment,null,s.createElement(l.a,{marginLeft:"-1px"},s.createElement(h,{className:E(x),"aria-label":"responses"})),s.createElement(l.b,{marginLeft:"-4px"},s.createElement(f.a,{className:E(x),"aria-label":"responses"}))),k=s.createElement(c.z,{darkTheme:!0,popoverRenderFn:function(){return s.createElement(c.a,{padding:"8px",whiteSpace:"nowrap"},"This feature is temporarily disabled.")},placement:"top",targetDistance:15},_||S?s.createElement(f.a,{className:E(y),"aria-label":"responses"}):P?s.createElement(c.a,{position:"relative",top:"2px"},s.createElement(f.a,{className:E(y),"aria-label":"responses"})):s.createElement(s.Fragment,null,s.createElement(l.a,{marginLeft:"-1px"},s.createElement(h,{className:E(y),"aria-label":"responses"})),s.createElement(l.b,{marginLeft:"-4px"},s.createElement(f.a,{className:E(y),"aria-label":"responses"})))),I={paddingLeft:_?"6px":P?"3px":"7px",top:_?void 0:P?"3.5px":S?"1px":"3px"},T={paddingLeft:_?"6px":"3px",top:P?"3.5px":S?"-1px":"3px"};return s.createElement("button",{onClick:w&&!i?function(){o(!0),O.event("responses.viewAllClicked",{postId:a,source:j})}:void 0,className:E({cursor:"pointer",border:0,padding:0})},s.createElement(c.a,{display:"flex",flexDirection:"row",alignItems:"center",paddingRight:n?"9px":"4px"},i?k:b?s.createElement(c.z,{darkTheme:!0,popoverRenderFn:function(){return s.createElement(u.b,{scale:"S"},s.createElement(c.a,{padding:"8px",whiteSpace:"nowrap"},s.createElement("span",{className:E({color:"white"})},"Responses")))},placement:"top",targetDistance:15},C):C,s.createElement(c.a,{position:"relative",xs:T,sm:T,md:T,lg:I,xl:I},!!n&&s.createElement(u.b,{scale:"M",color:_?"LIGHTER":"DARKER"},n||null," ",!_&&!P&&!i&&!b&&s.createElement(l.a,null,"response",1===n?"":"s")))))},j=Object(a.gql)(E())},"./src/components/responses/ResponsesSidebar.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return ut})),n.d(t,"a",(function(){return ft}));var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n.n(u),m=n("./src/components/responses/ReadOrEditSimpleResponseContext.tsx"),p=n("./src/components/responses/ResponsesContext.tsx"),f=n("./src/components/editor/editorHelpers.tsx"),g=n("./src/components/post/UgcContext.tsx"),b=n("./src/components/post/multivote/MultiVote.tsx"),h=n("./node_modules/react-redux/es/index.js"),v=n("./src/components/format/TimeAgo.tsx"),E=n("./src/framework/style/index.ts"),x=function(){var e=Object(E.useCx)();return u.createElement("div",{className:e((function(e){return{color:"white",backgroundColor:e.brandColor.sage.dark,borderRadius:"2px",fontSize:"11px",padding:"0px 6px",height:"16px",display:"flex",alignItems:"center",marginLeft:"8px"}}))},"AUTHOR")},y=n("./src/components/session/useFlag.tsx"),O=n("./src/components/session/useViewer.tsx"),j=n("./src/components/user/UserAvatar.tsx"),w=n("./src/framework/design-system/components/index.ts"),_=n("./src/framework/design-system/type/index.ts"),S=n("./src/framework/source/index.ts"),P=n("./src/svg/overflow-dots-filled-25px.svg"),C=n("./src/util/routes.ts"),k=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),I=n.n(k),T=n("./src/components/responses/ResponsesSidebar_PostResponsesQuery.tsx");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e,t){var n,r=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!(null==r?void 0:r.responsesConnection)||null===(null==r?void 0:r.count))return null;var o=r.responsesConnection.stream,a=o.filter((function(e){var n;return(null===(n=e.itemType.post)||void 0===n?void 0:n.id)!==t}));return a.length===o.length?null:Object.assign({},e,{post:L({},e.post,{postResponses:L({},r,{count:r.count-1,responsesConnection:L({},r.responsesConnection,{stream:a})})})})},M=n("./src/components/ui/PopoverMenu.tsx"),B=n("./src/framework/reporter/index.ts"),D=n("./src/store/actions/navigation.ts");function N(){var e=I()(["\n  mutation DeleteResponseMutation($responseId: ID!) {\n    deletePost(targetPostId: $responseId)\n  }\n"]);return N=function(){return e},e}var H,U=Object(c.gql)(N()),F=function(e){var t,n=e.response,r=e.parentPostId,o=e.hidePopoverMenu,a=u.useState(!1),i=s()(a,2),l=i[0],d=i[1],m=Object(B.c)(),p=Object(S.d)(),f=Object(h.e)(),g=Object(O.b)().value,b=Object(c.useMutation)(U,{variables:{responseId:n.id},update:function(e){var t={postId:r,postResponsesPaging:{limit:10}},a=e.readQuery({query:T.a,variables:t}),s=A(a,n.id);null!==s&&(e.writeQuery({query:T.a,data:s,variables:t}),m.event("responses.removed",{postId:n.id,source:p}),f(Object(D.m)({message:"Successfully deleted response."})),o())}}),v=s()(b,1)[0];return(null==g?void 0:g.id)&&(null==g?void 0:g.id)===(null===(t=n.creator)||void 0===t?void 0:t.id)?u.createElement(u.Fragment,null,u.createElement(M.b,null,u.createElement(w.m,{onClick:function(){return d(!0)}},"Delete")),l&&u.createElement(w.g,{isVisible:l,hide:function(){return d(!1)},withCloseButton:!1,noPortal:!0,padding:50},u.createElement(w.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},u.createElement(_.c,{scale:"M"},"Delete"),u.createElement(w.a,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},u.createElement(_.b,{scale:"M",color:"DARKER"},"Deleted responses are gone forever.",u.createElement("br",null),"Are you sure?")),u.createElement(w.a,{display:"flex",marginBottom:"20px"},u.createElement(w.m,{onClick:function(){return d(!1)}},u.createElement(_.b,{scale:"M",color:"DARKER"},"Cancel")),u.createElement(w.a,{marginLeft:"25px"},u.createElement(w.b,{buttonStyle:"ERROR",onClick:v,"data-test-id":"close-discussion-button"},"Delete Response")))))):null};!function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(H||(H={}));var V=n("./src/framework/style/useCx.ts"),z=n("./src/components/user/UserBlockConfirmDialog.tsx");function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(){var e=I()(["\n  mutation UserBlockMutation($targetUserId: ID!, $userId: ID!) {\n    blockUser(userId: $userId, targetUserId: $targetUserId) {\n      id\n      isBlocking\n    }\n  }\n"]);return W=function(){return e},e}var $=Object(c.gql)(W()),K=function(e){var t,n,r=e.response,o=e.parentPost,a=e.hidePopoverMenu,i=Object(O.b)().value,l=Object(B.c)(),d=Object(S.d)(),m=Object(h.e)(),p=u.useState(!1),f=s()(p,2),g=f[0],b=f[1],v=function(){return b(!1)},E=null==r||null===(t=r.creator)||void 0===t?void 0:t.id,x=Object(c.useMutation)($,{variables:{targetUserId:E,userId:null==i?void 0:i.id},update:function(e){var t={postId:o.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:T.a,variables:t}),r=Y(n,E);null!==r&&e.writeQuery({query:T.a,data:r,variables:t})},optimisticResponse:{__typename:"Mutation",blockUser:{__typename:"User",id:E,isBlocking:!0}},onCompleted:function(){v(),m(Object(D.m)({message:"Responses by this user have been hidden from this story."}))}}),y=s()(x,1)[0],j=null===(n=o.creator)||void 0===n?void 0:n.id,_=(null==i?void 0:i.id)===j;return(null==i?void 0:i.id)===E?null:i&&E&&_?u.createElement(u.Fragment,null,u.createElement(M.b,null,u.createElement(w.m,{onClick:function(){b(!0)}},"Block this author")),g&&u.createElement(z.a,{onConfirm:function(){l.event("user.blocked",{userId:E,source:d}),y()},isVisible:g,isInResponsesSidebar:!0,hide:function(){v(),a()}})):null},Y=function(e,t){var n,r=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!t||!(null==r?void 0:r.responsesConnection)||null===(null==r?void 0:r.count))return null;var o=r.responsesConnection.stream,a=o.filter((function(e){var n,r;return(null===(n=e.itemType.post)||void 0===n||null===(r=n.creator)||void 0===r?void 0:r.id)!==t}));if(a.length===o.length)return null;var s=o.length-a.length;return G({},e,{post:G({},e.post,{postResponses:G({},r,{count:r.count-s,responsesConnection:G({},r.responsesConnection,{stream:a})})})})},Q=function(e){var t,n=e.response,r=Object(O.b)().value,o=u.useContext(m.a),a=o.setIsEditing,s=o.isEditing,i=o.setEditingQuote;return(null===(t=n.creator)||void 0===t?void 0:t.id)===(null==r?void 0:r.id)?u.createElement(M.b,null,u.createElement(w.m,{onClick:function(){n.inResponseToMediaResource&&i(n.inResponseToMediaResource.mediumQuote),a(!s)}},"Edit this response")):null};function X(){var e=I()(["\n  mutation HidePostResponseOnParentMutation($parentPostId: ID!, $postResponseId: ID!) {\n    hidePostResponseOnParentPost(parentPostId: $parentPostId, postResponseId: $postResponseId)\n  }\n"]);return X=function(){return e},e}var J=Object(c.gql)(X()),Z=function(e){var t,n,r,o=e.responseToBeHidden,a=e.parentPost,i=e.hidePopoverMenu,l=Object(O.b)().value,d=Object(h.e)(),m=Object(B.c)(),p=Object(S.d)(),f=(null==l?void 0:l.id)===(null===(t=a.creator)||void 0===t?void 0:t.id),g=null==a||null===(n=a.collection)||void 0===n?void 0:n.viewerIsEditor,b=(null==l?void 0:l.id)===(null===(r=o.creator)||void 0===r?void 0:r.id),v=Object(c.useMutation)(J,{variables:{postResponseId:o.id,parentPostId:a.id},update:function(e){var t={postId:a.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:T.a,variables:t}),r=A(n,o.id);null!==r&&(e.writeQuery({query:T.a,data:r,variables:t}),m.event("response.hidden",{postId:o.id,source:p}),d(Object(D.m)({message:"",toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:o.id,parentPostId:a.id}})),i())}}),E=s()(v,1)[0];return b?null:f||g?u.createElement(M.b,null,u.createElement(w.m,{onClick:E},"Hide this response")):null};function ee(){var e=I()(["\n  mutation UserReportStoryMutation(\n    $targetPostId: ID!\n    $targetAuthorId: ID!\n    $alsoBlockAuthor: Boolean!\n    $reason: String!\n  ) {\n    reportStoryAndMaybeBlockAuthor(\n      targetPostId: $targetPostId\n      targetAuthorId: $targetAuthorId\n      alsoBlockAuthor: $alsoBlockAuthor\n      reason: $reason\n    ) {\n      id\n      isBlocking\n    }\n  }\n"]);return ee=function(){return e},e}var te=Object(c.gql)(ee()),ne=n("./src/components/susi/SusiClickable.tsx"),re=n("./src/components/user/UserReportStoryDialog.tsx"),oe=function(e){var t,n=e.response,r=e.parentPost,o=e.hidePopoverMenu,a=Object(O.b)().value,i=Object(B.c)(),l=Object(S.d)(),d=u.useState(!1),m=s()(d,2),p=m[0],f=m[1],g=function(e){var t,n,r=e.response,o=r.id,a=null===(t=r.creator)||void 0===t?void 0:t.id,i=null===(n=r.creator)||void 0===n?void 0:n.isBlocking,l=Object(h.e)(),d=Object(c.useMutation)(te,{variables:{targetPostId:o,targetAuthorId:a,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){l(Object(D.m)({message:"Successfully reported post."}))}}),m=s()(d,2),p=m[0],f=m[1];return{reportStory:u.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,r=e.reportReason;return p({variables:{targetPostId:o,targetAuthorId:a,alsoBlockAuthor:n,reason:void 0===r?"Spam":r},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:a,isBlocking:i||n}}})}),[r,p]),error:null==f?void 0:f.error,loading:null==f?void 0:f.loading}}({response:n}).reportStory,b=(null==a?void 0:a.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);return!n.creator||b?null:u.createElement(u.Fragment,null,u.createElement(M.b,null,(null==a?void 0:a.id)?u.createElement(w.m,{onClick:function(){return f(!0)}},"Report this response"):u.createElement(S.b,{source:{susiEntry:"respond_sidebar"}},u.createElement(ne.a,{operation:"register",post:r},"Report this response"))),u.createElement(re.a,{onSubmit:function(e,t){return i.event("response.flagged",{postId:n.id,reason:t,source:l}),g({alsoBlockAuthor:e,reportReason:t})},isVisible:p,hide:function(){f(!1),o()},isResponse:!0}))},ae=n("./src/components/post/multivote/ClapMutation.tsx"),se=n("./src/store/actions/multiVote.ts"),ie=n("./src/util/post/claps.ts"),le=function(e){var t=e.response,n=e.hidePopoverMenu,r=Object(ae.b)(),o=Object(B.c)(),a=Object(O.b)().value,s=Object(S.d)(),i=Object(h.f)((function(e){return e.multiVote.clapsPerPost})),l=Object(h.e)(),c=u.useCallback((function(e){return l(Object(se.d)(e))}),[l]),d=Object(ie.a)(i,t),m=d.clapCount,p=d.viewerClapCount;return(null==a?void 0:a.id)&&0!==m&&0!==p?u.createElement(M.b,null,u.createElement(w.m,{onClick:function(){r(t,(null==a?void 0:a.id)||"",-p),c({postId:t.id,clapCount:m-p,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),o.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:p,source:s}),n()}},"Undo applause for this response")):null},ce={position:"absolute !important",top:"-16px",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"150px"},ue=function(e){var t=e.response,n=e.responseType,r=e.parentPost,o=e.isPopoverMenuVisible,a=e.hidePopoverMenu,s=Object(V.a)(),i=Boolean(Object(y.a)("enable_responses_moderation")),l=t.creator,c=Boolean(Object(y.a)("enable_responses_edit_and_delete")),d=u.useRef(null);return u.useEffect((function(){var e=function(e){var t;(null==d||null===(t=d.current)||void 0===t?void 0:t.contains(e.target))||a()};if(o)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[o]),t&&l?u.createElement("div",{className:s(ce),ref:d},u.createElement(M.a,null,u.createElement(u.Fragment,null,u.createElement(oe,{response:t,parentPost:r,hidePopoverMenu:a}),i&&u.createElement(u.Fragment,null,u.createElement(Z,{responseToBeHidden:t,parentPost:r,hidePopoverMenu:a}),u.createElement(K,{response:t,parentPost:r,hidePopoverMenu:a})),n===H.SIMPLE&&u.createElement(le,{response:t,hidePopoverMenu:a})),c&&u.createElement(u.Fragment,null,n===H.SIMPLE&&u.createElement(Q,{response:t}),u.createElement(F,{response:t,hidePopoverMenu:a,parentPostId:r.id})))):null},de=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},me=function(e){var t,n=e.response,r=e.responseType,o=e.parentPost,a=Object(O.b)().value,i=Object(E.useCx)(),l=n.creator,c=n.mediumUrl,d=n.createdAt,m=u.useState(!1),p=s()(m,2),f=p[0],g=p[1],b=Boolean(Object(y.a)("enable_responses_edit_and_delete")),k=Object(h.f)((function(e){return e.config.authDomain}));if(!n||!l||!c)return null;var I=(null===(t=o.creator)||void 0===t?void 0:t.id)===l.id,T=(null==a?void 0:a.id)===l.id,R=!!b||!T,L=b&&function(e,t){return e&&t===H.SIMPLE}(n,r)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt);return u.createElement(u.Fragment,null,u.createElement(w.a,{display:"flex",flexDirection:"row",justifyContent:"space-between"},u.createElement(w.a,{display:"flex",flexDirection:"row",alignItems:"center"},u.createElement(j.d,{scale:"XS",user:l}),u.createElement(w.a,{paddingLeft:"12px"},u.createElement(w.a,{display:"flex",flexDirection:"row"},u.createElement(w.m,{href:Object(C.Ac)(l.username||"",k,l.hasDomain)},u.createElement(_.b,{scale:"M",color:"DARKER"},l.name)),I&&u.createElement(x,null)),u.createElement(w.m,{href:c,linkStyle:"SUBTLE",inline:!0,noFollow:!0},u.createElement(_.b,{scale:"M"},u.createElement(v.a,{timestamp:d}),L&&u.createElement(u.Fragment,null," (edited)"))))),R&&u.createElement(w.m,{onClick:function(e){e.nativeEvent.stopPropagation(),g(!f)},inline:!0,className:i(de)},u.createElement(P.a,null))),f&&u.createElement("div",{className:i({position:"relative"})},u.createElement(S.b,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement(ue,{response:n,responseType:r,parentPost:o,isPopoverMenuVisible:f,hidePopoverMenu:function(){return g(!1)}}))))},pe=n("./src/components/responses/ResponseQuote.tsx"),fe=n("./src/components/responses/ResponsesIconButton.tsx"),ge=n("./src/components/post/markups/Markups.tsx"),be=n("./src/schema-types/globalTypes.ts"),he=n("./src/util/string.ts");function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return"char"===e&&t>f.b||"line"===e&&n>f.c}function ye(e){var t=e.paragraphs,n=e.truncateStrategy,r=e.isExpanded,o=Object(E.useCx)(),a=0,s=0,i="none"!==n&&!r;return u.createElement("pre",{className:o({whiteSpace:"pre-wrap"})},t.map((function(e){if(!r&&xe(n,a,s))return null;var t=(null==e?void 0:e.text)||"";a+=t.length||0,s+=t.split("\n").length||0;var l=Ee({},e,{dropCapImage:null,hasDropCap:null}),c=!r&&xe(n,a,s);if(c&&"char"===n){var d=f.b-(a-t.length||0);l.markups=l.markups.reduce((function(e,t){if(t.start<d){var n=Ee({},t);n.end>d&&(n.end=d),e.push(n)}return e}),[]),l.text=Object(he.b)(t,d)}return u.createElement(w.a,{padding:"5px 0px",key:e.name||e.id},u.createElement(_.b,{scale:"M",color:"DARKER"},u.createElement("div",{className:o({lineHeight:"24px"})},u.createElement(ge.a,{paragraph:l,richTextStyle:"FULL_PAGE",paragraphStyle:be.m.P}),i&&c&&"...")))})).filter((function(e){return!!e})))}var Oe=n("./src/framework/track/index.ts"),je=n("./src/framework/track/PostPresentationTracker.tsx"),we=n("./src/util/useragent.ts"),_e=function(){return{paddingBottom:"5px",cursor:"pointer"}},Se=function(e){var t,n=e.simpleResponse,r=e.parentPost,o=e.omitBottomBorder,a=n.creator,i=n.content,l=n.mediumUrl,c=n.isLimitedState,d=u.useState(!1),m=s()(d,2),p=m[0],h=m[1],v=u.useRef(null),x=Object(E.useCx)();Object(Oe.h)(v,n);var y=null==i||null===(t=i.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(a&&i&&y&&l))return null;var O,j=y.map((function(e){return e.text||""})),P=(O=j).join("").length>f.b?"char":O.join("\n").split("\n").length>f.c?"line":"none",C="none"!==P,k=C&&!p,I=Object(we.d)(navigator&&navigator.userAgent);return u.createElement(je.b,{post:n,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!C},u.createElement(w.a,{paddingTop:"25px",paddingBottom:I&&o?"48px":"16px",borderBottom:o?void 0:"BASE_LIGHTER",ref:v},u.createElement(me,{response:n,responseType:H.SIMPLE,parentPost:r}),u.createElement(pe.a,{inResponseToMediaResource:n.inResponseToMediaResource}),u.createElement(w.a,{marginTop:"5px"},u.createElement(g.a.Provider,{value:!0},u.createElement(ye,{paragraphs:y,truncateStrategy:P,isExpanded:p}))),k&&u.createElement("div",{onClick:function(){return h(!0)},className:x(_e)},u.createElement(_.b,{scale:"S",color:"ACCENT"},"Read More")),u.createElement(w.a,{display:"flex",flexDirection:"row",alignItems:"center",marginTop:"14px"},u.createElement(S.b,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement(b.a,{buttonStyle:"SUBTLE",post:n,shouldShowResponsiveLabelText:!0})),u.createElement(w.a,{width:"12px"}),u.createElement(w.m,{href:l+"?responsesOpen=true"},u.createElement(fe.a,{location:"response",postId:n.id,responsesCount:n.responsesCount,setIsResponsesSidebarVisible:function(){},allowResponses:n.allowResponses,isLimitedState:c})))))},Pe=n("./node_modules/react-loadable/lib/index.js"),Ce=n.n(Pe),ke=n("./src/components/responses/editor/SimpleEditorType.tsx"),Ie=n("./src/screens/ErrorScreen.tsx"),Te=n("./src/screens/LoadingScreen.tsx");function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Le={delay:1e3,timeout:2e4,loading:function(e){return e.error?u.createElement(Ie.a,{error:e.error}):e.timedOut?u.createElement(Ie.a,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?u.createElement(Te.a,null):null}},Ae=Ce()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Le,{loader:function(){return Promise.all([n.e(8),n.e(71)]).then(n.bind(null,"./src/components/responses/editor/InlineResponseEditor.tsx"))},modules:["src/components/responses/editor/InlineResponseEditor"],webpack:function(){return["./src/components/responses/editor/InlineResponseEditor.tsx"]},render:function(e,t){var n=e.InlineResponseEditor;return u.createElement(n,t)}})),Me=function(e){var t=e.parentPostId,n=e.responseId,r=e.type,o=void 0===r?ke.a.create:r,a=e.initialValue;return u.createElement(Ae,{parentPostId:t,responseId:n,type:o,initialValue:a})},Be=function(e){var t,n,r,a,i=e.response,l=e.index,c=e.parentPost,d=e.omitBottomBorder,f=u.useState(!1),g=s()(f,2),b=g[0],h=g[1],v=u.useState(null),E=s()(v,2),x=E[0],y=E[1],O=u.useContext(p.a),j=O.editingResponsesAtIndices,w=O.setEditingResponsesAtIndices;return u.useEffect((function(){if(b&&!j.includes(l)&&w([].concat(o()(j),[l])),!b&&j.includes(l)){var e=j.filter((function(e){return e!==l}));w(e)}}),[b,j,w]),i.post?b?u.createElement(m.a.Provider,{value:{isEditing:b,setIsEditing:h,latestRev:null===(t=i.post)||void 0===t?void 0:t.latestRev,createdAt:null===(n=i.post)||void 0===n?void 0:n.createdAt,setEditingQuote:y,editingQuote:x}},u.createElement(S.b,{source:{index:l},key:i.post.id,extendSource:!0},u.createElement(Me,{type:ke.a.edit,parentPostId:c.id,responseId:i.post.id,initialValue:null==i||null===(r=i.post)||void 0===r||null===(a=r.content)||void 0===a?void 0:a.bodyModel}))):u.createElement(m.a.Provider,{value:{isEditing:b,setIsEditing:h,setEditingQuote:y,editingQuote:x}},u.createElement(S.b,{source:{index:l},key:i.post.id,extendSource:!0},u.createElement(Se,{parentPost:c,simpleResponse:i.post,omitBottomBorder:d}))):null},De={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},Ne=function(){var e=Object(E.useKeyframes)({shimmerKeyframesName:De}).shimmerKeyframesName,t=Object(E.useCx)();return u.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},u.createElement(w.a,{display:"flex",flexDirection:"row"},u.createElement(w.a,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),u.createElement(w.a,{marginLeft:"8px",marginTop:"4px"},u.createElement(w.a,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(w.a,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),u.createElement(w.a,{marginTop:"12px"},u.createElement(w.a,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(w.a,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(w.a,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))},He=n("./src/svg/clap-filled-19px.svg"),Ue=n("./src/svg/response-filled-19px.svg"),Fe=n("./src/util/numbers.ts"),Ve=function(e){return{fill:e.baseColor.fill.lighter,float:"right"}},ze=function(e){var t,n,r=e.storyResponse,o=e.parentPost,a=e.omitBottomBorder,s=Object(E.useCx)(),i=r.creator,l=r.previewContent,c=r.mediumUrl,d=r.clapCount,m=r.responsesCount,p=null==l||null===(t=l.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(i&&l&&l.bodyModel&&c&&p))return null;var f=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var i=a.value;if(i.text&&(t.push(i),t.length>=2))break}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return{title:t[0],subtitle:t[1]}}(p);if(!f.title&&!f.subtitle)return null;var g,b=null!==(null===(n=r.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),h=m||0;return u.createElement(je.b,{post:r,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!1},u.createElement(w.a,{paddingTop:"25px",paddingBottom:"20px",borderBottom:a?void 0:"BASE_LIGHTER"},u.createElement(me,{response:r,responseType:H.STORY,parentPost:o}),u.createElement(pe.a,{inResponseToMediaResource:r.inResponseToMediaResource}),u.createElement(w.d,{href:Object(C.Gb)(r)},u.createElement("div",{className:s({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:b?"12px":"16px"})},u.createElement("div",{className:s(Ve)},u.createElement(_.b,{scale:"S",color:"LIGHTER"},u.createElement(w.a,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:d>0||h>0?"20px":"0"},d>0?u.createElement(w.a,{display:"flex",alignItems:"center"},u.createElement(w.a,{tag:He.a,marginRight:"2px"}),u.createElement("div",null,Object(Fe.d)(d))):null,h>0?u.createElement(w.a,{display:"flex",alignItems:"center"},u.createElement(w.a,{tag:Ue.a,marginLeft:d?"8px":"0",marginRight:"2px"}),u.createElement("div",null,Object(Fe.d)(h))):null))),u.createElement(_.b,{scale:"M",clamp:2,color:"DARKER"},f.title&&u.createElement(w.a,null,f.title.text),f.subtitle&&u.createElement("div",{className:s((g=f.title.type,function(e){return{color:g===be.m.H3?e.baseColor.text.lighter:e.baseColor.text.normal}}))},f.subtitle.text))))))},qe=n("./src/components/responses/management-menu/CloseDiscussionMenuItem.tsx"),Ge={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},We=function(e){var t=e.parentPostId,n=e.responsesLocked,r=e.isPopoverMenuVisible,o=e.hidePopoverMenu,a=Object(V.a)(),s=Object(h.f)((function(e){return e.config.authDomain})),i=u.useRef(null);return u.useEffect((function(){var e=function(e){var t;(null==i||null===(t=i.current)||void 0===t?void 0:t.contains(e.target))||o()};if(r)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[r]),u.createElement("div",{className:a(Ge),ref:i},u.createElement(M.a,null,u.createElement(M.b,null,u.createElement(w.m,{href:Object(C.Fb)(s,t)},"Manage responses")),u.createElement(qe.a,{parentPostId:t,responsesLocked:n,hidePopoverMenu:o})))},$e=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},Ke=function(e){var t,n,r=e.parentPost,o=e.responsesLocked,a=Object(V.a)(),i=Object(O.b)().value,l=Object(h.f)((function(e){return e.config.authDomain})),c=Boolean(Object(y.a)("enable_lock_responses")),d=u.useState(!1),m=s()(d,2),p=m[0],f=m[1],g=(null==i?void 0:i.id)===(null===(t=r.creator)||void 0===t?void 0:t.id),b=null==r||null===(n=r.collection)||void 0===n?void 0:n.viewerIsEditor;return g||b?c?u.createElement(w.a,null,u.createElement(w.m,{onClick:function(e){e.nativeEvent.stopPropagation(),f(!p)},inline:!0,className:a($e)},u.createElement(P.a,null)),p&&u.createElement("div",{className:a({position:"relative"})},u.createElement(S.b,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement(We,{parentPostId:r.id,responsesLocked:o,isPopoverMenuVisible:p,hidePopoverMenu:function(){return f(!1)}})))):u.createElement(w.a,{paddingRight:"8px"},u.createElement(w.m,{href:Object(C.Fb)(l,r.id),linkStyle:"OBVIOUS",inline:!0},u.createElement(_.b,{scale:"S",color:"LIGHTER"},"Manage responses"))):null},Ye=n("./src/components/session/RequireFlag.tsx"),Qe=n("./src/framework/design-system/components/buttons/CloseButton.tsx");function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Je,Ze,et=d.a.createElement("path",{d:"M3.85 5.15a.5.5 0 0 0-.7.7l4.35 4.36 4.35-4.36a.5.5 0 1 0-.7-.7L7.5 8.79 3.85 5.15z",fillRule:"evenodd"}),tt=function(e){return d.a.createElement("svg",Xe({width:15,height:15,viewBox:"0 0 15 15"},e),et)};!function(e){e.StoryResponse="StreamItemPostStoryResponse",e.SimpleResponse="StreamItemPostSimpleResponse"}(Je||(Je={})),function(e){e.Recommended="Recommended",e.Oldest="Oldest",e.Newest="Newest"}(Ze||(Ze={}));var nt=[Ze.Recommended,Ze.Newest,Ze.Oldest],rt={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},ot=function(e){var t,n,r,o=e.responses,a=e.parentPost,i=e.responsesLocked,l=e.isLockedResponse,c=e.isLoadingInitialContent,d=e.isFetchingNextSetOfResponses,m=e.isResponsesSidebarVisible,f=e.setIsResponsesSidebarVisible,g=e.inResponseToQuote,b=e.setInResponseToQuote,h=Object(E.useCx)(),v=u.useState(Ze.Recommended),x=s()(v,2),y=x[0],O=x[1],j=u.useState(!1),P=s()(j,2),C=P[0],k=P[1],I=u.useState([]),T=s()(I,2),R=T[0],L=T[1],A=a.id,B=(null==o?void 0:o.count)&&0!==(null==o?void 0:o.count)?"(".concat(null==o?void 0:o.count,")"):"",D=null==o||null===(t=o.responsesConnection)||void 0===t?void 0:t.stream,N=null==o||null===(n=o.responsesConnection)||void 0===n||null===(r=n.pagingInfo)||void 0===r?void 0:r.next,H=D&&o&&o.count&&(null==D?void 0:D.length)<(null==o?void 0:o.count)-1,U=d&&N&&H;return u.createElement(p.a.Provider,{value:{setIsSavingResponse:k,responsesLocked:i,isLockedResponse:l,editingResponsesAtIndices:R,setEditingResponsesAtIndices:L,inResponseToQuote:g,setInResponseToQuote:b}},m&&C&&u.createElement(w.n,{horizontalOverride:{left:"calc(100vw - ".concat(ut,")")}}),u.createElement(w.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},u.createElement(_.c,{scale:"S"},"Responses ",B),u.createElement(w.a,{display:"flex",flexDirection:"row"},u.createElement(Ke,{parentPost:a,responsesLocked:i}),u.createElement(w.a,{position:"relative",right:"-7px"},u.createElement(Qe.a,{onClick:function(){return f(!1)},size:"REGULAR",isPositionAbsolute:!1})))),c?u.createElement(w.a,{padding:"0 24px"},u.createElement(Ne,null)):u.createElement(u.Fragment,null,u.createElement(Me,{parentPostId:A}),u.createElement(Ye.a,{name:"enable_responses_sortby"},u.createElement(w.A,{initialVisibility:!0},(function(e){var t=e.isVisible,n=e.toggle,r=e.hide;return u.createElement(w.a,{backgroundColor:"BASE_LIGHT",padding:"10px 24px"},u.createElement(w.p,{isVisible:t,hide:r,customZIndex:530,popoverRenderFn:function(){return u.createElement(M.a,null,nt.map((function(e){return u.createElement(M.b,null,u.createElement(w.m,{linkStyle:"SUBTLE",onClick:function(){!function(e){O(e)}(e),r()}},e))})))}},u.createElement(w.m,{onClick:n},y,u.createElement(tt,{className:h({margin:"0px 5px"})}))))}))),o&&0!==(null==D?void 0:D.length)?u.createElement(w.a,{padding:"0 24px"},null==D?void 0:D.map((function(e,t){var n=e.itemType.__typename,r=R.includes(t+1),o=D.length-1===t;switch(n){case Je.SimpleResponse:var s=e.itemType;return s.post?u.createElement(Be,{key:s.post.id,response:s,index:t,parentPost:a,omitBottomBorder:r||o}):null;case Je.StoryResponse:var i=e.itemType;return i.post?u.createElement(S.b,{source:{index:t},key:i.post.id,extendSource:!0},u.createElement(ze,{storyResponse:i.post,parentPost:a,omitBottomBorder:r||o})):null;default:return null}})),U&&u.createElement(Ne,null)):u.createElement("div",{className:h(rt)},u.createElement(_.b,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),u.createElement(_.b,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},at=n("./src/components/style/BaseThemeProvider.tsx"),st=n("./src/styles/breakpoints.ts");function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct=function(){return{top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,transition:"opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",pointerEvents:"none"}},ut="414px",dt=function(e){return l()({width:ut,position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},Object(st.sm)(e),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"})},mt=function(e,t){return function(n){if(e){var r=n.breakpoints.md-.02;return t<=r?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},pt=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},ft=function(e){var t,n,r,o,a,i,l=e.setIsResponsesSidebarVisible,d=e.isResponsesSidebarVisible,m=e.inResponseToQuote,p=e.setInResponseToQuote,f=e.parentPost,g=Object(at.c)().baseTheme,b=Object(E.useCx)(),h=Object(c.useQuery)(T.a,{variables:{postId:f.id,postResponsesPaging:{limit:10}},ssr:!1}),v=h.loading,x=h.data,y=h.fetchMore,O=null==x||null===(t=x.post)||void 0===t?void 0:t.responsesLocked,j=null==x||null===(n=x.post)||void 0===n?void 0:n.isLockedResponse,_=null==x||null===(r=x.post)||void 0===r?void 0:r.postResponses,P=u.useState(0),C=s()(P,2),k=C[0],I=C[1],R=u.useState(!1),L=s()(R,2),A=L[0],M=L[1];u.useEffect((function(){k||I(window.innerWidth)}),[]);var B=null==_||null===(o=_.responsesConnection)||void 0===o||null===(a=o.pagingInfo)||void 0===a?void 0:a.next;if(B){var D={postId:f.id,postResponsesPaging:{limit:B.limit,to:B.to}};i=function(){return y({variables:D,updateQuery:function(e,t){var n=t.fetchMoreResult;return M(!1),bt(e,n)}})}}return u.createElement(w.x,{theme:g},u.createElement(S.b,{source:{name:"responses",postId:f.id},extendSource:!0},u.createElement(w.a,{print:{display:"none"}},u.createElement("div",{className:b([ct,pt(d)]),onClick:function(){l(!1)},"aria-hidden":!d}),u.createElement("div",{className:b([dt,mt(d,k)]),"aria-hidden":!d,onScroll:function(e){return gt(e,B,A,M,i)}},u.createElement(ot,{responses:_,parentPost:f,responsesLocked:O,isLockedResponse:j,isLoadingInitialContent:v,isFetchingNextSetOfResponses:A,isResponsesSidebarVisible:d,setIsResponsesSidebarVisible:l,inResponseToQuote:m,setInResponseToQuote:p})))))},gt=function(e,t,n,r,o){e.preventDefault();var a=e.currentTarget;a.scrollHeight-a.scrollTop-a.clientHeight<1.5*a.clientHeight&&t&&!n&&(r(!0),o())},bt=function(e,t){var n,r,a,s,i,l,c,u,d=null==t||null===(n=t.post)||void 0===n?void 0:n.postResponses,m=null==t?void 0:t.post;if(!m||!d||!(null===(r=d.responsesConnection)||void 0===r?void 0:r.stream))return e;var p=(null==e||null===(a=e.post)||void 0===a||null===(s=a.postResponses)||void 0===s||null===(i=s.responsesConnection)||void 0===i?void 0:i.stream)||[],f=(null==t||null===(l=t.post)||void 0===l||null===(c=l.postResponses)||void 0===c||null===(u=c.responsesConnection)||void 0===u?void 0:u.stream)||[];return{post:lt({},m,{postResponses:lt({},d,{responsesConnection:lt({},d.responsesConnection,{stream:[].concat(o()(p),o()(f))})})})}}},"./src/components/responses/ResponsesSidebar_PostResponsesQuery.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./src/components/responses/SimpleResponse_simpleResponse.tsx"),i=n("./src/components/user/UserAvatar.tsx"),l=n("./src/framework/track/PostPresentationTracker.tsx");function c(){var e=o()(["\n  fragment ResponseHeader_post on Post {\n    createdAt\n    creator {\n      ...UserAvatar_user\n      isBlocking\n    }\n    mediumUrl\n  }\n  ","\n"]);return c=function(){return e},e}var u=Object(a.gql)(c(),i.b),d=n("./src/components/responses/ResponseQuote.tsx");function m(){var e=o()(["\n  fragment StoryResponse_storyResponse on StreamItemPostStoryResponse {\n    post {\n      ...ResponseHeader_post\n      ...ResponseQuote_post\n      id\n      responsesCount\n      creator {\n        isBlocking\n        hasDomain\n      }\n      clapCount\n      ...PostPresentationTracker_post\n      previewContent {\n        bodyModel {\n          paragraphs {\n            text\n            type\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var p=Object(a.gql)(m(),u,i.b,l.a,d.b),f=n("./src/components/responses/management-menu/CloseDiscussionMenuItem.tsx");function g(){var e=o()(['\n  query PostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      postResponses {\n        count\n        responsesConnection(paging: $postResponsesPaging) @connection(key: "responsesConnection") {\n          pagingInfo {\n            next {\n              limit\n              to\n            }\n          }\n          stream {\n            itemType {\n              __typename\n              ... on StreamItemPostStoryResponse {\n                ...StoryResponse_storyResponse\n              }\n              ... on StreamItemPostSimpleResponse {\n                ...SimpleResponse_simpleResponse\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n"]);return g=function(){return e},e}var b=Object(a.gql)(g(),f.b,p,s.a)},"./src/components/responses/SimpleResponse_simpleResponse.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./src/components/editor/getSlateBodyFromPostBodyModel_bodyModel.tsx"),i=n("./src/components/responses/ResponseQuote.tsx"),l=n("./src/framework/track/index.ts");function c(){var e=o()(["\n  fragment SimpleResponse_simpleResponse on StreamItemPostSimpleResponse {\n    post {\n      id\n      createdAt\n      firstPublishedAt\n      latestPublishedAt\n      title\n      creator {\n        id\n        name\n        username\n        imageId\n        mediumMemberAt\n        isBlocking\n        hasDomain\n      }\n      clapCount\n      viewerClapCount\n      isPublished\n      voterCount\n      responsesCount\n      allowResponses\n      latestRev\n      recommenders {\n        id\n        name\n      }\n      mediumUrl\n      content {\n        bodyModel {\n          paragraphs {\n            text\n          }\n          ...getSlateBodyFromPostBodyModel_bodyModel\n        }\n      }\n      collection {\n        id\n        slug\n      }\n      isLimitedState\n      ...PostPresentationTracker_post\n      ...PostScrollTracker_post\n      ...ResponseQuote_post\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return c=function(){return e},e}var u=Object(a.gql)(c(),l.c,l.e,i.b,s.a)},"./src/components/responses/editor/SimpleEditorType.tsx":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.edit="EDIT",e.create="CREATE"}(r||(r={}))},"./src/components/responses/management-menu/CloseDiscussionMenuItem.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return C}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n("./src/components/ui/PopoverMenu.tsx"),m=n("./src/framework/design-system/components/index.ts"),p=n("./src/framework/design-system/type/index.ts"),f=n("./src/framework/reporter/index.ts"),g=n("./src/framework/source/index.ts"),b=n("./src/framework/style/index.ts");function h(){var e=l()(["\n  query FetchPostResponsesLockedQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=l()(["\n  fragment CloseDiscussion_post on Post {\n    id\n    responsesLocked\n    isLockedResponse\n  }\n"]);return v=function(){return e},e}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(){var e=l()(["\n  mutation UnlockResponsesOnPostMutation($postId: ID!) {\n    unlockResponsesOnPost(postId: $postId)\n  }\n"]);return y=function(){return e},e}function O(){var e=l()(["\n  mutation LockResponsesOnPostMutation($postId: ID!) {\n    lockResponsesOnPost(postId: $postId)\n  }\n"]);return O=function(){return e},e}var j=function(){return{fontStyle:"italic",textAlign:"center"}},w=Object(c.gql)(O()),_=Object(c.gql)(y()),S=function(e){var t,n=e.parentPostId,r=e.responsesLocked,o=e.hidePopoverMenu,a=Object(b.useCx)(),i=Object(f.c)(),l=Object(g.d)(),h=u.useState(!1),v=s()(h,2),E=v[0],x=v[1],y=Object(c.useMutation)(w,{variables:{postId:n},update:function(e){i.event("responses.locked",{postId:n,source:l}),P(e,n,!0,o)}}),O=s()(y,1)[0],S=Object(c.useMutation)(_,{variables:{postId:n},update:function(e){P(e,n,!1,o)}}),C=s()(S,1)[0];return t=!0===r?u.createElement(m.m,{onClick:C},"Open discussion"):u.createElement(m.m,{onClick:function(){return x(!0)}},"Close discussion"),u.createElement(u.Fragment,null,u.createElement(d.b,null,t),E&&u.createElement(m.g,{isVisible:E,hide:function(){return x(!1)},withCloseButton:!1,noPortal:!0,padding:50},u.createElement(m.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},u.createElement(p.c,{scale:"M"},"Close Discussion"),u.createElement(m.a,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},u.createElement(p.b,{scale:"M",color:"DARKER"},"Closing a discussion prevents responses from being added or edited on your story. Existing responses will remain on your story.")),u.createElement(m.a,{display:"flex",marginBottom:"20px"},u.createElement(m.m,{onClick:function(){return x(!1)}},u.createElement(p.b,{scale:"M",color:"DARKER"},"Cancel")),u.createElement(m.a,{marginLeft:"25px"},u.createElement(m.b,{buttonStyle:"ERROR",onClick:O,"data-test-id":"close-discussion-button"},"Close discussion"))),u.createElement("div",{className:a(j)},u.createElement(p.b,{scale:"M"},"You can reopen the discussion at any time.")))))},P=function(e,t,n,r){var o=e.readQuery({query:k,variables:{postId:t}});o&&(e.writeQuery({query:k,data:Object.assign({},o,{post:x({},o.post,{responsesLocked:n})}),variables:{postId:t}}),r())},C=Object(c.gql)(v()),k=Object(c.gql)(h(),C)},"./src/components/sequence/NormalizeSequenceBodyModel.ts":function(e,t,n){"use strict";n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return f}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/lodash/cloneDeep.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./src/components/post/NormalizePostBodyModel.ts");function d(){var e=o()(["\n  fragment NormalizeSequenceBodyModel_bodyModel on RichText {\n    ...GetFeaturedImageIndex_bodyModel\n    ...GetTitleIndexMap_bodyModel\n    sections {\n      name\n      startIndex\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){var t=Object(u.d)(e.paragraphs),n=[t.titleIndex,t.subtitleIndex,Object(u.c)(e.paragraphs)].filter((function(e){return null!=e})).sort(),r=e.paragraphs.slice(0),o=l()(e.sections);n.forEach((function(t,n){r.splice(t-n,1);for(var a=1;a<e.sections.length;a++){var s=e.sections[a],i=o[a];s.startIndex>=t&&(i.startIndex-=1)}}));var a=o.slice(1).filter((function(e){return e.startIndex>0}));return o.length>0&&a.unshift(o[0]),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{paragraphs:r,sections:a})}n.d(t,"e",(function(){return u.d})),n.d(t,"d",(function(){return u.c})),n.d(t,"b",(function(){return u.b})),n.d(t,"a",(function(){return u.a}));var f=Object(c.gql)(d(),u.a,u.b)},"./src/components/sequence/SequenceCoverImage.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/ui/image/index.ts"),l=n("./src/util/miroImage.ts");function c(){var e=o()(["\n  fragment SequenceCoverImage_sequence on Sequence {\n    title\n    coverImage {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function u(e){var t=e.sequence,n=e.width,r=e.height,o=t.title,a=t.coverImage;return a?s.createElement("div",null,s.createElement(i.c,{miroId:a.id,alt:o||"Collection on Medium",width:n,height:r,strategy:l.a.Resample,freezeGifs:!1})):null}var d=Object(a.gql)(c())},"./src/components/sidebar/SidebarWrapper.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return x}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n("./src/WatchBounds.tsx"),i=n("./src/components/metabar/constants.ts"),l=n("./src/components/session/useFlag.tsx"),c=n("./src/framework/design-system/components/index.ts"),u=n("./src/framework/style/index.ts"),d=n("./src/framework/track/DomMonitor.ts"),m=n("./src/styles/breakpoints.ts"),p=n("./src/styles/mediaTypes.ts"),f=n("./src/util/dom.ts"),g=131,b=function(e){var t,n,r,c=e.isFixed,u=void 0===c||c,d=e.disableTransition,f=void 0!==d&&d,b=e.scrollableRef,h=e.topOffset,v=e.visible,E=e.fixedWidth,x=!!Object(l.a)("enable_different_grid"),y=(r=null===(t=a.useContext(s.b).watchedBounds.get("header"))||void 0===t||null===(n=t.ref)||void 0===n?void 0:n.current)?r.offsetTop+r.offsetHeight+64:i.a+54+40;return function(e){var t,n=m.lg(e);x&&(n=Object(p.a)(e,g,e.grid.xStep*e.grid.marginSteps.lg,b&&"current"in b?b.current:null));var r=void 0===h?y:h;return t={opacity:v?1:0,pointerEvents:"none",position:u?"fixed":"absolute",willChange:"opacity",width:E?"".concat(E,"px"):"100%",top:"".concat(r,"px")},o()(t,Object(p.c)("no-preference"),{transition:f?"opacity 0s":"opacity 200ms"}),o()(t,n,{display:"none"}),t}},h=function(e){return{pointerEvents:e?"auto":"none"}},v=function(e){var t=e.children,n=e.disableTransition,r=e.isFixed,o=e.scrollableRef,s=e.sidebarRef,i=e.testId,l=e.topOffset,d=e.visible,m=e.fixedWidth,p=Object(u.useCx)(),f=b({isFixed:r,scrollableRef:o,topOffset:l,visible:d,disableTransition:n,fixedWidth:m});return a.createElement("div",{className:p(f),"data-test-id":i},a.createElement(c.o,{size:"outset"},a.createElement(c.a,{display:"flex",flexDirection:"column",width:"".concat(g,"px"),ref:s},a.createElement("div",{className:p(h(d))},t))))},E=function(e,t,n,r){var o=e.current;if(!o)return!1;var a=r.threshold||10,s=Array.from(t.values()).filter((function(e){var t,r=e.ref,o=e.opts;return n.includes(null!==(t=o.type)&&void 0!==t?t:"")&&!!r.current})).map((function(e){var t=e.ref,n=e.opts,r=n&&n.offset,o=Object(f.a)(t.current);return Object(f.h)(o,r)})),i=Object(f.a)(o);return!s.some((function(e){return Object(f.f)(e,i,a)}))},x=function(e,t){return function(){var n=Object(d.b)(t);return n.on("scroll_throttled",e),n.on("scroll_end",e),n.on("resize_throttled",e),function(){n.off("scroll_throttled",e),n.off("scroll_end",e),n.off("resize_throttled",e)}}}},"./src/components/social/ShareButton.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return ee})),n.d(t,"a",(function(){return ne}));var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/react/index.js"),d=n.n(u),m=n("./node_modules/react-redux/es/index.js"),p=n("./src/framework/design-system/components/index.ts"),f=n("./src/framework/design-system/type/index.ts"),g=n("./src/framework/reporter/index.ts"),b=n("./src/framework/source/index.ts"),h=n("./src/framework/style/index.ts");function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var E=d.a.createElement("path",{d:"M18.26 10.55c0-4.3-3.47-7.79-7.75-7.79a7.77 7.77 0 0 0-7.75 7.79 7.77 7.77 0 0 0 6.54 7.68v-5.49H7.4v-2.2h1.9V8.92c0-1.88 1.14-2.9 2.8-2.9.8 0 1.49.06 1.69.08v1.97h-1.15c-.91 0-1.1.43-1.1 1.07v1.4h2.17l-.28 2.2h-1.88v5.52a7.77 7.77 0 0 0 6.7-7.71"}),x=function(e){return d.a.createElement("svg",v({width:21,height:21,viewBox:"0 0 21 21"},e),E)},y=n("./src/svg/facebook-square-25px.svg");function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=d.a.createElement("path",{d:"M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"}),w=function(e){return d.a.createElement("svg",O({width:29,height:29},e),j)};function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S=d.a.createElement("path",{d:"M3 4.07C3 3.48 3.5 3 4.1 3h12.8c.6 0 1.1.48 1.1 1.07v12.86c0 .59-.5 1.07-1.1 1.07H4.1A1.1 1.1 0 0 1 3 16.93V4.07z"}),P=d.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.55 15.56V8.78H5.28v6.78h2.27zM6.4 7.86c.8 0 1.29-.52 1.29-1.17-.02-.67-.5-1.17-1.27-1.17-.78 0-1.28.5-1.28 1.17 0 .65.49 1.17 1.25 1.17h.01zM8.8 15.56h2.27v-3.79a1.24 1.24 0 0 1 1.24-1.37c.81 0 1.14.62 1.14 1.53v3.63h2.27v-3.89c0-2.08-1.12-3.05-2.61-3.05-1.22 0-1.76.68-2.06 1.15h.02v-.99H8.8c.03.64 0 6.78 0 6.78z",fill:"#fff"}),C=function(e){return d.a.createElement("svg",_({width:21,height:21,viewBox:"0 0 21 21",fill:"none"},e),S,P)};function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var I=d.a.createElement("path",{d:"M4 5.22C4 4.55 4.56 4 5.26 4h14.48c.7 0 1.26.55 1.26 1.22v14.56c0 .67-.56 1.22-1.26 1.22H5.26C4.56 21 4 20.45 4 19.78V5.22z"}),T=d.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.15 18.23v-7.68H6.6v7.68h2.56zM7.87 9.51c.9 0 1.45-.6 1.45-1.33-.01-.75-.56-1.33-1.43-1.33-.88 0-1.46.58-1.46 1.33 0 .74.56 1.33 1.42 1.33h.02zM10.57 18.23h2.57v-4.29c0-.23.02-.45.09-.62.18-.46.6-.93 1.31-.93.93 0 1.3.7 1.3 1.73v4.11h2.57v-4.4c0-2.36-1.26-3.46-2.95-3.46-1.39 0-2 .77-2.34 1.3h.02v-1.12h-2.57c.04.72 0 7.68 0 7.68z",fill:"#fff"}),R=function(e){return d.a.createElement("svg",k({width:25,height:25,viewBox:"0 0 25 25",fill:"none"},e),I,T)};function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A=d.a.createElement("path",{d:"M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z"}),M=d.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z",fill:"#fff"}),B=function(e){return d.a.createElement("svg",L({width:29,height:29,viewBox:"0 0 29 29",fill:"none"},e),A,M)},D=n("./src/svg/twitter-filled-21px.svg"),N=n("./src/svg/twitter-filled-25px.svg");function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var U=d.a.createElement("path",{d:"M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"}),F=function(e){return d.a.createElement("svg",H({width:29,height:29},e),U)},V=n("./src/util/hooks/useIsEligibleToViewNewResponses.tsx"),z=n("./src/util/routes.ts");function q(){var e=s()(["\n  fragment ShareButton_post on Post {\n    id\n  }\n"]);return q=function(){return e},e}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var W={fill:"#3b5998"},$={fill:"#38a1f3"},K={fill:"#292929"},Y=function(e){return{fill:e.baseColor.fill.lighter}},Q=function(e){return{fill:e.baseColor.fill.normal}},X=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y(e),{opacity:.25,cursor:"not-allowed"})},J={marginRight:"8px"},Z={FACEBOOK:"Facebook",TWITTER:"Twitter",LINKEDIN:"LinkedIn"},ee=Object(c.gql)(q());function te(e){var t=e.buttonStyle,n=e.socialPlatform,r=Object(h.useCx)(),o=Object(V.a)();switch(t){case"LINK_DISABLED":switch(n){case"FACEBOOK":return u.createElement(w,{className:r(X)});case"TWITTER":return u.createElement(F,{className:r(X)});case"LINKEDIN":return u.createElement(B,{className:r(X)});default:return null}case"LINK":if(o)switch(n){case"FACEBOOK":return u.createElement(w,{className:r(Y)});case"TWITTER":return u.createElement(F,{className:r(Y)});case"LINKEDIN":return u.createElement(B,{className:r(Y)});default:return null}switch(n){case"FACEBOOK":return u.createElement(w,{className:r(Q)});case"TWITTER":return u.createElement(F,{className:r(Q)});case"LINKEDIN":return u.createElement(B,{className:r(Q)});default:return null}case"LINK_INLINE":switch(n){case"FACEBOOK":return u.createElement(x,{className:r(Y)});case"TWITTER":return u.createElement(D.a,{className:r(Y)});case"LINKEDIN":return u.createElement(C,{className:r(Y)});default:return null}case"LINK_INLINE_SHORT_LABEL":switch(n){case"FACEBOOK":return u.createElement(y.a,{className:r(Y)});case"TWITTER":return u.createElement(N.a,{className:r(Y)});case"LINKEDIN":return u.createElement(R,{className:r(Y)});default:return null}case"BUTTON_BRANDED":switch(n){case"FACEBOOK":return u.createElement(x,{className:r([W,J])});case"TWITTER":return u.createElement(D.a,{className:r([$,J])});case"LINKEDIN":return u.createElement(C,{className:r([K,J])});default:return null}default:return null}}var ne=Object(m.c)((function(e){var t=e.config;return{authDomain:t.authDomain,isAmp:t.isAmp}}))((function(e){var t,n=e.authDomain,r=e.isAmp,a=e.post,s=e.buttonStyle,i=e.socialPlatform,l=Object(g.c)(),c=Object(b.f)();if("FACEBOOK"===i)t=Object(z.U)(n,a.id);else if("TWITTER"===i)t=Object(z.mc)(n,a.id);else{if("LINKEDIN"!==i)return null;t=Object(z.ib)(n,a.id)}var d=Z[i];if(!d)return null;var m={href:t,onClick:function(){c&&l.event("post.shareOpen",{postId:a.id,source:c,dest:i.toLowerCase(),dialogType:"native"})},target:"_blank",noFollow:!0,ariaLabel:"Share on "+i.toLowerCase()};if(!r){delete m.href,delete m.target;var h=m.onClick;m.onClick=function(){h();var e=Math.max((window.outerHeight||200)/2-560,100),n=(window.outerWidth||200)/2-250;"LINKEDIN"===i?window.open(t,"LIP","resizable,scrollbars,status,top=".concat(e,",left=").concat(n,",height=").concat(560,",width=").concat(500)):window.open(t)}}switch(s){case"LINK_DISABLED":return u.createElement(p.z,{darkTheme:!0,popoverRenderFn:function(){return u.createElement(p.a,{padding:"8px",whiteSpace:"nowrap"},"This feature is temporarily disabled.")},placement:"top",targetDistance:15},u.createElement(te,{buttonStyle:s,socialPlatform:i}));case"LINK":return u.createElement(p.m,m,u.createElement(te,{buttonStyle:s,socialPlatform:i}));case"LINK_INLINE":return u.createElement(p.m,m,u.createElement(te,{buttonStyle:s,socialPlatform:i}),u.createElement(p.a,{display:"inline",marginLeft:"8px",marginTop:"2px"},u.createElement(f.b,{scale:"S",tag:"span"},"Share on ",d)));case"LINK_INLINE_SHORT_LABEL":return u.createElement(p.m,m,u.createElement(te,{buttonStyle:s,socialPlatform:i}),u.createElement(p.a,{display:"inline",marginLeft:"16px",marginTop:"2px"},u.createElement(f.b,{scale:"S",tag:"span"},d)));case"BUTTON_BRANDED":return u.createElement(p.b,o()({},m,{buttonStyle:"SOCIAL",size:"REGULAR",width:"212px"}),u.createElement(p.a,{display:"flex",alignItems:"center",justifyContent:"center"},u.createElement(te,{buttonStyle:s,socialPlatform:i}),"Share with ".concat(d)));default:return null}}))},"./src/components/social/ShareButtons.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./src/components/social/ShareButton.tsx"),l=n("./src/framework/design-system/components/index.ts"),c=n("./src/framework/source/index.ts");function u(){var e=o()(["\n  fragment ShareButtons_post on Post {\n    id\n    isLimitedState\n    visibility\n    ...ShareButton_post\n  }\n  ","\n"]);return u=function(){return e},e}var d=Object(a.gql)(u(),i.b);function m(e){var t=e.post,n=e.source,r="UNLISTED"===t.visibility;return s.createElement(c.b,{source:n},s.createElement(l.a,{flexGrow:"0",paddingRight:"6px"},!r&&s.createElement(i.a,{socialPlatform:"TWITTER",buttonStyle:t.isLimitedState?"LINK_DISABLED":"LINK",post:t})),s.createElement(l.a,{flexGrow:"0",paddingRight:"6px"},!r&&s.createElement(i.a,{socialPlatform:"LINKEDIN",buttonStyle:t.isLimitedState?"LINK_DISABLED":"LINK",post:t})),s.createElement(l.a,{flexGrow:"0",paddingRight:"6px"},!r&&s.createElement(i.a,{socialPlatform:"FACEBOOK",buttonStyle:t.isLimitedState?"LINK_DISABLED":"LINK",post:t})))}},"./src/components/stream/Quote.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(i),c=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(p),g=n("./node_modules/@apollo/client/index.js"),b=n("./node_modules/react/index.js"),h=n("./node_modules/react-redux/es/index.js"),v=n("./src/components/post/paragraph/TextParagraph.tsx"),E=n("./src/framework/design-system/components/index.ts"),x=n("./src/framework/design-system/type/index.ts"),y=n("./src/schema-types/globalTypes.ts"),O=n("./src/util/quote.ts"),j=n("./src/util/routes.ts");function w(){var e=o()(["\n  fragment Quote_quote on Quote {\n    quoteId\n    userId\n    post {\n      id\n      title\n      mediumUrl\n      creator {\n        id\n        username\n        name\n        hasDomain\n      }\n    }\n    startOffset\n    endOffset\n    paragraphs {\n      text\n      type\n      markups {\n        anchorType\n        end\n        href\n        rel\n        start\n        title\n        type\n        userId\n      }\n      ...TextParagraph_paragraph\n    }\n    ...buildQuotePreviewParagraph_quote\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}var _=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.quote;if(!e||null==e.startOffset||null==e.endOffset||!e.post||!e.post.id)return null;var t=e.post.title,n=e.post.creator&&e.post.creator.name,r=e.post.creator&&e.post.creator.username,o=e.post.creator&&e.post.creator.hasDomain||!1;if(!n||!r)return null;var a=Object(O.b)(e),s=a&&a.type;return a&&s?s===y.m.IMG||s===y.m.IFRAME||s===y.m.COVER_TITLE||s===y.m.HR||s===y.m.MIXTAPE_EMBED||s===y.m.SECTION_CAPTION?null:b.createElement(E.a,{paddingLeft:"20px",paddingRight:"20px"},b.createElement(x.b,{scale:"M",tag:"span"},"From"," ",b.createElement(E.m,{href:Object(j.Gb)(e.post),inline:!0},t)," ","by"," ",b.createElement(E.m,{href:Object(j.Ac)(r,this.props.authDomain,o),inline:!0},n)),b.createElement(E.d,{href:Object(j.Gb)(e.post)},b.createElement(v.g,{paragraph:a,paragraphStyle:s,spaceTop:30,richTextStyle:"STREAM"}))):null}}]),t}(b.Component);t.b=Object(h.c)((function(e){return{authDomain:e.config.authDomain}}))(_);var S=Object(g.gql)(w(),O.c,v.d)},"./src/components/style/UnboundFellThemeProvider.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/lodash/merge.js"),s=n.n(a),i=n("./node_modules/react/index.js"),l=n("./src/components/session/useFlag.tsx"),c=n("./src/framework/style/index.ts"),u=n("./src/styles/font.ts"),d=n("./src/styles/theme.ts");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=e.children,n=!!Object(l.a)("enable_unbound"),r=Object(c.useTheme)(),o=n?function(e){return s()({},e,{newFonts:{title:p({},d.a.newFonts.title,{family:u.o}),pullQuote:p({},d.a.newFonts.pullQuote,{family:u.o})}})}(r):r;return i.createElement(c.ThemeProvider,{theme:o},t)}},"./src/components/susi/RedirectToSignIn.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js"),a=n("./src/components/navigation/Redirect.tsx"),s=n("./src/components/susi/helpers/index.ts"),i=n("./src/framework/source/index.ts"),l=n("./src/util/navigation.ts"),c=n("./src/util/routes.ts"),u=function(e){var t=e.opt_isDraft,n=Object(o.f)((function(e){return{authDomain:e.config.authDomain,currentLocation:e.navigation.currentLocation}}),o.d),u=n.authDomain,d=n.currentLocation,m=Object(i.d)(),p=Object(i.g)(),f=Object(l.a)(Object(c.Sb)(u),{operation:"login",redirect:Object(s.a)(d,m,p),isDraft:t?"1":"0"});return r.createElement(a.a,{to:f,temporary:!0})}},"./src/components/susi/alternate-user/AlternateUserEmail.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/@apollo/client/react/components/index.js"),c=n("./node_modules/react/index.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./src/components/session/WithViewer.tsx"),m=n("./src/components/session/useFlag.tsx"),p=n("./src/components/susi/GoogleRecaptcha.tsx"),f=n("./src/components/susi/helpers/index.ts"),g=n("./src/framework/reporter/index.ts"),b=n("./src/framework/source/index.ts"),h=n("./src/screens/helpers/visits.ts");function v(){var e=s()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return v=function(){return e},e}var E=Object(i.gql)(v()),x=function(e){var t=e.actionUrl,n=e.children,r=e.onSuccess,a=e.token,s=e.userId,v=Object(g.c)(),x=!!Object(m.a)("skip_sign_in_recaptcha"),y=c.useState(!1),O=o()(y,2),j=O[0],w=O[1],_=Object(u.f)((function(e){return e.navigation.currentLocation})),S=Object(u.f)((function(e){return e.session.user.id})),P=function(){w(!1)},C=Object(b.d)(),k=Object(b.g)(),I=t&&a?Object(f.a)(_,C,k,t,a):Object(f.a)(_,C,k),T=Object(i.useQuery)(d.a),R=T.loading,L=T.error,A=T.data,M=(A=void 0===A?{viewer:void 0}:A).viewer;return R||L?c.createElement(c.Fragment,null):c.createElement(l.Mutation,{mutation:E,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":v.event("site.loginLinkSent",{}),r&&r();break;case"FailedChallenge":v.event("site.loginByEmailCaptchaFailure",{}),w(!1);break;case"BadRequest":case"NotFound":default:P()}},onError:P},(function(e){var t=function(t){var n=M?M.id:S;Object(h.o)(!0,n,s,"Email",!1);v.event("susi.methodClicked",{entryPoint:k,operation:"login",susiMethod:"medium".toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:"medium".toLowerCase(),alternateUserSuggestionTargetUserId:s,alternateUserSuggestionSourceUserId:n}),e({variables:{userId:s,redirect:I,captchaValue:t}})};return c.createElement(c.Fragment,null,!x&&c.createElement(p.a,{callback:t,shouldExecuteRecaptcha:j}),n({handleSubmit:function(){return x?t(null):w(!0)}}))}))}},"./src/components/susi/alternate-user/AlternateUserSocial.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("./node_modules/react/index.js"),o=n("./src/components/susi/oauth-buttons/FacebookSusiButton.tsx"),a=n("./src/components/susi/oauth-buttons/GoogleSusiButton.tsx"),s=n("./src/components/susi/oauth-buttons/TwitterSusiButton.tsx"),i=n("./src/framework/track/SusiPresentationTracker.tsx"),l=function(e){var t=e.actionUrl,n=e.token,l=e.userSocialLogins,c={actionUrl:t||"",operation:"login",token:n||"",targetUserId:l.userId,alternateUserSuggestion:!0};return r.createElement(i.a,{eventData:{operation:c.operation}},l.google?r.createElement(a.a,c):l.facebook?r.createElement(o.a,c):l.twitter?r.createElement(s.a,c):r.createElement(r.Fragment,null))}},"./src/components/susi/alternate-user/NotYou.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/components/session/WithViewer.tsx"),c=n("./src/components/session/useFlag.tsx"),u=n("./src/framework/design-system/components/index.ts"),d=n("./src/framework/source/index.ts"),m=n("./src/store/actions/navigation.ts");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f=function(e){var t=e.declineSuggestedAccount,n=e.isSocial,r=Object(i.f)((function(e){return{hasRenderedAlternateUserBanner:e.navigation.hasRenderedAlternateUserBanner}}),i.d).hasRenderedAlternateUserBanner,f=!!Object(c.a)("enable_highlander_member_digest"),g=Object(d.g)(),b=Object(i.e)(),h=Object(a.useQuery)(l.a),v=h.loading,E=h.error,x=h.data,y=(x=void 0===x?{viewer:void 0}:x).viewer;if(v||E)return s.createElement(s.Fragment,null);var O=function(e){return e?s.createElement(u.m,{onClick:function(){return j("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):s.createElement(s.Fragment,null,"Not you?"," ",s.createElement(u.m,{onClick:function(){return j("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",s.createElement(u.m,{onClick:function(){return j("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},j=function(e){var n="SIGNIN_OPTIONS"===e?"login":"register";t(),b(Object(m.s)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:n,step:e},!!g&&{susiEntry:g})))};return f&&r?O(y):y?s.createElement(u.m,{onClick:function(){return t()}},"Not me"):O(n)}},"./src/components/susi/alternate-user/SusiAlternateUserController.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./node_modules/@apollo/client/react/components/index.js"),d=n("./node_modules/react/index.js"),m=n("./node_modules/react-redux/es/index.js"),p=n("./src/components/session/WithViewer.tsx"),f=n("./src/framework/reporter/index.ts"),g=n("./src/framework/source/index.ts"),b=n("./src/framework/source/SourceContext.tsx"),h=n("./src/screens/helpers/users.ts");function v(){var e=o()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return v=function(){return e},e}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.children,n=e.postRenderCallback,r=Object(f.c)(),o=Object(g.g)(),a=Object(m.f)((function(e){return{referrerSource:e.navigation.referrerSource,sessionUserId:e.session.user.id}}),m.d),s=a.referrerSource,i=a.sessionUserId,v=Object(b.c)(s||""),E=v.userId,y=v.name,j=d.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),w=l()(j,2),_=w[0],S=w[1];d.useEffect((function(){var e=_.shouldRun,t=_.showSuggestedAccount,r=_.userSocialLogins;e&&n(T,t,r)}),[_.shouldRun]);var P=Object(c.useQuery)(p.a),C=P.loading,k=P.error,I=P.data,T=(I=void 0===I?{viewer:void 0}:I).viewer;if(C||k)return d.createElement(d.Fragment,null);var R=!("email"!==y||T&&T.mediumMemberAt||!E);return R&&E?d.createElement(u.Query,{query:O,variables:{userId:E}},(function(e){var a=e.loading,s=e.error,l=e.data,c=(l=void 0===l?{}:l).userSocialLogins,u=!(a||s||!c||T&&!c.isMember||!c.facebook&&!c.google&&!c.twitter&&!c.redactedEmailAddress),d=x({loading:a,showSuggestedAccount:u},u&&{userSocialLogins:c,declineSuggestedAccount:function(){var e=Object(h.a)(c);r.event("susi.suggestNotYou",{entryPoint:o,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==c?void 0:c.userId,alternateUserSuggestionSourceUserId:T?T.id:i})}});return!n||a||_.shouldRun||S({shouldRun:!0,showSuggestedAccount:u,userSocialLogins:c}),t(d)})):(n&&!_.shouldRun&&S(x({},_,{shouldRun:!0})),t({showSuggestedAccount:R,loading:!1}))},O=Object(c.gql)(v())},"./src/components/susi/helpers/types.ts":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.LOHighlightCTA="lo_highlight_cta",e.LIHighlightCTA="li_highlight_cta",e.RegWall="regwall",e.SyndicatedRegwall="syndicated_regwall"}(r||(r={}))},"./src/components/tns/SuspendedBannerLoader.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/store/actions/navigation.ts");function c(){var e=o()(["\n  fragment SuspendedBannerLoader_post on Post {\n    id\n    isSuspended\n  }\n"]);return c=function(){return e},e}function u(){var e=o()(["\n  fragment SuspendedBannerLoader_user on User {\n    id\n    isSuspended\n  }\n"]);return u=function(){return e},e}t.c=Object(i.c)()((function(e){var t=e.dispatch,n=e.user,r=e.post;return s.useEffect((function(){n&&n.isSuspended?t(Object(l.m)({duration:"NEXTPAGE",message:"",toastStyle:"USER_SUSPENDED"})):r&&r.isSuspended&&t(Object(l.m)({duration:"NEXTPAGE",message:"",toastStyle:"POST_SUSPENDED",extraParams:{postId:(null==r?void 0:r.id)||""}}))}),[]),null}));var d=Object(a.gql)(u()),m=Object(a.gql)(c())},"./src/components/ui/Card.tsx":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n("./src/framework/design-system/components/index.ts"),a=n("./src/framework/style/index.ts");t.a=function(e){var t=e.children,n=Object(a.useTheme)();return r.createElement(o.a,{backgroundColor:"BACKGROUND",border:"BASE_LIGHTER",borderRadius:"5px",boxShadow:"0 1px 4px ".concat(n.baseColor.border.lighter),marginBottom:"24px",padding:"23px 0"},t)}},"./src/components/ui/banners/AlternateUserTopBanner.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n("./node_modules/react-redux/es/index.js"),i=n("./src/components/optimizely/OptimizelyWrapper.tsx"),l=n("./src/components/session/useFlag.tsx"),c=n("./src/components/session/useViewer.tsx"),u=n("./src/components/style/BaseThemeProvider.tsx"),d=n("./src/components/susi/alternate-user/AlternateUserEmail.tsx"),m=n("./src/components/susi/alternate-user/AlternateUserSocial.tsx"),p=n("./src/components/susi/alternate-user/NotYou.tsx"),f=n("./src/components/susi/alternate-user/SusiAlternateUserController.tsx"),g=n("./src/components/susi/helpers/useReduxSusi.tsx"),b=n("./src/components/ui/banners/TopBanner.tsx"),h=n("./src/components/user/UserAvatar.tsx"),v=n("./src/framework/design-system/components/index.ts"),E=n("./src/framework/design-system/type/index.ts"),x=n("./src/framework/reporter/index.ts"),y=n("./src/framework/source/index.ts"),O=n("./src/screens/helpers/users.ts"),j=n("./src/store/actions/alternateUserTopBanner.ts"),w=n("./src/store/actions/googleOneTap.ts"),_=function(e){var t=e.userSocialLogins,n=Object(g.a)().openModal,r=!!Object(l.a)("enable_new_susi_modal");return t.facebook||t.google||t.twitter?a.createElement(m.a,{userSocialLogins:t}):a.createElement(d.a,{onSuccess:function(){return n({step:"CHECK_YOUR_INBOX",operation:r?"register":"login",susiEntry:"alternate_user_top_banner"})},userId:t.userId},(function(e){var t=e.handleSubmit;return a.createElement(v.b,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")}))},S=function(){var e=Object(c.b)().value,t=Object(s.f)((function(e){return e.session.user.id})),n=Object(s.e)(),r=Object(x.c)(),d=!!Object(l.a)("enable_highlander_member_digest"),m=a.useState(!1),g=o()(m,2),S=g[0],P=g[1],C=a.useState("loading"),k=o()(C,2),I=k[0],T=k[1];return a.useEffect((function(){n(Object(w.d)(!0)),P(!0)}),[]),a.useEffect((function(){"rendered"===I&&n(Object(j.b)(!0)),"not_eligible"===I&&n(Object(w.d)(!1))}),[I]),a.createElement(y.b,{source:{susiEntry:"alternate_user_top_banner"}},a.createElement(f.a,{postRenderCallback:function(e,n,o){T(n?"rendered":"not_eligible"),n&&(r.event("experiment.eligible",{experimentId:"358323e239a2"}),d&&r.event("alternateUserBanner.viewed",{alternateUserSuggestionAccountType:Object(O.a)(o),alternateUserSuggestionTargetUserId:o.userId,alternateUserSuggestionSourceUserId:e?e.id:t}))}},(function(n){var o,s=n.showSuggestedAccount,l=n.declineSuggestedAccount,c=n.userSocialLogins;return d&&S&&s&&l&&c?a.createElement(u.b,null,a.createElement(b.a,{onClose:function(){return r.event("alternateUserBanner.dismissed",{alternateUserSuggestionAccountType:Object(O.a)(c),alternateUserSuggestionTargetUserId:c.userId,alternateUserSuggestionSourceUserId:e?e.id:t})}},a.createElement(v.a,{alignItems:"flex-start",display:"flex",flexDirection:"column",sm:{alignItems:"center"}},a.createElement(v.a,{alignItems:"center",display:"flex",marginBottom:"21px",sm:{flexDirection:"column",margin:"0 21px 21px",textAlign:"center"}},!e&&(null===(o=c.userAvatar)||void 0===o?void 0:o.imageId)&&a.createElement(v.a,{display:"flex",marginRight:"20px",sm:{marginBottom:"18px",marginRight:"0"}},a.createElement(h.d,{scale:"S",user:c.userAvatar})),a.createElement(i.a,{featureString:"alternate-user-top-banner",target:"header"},a.createElement(E.b,{color:"DARKER",scale:"M"},function(e,t){var n=t.isMember,r=t.redactedEmailAddress;return a.createElement(a.Fragment,null,e?"Switch":"Sign in"," to your ",n?"member ":"","account (",a.createElement("b",null,r),") for",n?" unlimited access":" your personalized experience",".")}(e,c)))),a.createElement(v.a,{alignItems:"center",display:"flex",sm:{flexDirection:"column"}},a.createElement(_,{userSocialLogins:c}),a.createElement(v.a,{margin:"0 12px",sm:{margin:"24px 0 0"}},a.createElement(p.a,{declineSuggestedAccount:l,isSocial:!!(c.facebook||c.google||c.twitter)})))))):a.createElement(a.Fragment,null)})))}},"./src/components/ui/banners/SignInConfirmationBanner.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),u=n("./src/components/optimizely/OptimizelyWrapper.tsx"),d=n("./src/components/session/WithViewer.tsx"),m=n("./src/components/session/useFlag.tsx"),p=n("./src/components/style/BaseThemeProvider.tsx"),f=n("./src/components/susi/helpers/useReduxSusi.tsx"),g=n("./src/components/ui/banners/TopBanner.tsx"),b=n("./src/components/user/UserAvatar.tsx"),h=n("./src/framework/design-system/components/index.ts"),v=n("./src/framework/design-system/type/index.ts"),E=n("./src/framework/reporter/index.ts"),x=n("./src/framework/source/index.ts"),y=n("./src/framework/source/SourceContext.tsx"),O=n("./src/screens/helpers/visits.ts"),j=n("./src/util/constants.ts"),w=function(){var e=Object(E.c)(),t=Object(f.a)().openModal,n=!!Object(m.a)("enable_confirm_sign_in"),r=!!Object(m.a)("enable_new_susi_modal"),a=l.useState(!1),w=s()(a,2),_=w[0],S=w[1],P=l.useState(!1),C=s()(P,2),k=C[0],I=C[1],T=l.useState(!0),R=s()(T,2),L=R[0],A=R[1],M=Object(i.useQuery)(d.a).data,B=(M=void 0===M?{viewer:void 0}:M).viewer,D=Object(c.f)((function(e){return{referrerSource:e.navigation.referrerSource,xsrf:e.session.xsrf}}),c.d),N=D.referrerSource,H=D.xsrf,U=Object(y.c)(N||"").name;return l.useEffect((function(){return S(!0)}),[]),l.useEffect((function(){if(_&&B){e.event("experiment.eligible",{experimentId:"b4152480e71c"});o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(Object(O.i)(null==B?void 0:B.id,H));case 2:t=e.sent,A(t);case 4:case"end":return e.stop()}})),n&&Object(O.p)(B.id,H)}var t}),[_]),l.useEffect((function(){k&&n&&e.event("signInConfirmationBanner.viewed",{})}),[k]),!(n&&_&&B&&U&&"login"===U&&B.createdAt)||Date.now()-B.createdAt<=5*j.c||L?null:(k||I(!0),l.createElement(x.b,{source:{susiEntry:"signin_confirmation_banner"},extendSource:!0},l.createElement(p.b,null,l.createElement(g.a,{onClose:function(){return e.event("signInConfirmationBanner.dismissed",{})}},l.createElement(h.a,{display:"flex",alignItems:"center"},l.createElement(h.a,{display:"none",marginRight:"20px",sm:{display:"flex"}},l.createElement(b.d,{scale:"S",user:B})),l.createElement(v.b,{color:"DARKER",scale:"M"},l.createElement(u.a,{featureString:"confirm-sign-in-banner",target:"header",tag:"span"},"Welcome back. You are signed"," ",B.mediumMemberAt?"into your member account ":"in as ",l.createElement("b",null,B.email),"."," "),l.createElement(h.m,{onClick:function(){e.event("signInConfirmationBanner.notYouClicked",{}),t({operation:r?"register":"login",step:"SIGNIN_OPTIONS",susiEntry:"signin_confirmation_banner"})},linkStyle:"OBVIOUS"},"Not you?")))))))}},"./src/components/ui/banners/TopBanner.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("./node_modules/react/index.js"),o=n("./src/WatchBounds.tsx"),a=n("./src/framework/design-system/components/index.ts"),s=function(e){var t=e.children,n=e.onClose,s=r.useRef(null),i=r.useContext(o.b).updateWatchedBounds;return r.createElement(a.A,{initialVisibility:!0},(function(e){var o=e.isVisible,l=e.hide;return o&&r.createElement(a.a,{backgroundColor:"BASE_LIGHT",borderBottom:"BASE_LIGHTER",borderTop:"BASE_LIGHTER"},r.createElement(a.o,null,r.createElement(a.a,{display:"flex",justifyContent:"space-between",paddingBottom:"20px",paddingTop:"20px"},t,r.createElement(a.e,{onClick:function(){n&&n(),i("byline",s,{type:"header"}),l()},isPositionAbsolute:!1,size:"REGULAR"}))))}))}},"./src/components/user/UserReportStoryDialog.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),a=n("./node_modules/react/index.js"),s=n("./src/framework/design-system/components/index.ts"),i=n("./src/framework/design-system/type/index.ts");t.a=function(e){var t=e.isVisible,n=e.hide,r=e.onSubmit,l=e.isResponse,c=a.useState(!1),u=o()(c,2),d=u[0],m=u[1],p=a.useState("Spam"),f=o()(p,2),g=f[0],b=f[1],h=a.useCallback((function(e,t){return b(t)}),[]);return a.createElement(s.g,{isVisible:t,hide:n,noPortal:l,withCloseButton:!1,customBackgroundColor:l?"rgba(255, 255, 255, 0.97)":"rgba(255, 255, 255, 0.94)"},a.createElement(s.a,{height:"550px",width:l?"100%":"900px",background:l?"none":"white",borderRadius:"4px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:l?"none":"rgba(0, 0, 0, 0.15) 0px 2px 10px",padding:"18px",sm:{boxShadow:"none",background:"none"},xs:{boxShadow:"none",background:"none"}},!l&&a.createElement(s.a,{alignSelf:"flex-end"},a.createElement(s.e,{onClick:n,size:"LARGE",isPositionAbsolute:!1})),a.createElement(s.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:l?"flex-start":"center"},a.createElement(i.c,{scale:"M"},"Report ",l?"Response":"Story"),a.createElement(s.a,{display:"flex",flexDirection:"column",width:"100%",paddingRight:"5px",marginBottom:"30px"},a.createElement(s.a,{marginTop:"25px",marginBottom:"30px",padding:"5px 0"},a.createElement(s.r,{onChange:h,value:g,radioStyle:"SUBTLE",options:[{name:"Spam",value:"Spam"},{name:"Harassment",value:"Harassment"},{name:"Rules Violation",value:"Other"}]})),a.createElement(s.c,{checked:d,onChange:function(){m(!d)}},a.createElement(s.a,{paddingTop:l?"16px":"0"},"Also block the author of this ",l?"response":"story"))),a.createElement(s.a,{display:"flex",justifyContent:"center",marginBottom:"10px"},a.createElement(s.a,{marginRight:"8px"},a.createElement(s.b,{onClick:n},"Cancel")),a.createElement(s.b,{buttonStyle:"ERROR",onClick:function(){r(d,g),n()}},"Report")),a.createElement(s.a,{marginTop:"50px",textAlign:l?"left":"center"},a.createElement(i.b,{scale:"M",tag:"div"},"Report"," ",a.createElement(s.m,{href:"https://medium.com/policy/mediums-copyright-and-dmca-policy-d126f73695",linkStyle:"OBVIOUS",target:"_blank",inline:!0},"copyright infringement")," ","or"," ",a.createElement(s.m,{href:"https://medium.com/policy/mediums-trademark-policy-e3bb53df59a7",linkStyle:"OBVIOUS",target:"_blank",inline:!0},"trademark infringement"),". ",!l&&a.createElement("br",null),"Read"," ",a.createElement(s.m,{href:"https://medium.com/policy/medium-rules-30e5502c4eb4",linkStyle:"OBVIOUS",target:"_blank",inline:!0},"our rules"),".")))))}},"./src/components/user/UserUnblockButton.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(i),c=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(c),d=n("./node_modules/@babel/runtime/helpers/inherits.js"),m=n.n(d),p=n("./node_modules/react/index.js"),f=n("./src/components/mutations/UserUnblockMutation.tsx"),g=n("./src/components/session/WithViewer.tsx"),b=n("./src/framework/design-system/components/index.ts"),h=function(e){function t(e){var n;return o()(this,t),(n=l()(this,u()(t).call(this,e))).state={isHovering:!1},n}return m()(t,e),s()(t,[{key:"handleMouseEnter",value:function(){this.setState({isHovering:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHovering:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.buttonSize,r=t.targetUserId,o=this.state.isHovering;return p.createElement(g.b,null,(function(t){return p.createElement(f.a,{targetUserId:r,viewerId:t&&t.id},(function(t){var r=t.mutate;return p.createElement(b.b,{buttonStyle:o?"SUBTLE":"ERROR",onClick:r,size:n||"REGULAR",onMouseEnter:function(){return e.handleMouseEnter()},onMouseLeave:function(){return e.handleMouseLeave()}},o?"Unblock":"Blocked")}))}))}}]),t}(p.Component);t.a=h},"./src/framework/actions/ActionContext.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/react/index.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=a.createContext({}),l=function(){return a.useContext(i)},c=function(e){var t=e.context,n=e.extendContext,r=void 0!==n&&n,c=e.children,u=l();return r&&u&&(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,{},t)),a.createElement(i.Provider,{value:t},c)}},"./src/handlers/EmbeddedPostHandler.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/@apollo/client/react/components/index.js"),i=n("./node_modules/react/index.js"),l=n("./src/framework/reporter/index.ts"),c=n("./src/components/post/body/PostBody.tsx");function u(){var e=o()(["\n  fragment PostContentScreen_post on Post {\n    id\n    title\n    # please note that the postMeteringOptions are defined in the postHandler file\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        ...PostBody_bodyModel\n      }\n    }\n    creator {\n      id\n      ...PostBody_creator\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function d(e){var t=e.post,n={bodyModel:t.content.bodyModel,creator:t.creator,postBodyInserts:null,ref:null,richTextStyle:"FULL_PAGE",customStyleSheet:null};return i.createElement(c.f,n)}var m=Object(a.gql)(u(),c.b,c.a);function p(){var e=o()(["\n  query EmbeddedPostHandler($postId: ID!, $postMeteringOptions: PostMeteringOptions) {\n    post(id: $postId) {\n      ...PostContentScreen_post\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f=Object(a.gql)(p(),m),g=function(e){var t=e.postId,n=e.children,r=Object(l.c)();return i.createElement(s.Query,{query:f,variables:{postId:t,postMeteringOptions:{source:null,referrer:null,sk:null}}},(function(e){var o=e.loading,a=e.error,s=e.data,l=(s=void 0===s?{}:s).post;return o?n(null):a?(r.event("embeddedPost.error",{errorMessage:a.message,postId:t}),n(null)):l?(r.event("embeddedPost.postPresented",{postId:t}),n(i.createElement(d,{post:l}))):(r.event("embeddedPost.noPost",{postId:t}),n(null))}))}},"./src/handlers/PostHandler.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,"PostHandlerQuery",(function(){return p})),n.d(t,"PostHandler",(function(){return f}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),l=n("./src/framework/source/index.ts"),c=n("./src/handlers/SharedPostHandler.tsx"),u=n("./src/screens/PostScreen.tsx"),d=n("./src/util/hooks/postRecircHooks.tsx");function m(){var e=o()(["\n  query PostHandler(\n    $postId: ID!\n    $postMeteringOptions: PostMeteringOptions\n    $includePostInternalLinks: Boolean!\n    $includePostRecirc: Boolean = false\n    $includeSequenceRecirc: Boolean = false\n    $postRecircPaging: PaginationLimit\n  ) {\n    meterPost(postId: $postId, postMeteringOptions: $postMeteringOptions) {\n      __typename\n      ... on MeteringInfo {\n        ...PostScreen_meteringInfo\n      }\n    }\n    postResult(id: $postId) {\n      __typename\n      ...SharedPostHandler_postResult\n      ... on Post {\n        ...PostScreen_post\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var p=Object(a.gql)(m(),u.b,c.b,u.c),f=Object(i.c)((function(e){return{recircOptions:e.config.recircOptions}}))((function(e){var t,n,r=e.match,o=e.recircOptions,a=Object(d.a)(),i=(a?null==o||null===(t=o.v2)||void 0===t?void 0:t.limit:null==o||null===(n=o.v1)||void 0===n?void 0:n.limit)||3;return s.createElement(c.a,{match:r,query:p,extraVariables:{includePostInternalLinks:a,postRecircPaging:i}},(function(e){var t=e.meterPost,n=e.postId,r=e.postResult,o=e.viewer;return s.createElement(l.b,{source:{name:"post_page",postId:n}},s.createElement(u.a,{viewer:o,meteringInfo:t,post:r}))}))}))},"./src/handlers/SharedPostHandler.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return k}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/@apollo/client/react/components/index.js"),c=n("./node_modules/react/index.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./src/components/error/PostResultError.tsx"),m=n("./node_modules/url/url.js"),p=n.n(m),f=n("./src/components/navigation/Redirect.tsx"),g=n("./src/util/navigation.ts");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(){var e=s()(["\n  fragment PostCanonicalizer_post on Post {\n    mediumUrl\n  }\n"]);return h=function(){return e},e}var v=Object(i.gql)(h()),E=function(e){var t=e.post,n=e.matchedPath,r=e.children,a=Object(u.f)((function(e){var t=e.navigation,n=t.host,r=t.referrerSource;return{currentHost:n,shareKey:t.shareKey,source:r}}),u.d),s=a.currentHost,i=a.shareKey,l=a.source,d=t.mediumUrl;if(!d)return r;var m=p.a.parse(decodeURIComponent(d)),h=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l?{source:l}:{},{},i?{sk:i}:{});return s!==m.host?c.createElement(f.a,{to:Object(g.a)(d,h)}):m.path&&n!==m.path?c.createElement(f.a,{to:Object(g.a)(m.path,h)}):r},x=n("./src/components/session/WithViewer.tsx"),y=n("./src/handlers/SharedPostContext.tsx"),O=n("./src/screens/ErrorScreen.tsx"),j=n("./src/screens/LoadingScreen.tsx"),w=n("./src/screens/NotFoundScreen.tsx"),_=n("./src/util/routes.ts");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(){var e=s()(["\n  fragment SharedPostHandler_postResult on PostResult {\n    __typename\n    ...PostResultError_postResult\n    ... on Post {\n      ...PostCanonicalizer_post\n    }\n  }\n  ","\n  ","\n"]);return P=function(){return e},e}var C=Object(i.gql)(P(),d.b,v),k=function(e){var t=e.children,n=e.match,r=e.query,a=e.extraVariables,s=Object(u.f)((function(e){var t=e.navigation;return{source:t.referrerSource||void 0,referrer:t.referrer,shareKey:t.shareKey}}),u.d),i=s.source,m=s.referrer,p=s.shareKey,f=Object(_.Eb)(n);if(!f)return c.createElement(w.a,null);var g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({postId:f,postMeteringOptions:{referrer:m,source:i,sk:p}},a);return c.createElement(l.Query,{query:r,variables:g},(function(e){var r=e.loading,o=e.error,a=e.data,s=(a=void 0===a?{}:a).meterPost,i=a.postResult,l=e.refetch,u=e.fetchMore;return r?c.createElement(j.a,null):o?c.createElement(O.a,{error:o}):Object(d.c)(i)?c.createElement(d.a,{postResult:i}):c.createElement(y.a.Provider,{value:{refetch:l,fetchMore:u,postId:f}},c.createElement(E,{post:i,matchedPath:n.url,key:f},c.createElement(x.b,null,(function(e){return t({meterPost:s,postId:f,postResult:i,viewer:e})}))))}))}},"./src/screens/ContentErrorScreen.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-helmet-async/lib/index.module.js"),a=n("./node_modules/react-router/esm/react-router.js"),s=n("./src/components/error/ErrorCodeDisplay.tsx"),i=n("./src/components/metabar/Metabar.tsx"),l=n("./src/framework/design-system/components/index.ts"),c=n("./src/framework/style/index.ts"),u=n("./src/styles/font.ts"),d={fontSize:"24px"};function m(e){var t=e.code,n=e.title,m=e.description,p=e.lumenId,f=Object(c.useCx)();return r.createElement(a.b,{render:function(e){var a=e.staticContext;return a&&(a.statusCode=t),r.createElement("div",null,r.createElement(o.a,null,r.createElement("title",null,n)),r.createElement(i.a,null),r.createElement(l.a,{tag:"section",paddingTop:"60px",paddingBottom:"60px"},r.createElement(l.s,{columns:8},r.createElement(l.a,{display:"flex",alignItems:"flex-start",flexWrap:"wrap"},r.createElement(s.a,{errorCode:t}),r.createElement("div",{className:f(Object(u.k)())},r.createElement(l.a,{marginBottom:"28px"},r.createElement("div",{className:f(d)},m)),p?r.createElement("div",{className:f(d)},"A report is available on"," ",r.createElement(l.m,{href:"https://lumendatabase.org/notices/".concat(p),display:"inline-block",inline:!0,target:"_blank",linkStyle:"OBVIOUS"},"Lumen"),"."):null)))))}})}},"./src/screens/PostScreen.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return Ct})),n.d(t,"b",(function(){return It})),n.d(t,"c",(function(){return Tt}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(i),c=n("./node_modules/querystring-es3/index.js"),u=n("./node_modules/@apollo/client/index.js"),d=n("./node_modules/exenv/index.js"),m=n.n(d),p=n("./node_modules/react/index.js"),f=n.n(p),g=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/react-router/esm/react-router.js"),h=n("./src/WatchBounds.tsx"),v=n("./src/components/metabar/Logo.tsx"),E=n("./src/framework/design-system/type/useTypeRules.ts"),x=n("./src/framework/style/index.ts"),y=n("./src/util/routes.ts");function O(){var e=o()(["\n  fragment TopicList_topics on Topic {\n    id\n    slug\n    name\n  }\n"]);return O=function(){return e},e}var j={padding:0,margin:0},w={display:"inline-block",listStyleType:"none",marginRight:"8px",marginBottom:"8px"},_=function(e){return{border:"".concat(e.baseColor.border.light," 1px solid"),padding:"5px 10px",textDecoration:"none",color:e.baseColor.text.normal,display:"block",lineHeight:"22px"}};function S(e){var t=e.topics,n=Object(x.useCx)(),r=Object(g.f)((function(e){return{authDomain:e.config.authDomain}})).authDomain,o=Object(E.a)({name:"detail",scale:"S",color:"DARKER"});return t?p.createElement("ul",{className:n(j)},t.map((function(e){return e.id?p.createElement("li",{key:e.id,className:n(w)},p.createElement("a",{href:Object(y.ic)(r,e.slug||""),className:n([o,_])},e.name)):null}))):null}Object(u.gql)(O());var P=n("./src/components/session/WithViewer.tsx"),C=n("./src/components/susi/SusiClickable.tsx"),k=n("./src/components/user/UserAvatar.tsx"),I=n("./src/framework/design-system/components/index.ts"),T=n("./src/framework/design-system/type/Overline.tsx"),R=n("./src/framework/source/index.ts"),L=n("./src/svg/apple-25px.svg"),A=n("./src/svg/arrow-down-21px.svg"),M=n("./src/svg/bell-25px.svg"),B=n("./src/svg/bookmark-25px.svg"),D=n("./src/svg/response-25px.svg"),N="transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, border 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",H=[{id:"a1",slug:"art",name:"Art"},{id:"b1",slug:"beauty",name:"Beauty"},{id:"c1",slug:"comics",name:"Comics"},{id:"c2",slug:"culture",name:"Culture"},{id:"f1",slug:"fiction",name:"Fiction"},{id:"f2",slug:"food",name:"Food"},{id:"h1",slug:"humor",name:"Humor"},{id:"m1",slug:"music",name:"Music"},{id:"s1",slug:"sports",name:"Sports"},{id:"w1",slug:"writing",name:"Writing"}],U=function(e){return{display:{xs:"none",sm:"none",md:"flex",lg:"flex",xl:"flex"},flexDirection:"column",justifyContent:"space-between",background:e.backgroundColor,borderRight:"".concat(e.baseColor.border.lighter," 1px solid"),position:"fixed",top:"0px",height:"100%",width:"".concat(250,"px")}},F={opacity:1,height:"100%",padding:"20px",overflow:"hidden",transition:N,zIndex:500},V=function(e){return{width:"100%",background:e.backgroundColor,borderTop:"".concat(e.baseColor.border.lighter," 1px solid"),padding:"15px",transition:N,zIndex:510,cursor:"pointer"}},z={margin:"0px 10px",opacity:1,transition:N,display:"block",width:"100%"},q={margin:"0px 10px",height:"35px",width:"35px"},G={fontSize:"24px",margin:"20px 0px",display:"block"},W=function(e){return e?{}:{transform:"translateX(-200px) !important",opacity:0}},$=function(e){return e?{}:{border:"none !important"}},K=function(e){return e?{}:{opacity:"0 !important"}},Y=function(e){return e?{}:{border:"none !important"}},Q=function(){var e=Object(g.f)((function(e){return e.config.authDomain})),t=Object(x.useCx)(),n=p.useState(!1),r=l()(n,2),o=r[0],a=r[1],s=p.useState(null),i=l()(s,2),c=i[0],u=i[1],d=function(){o?f():m()},m=function(){clearTimeout(c),a(!0),document.body.addEventListener("click",f)},f=function e(){var t=setTimeout((function(){a(!1)}),300);u(t),document.body.removeEventListener("click",e)};return p.createElement(R.b,{source:{name:"norway_sidebar"}},p.createElement(P.b,null,(function(n){return n?p.createElement("div",{className:t([U,$(o)])},p.createElement("div",{className:t([F,W(o)])},p.createElement(I.a,{margin:"20px 15px"},p.createElement(v.e,null)),p.createElement(I.m,{href:"/",className:t(G)},p.createElement(I.a,{display:"flex",alignItems:"center"},p.createElement(L.a,{className:t(q)}),p.createElement(p.Fragment,null,"Home"))),p.createElement(I.m,{href:Object(y.Ic)(e),className:t(G)},p.createElement(I.a,{display:"flex",alignItems:"center"},p.createElement(B.a,{className:t(q)}),p.createElement(p.Fragment,null,"Reading List"))),p.createElement(I.m,{href:Object(y.Fc)(e),className:t(G)},p.createElement(I.a,{display:"flex",alignItems:"center"},p.createElement(M.a,{className:t(q)}),p.createElement(p.Fragment,null,"Notifications"))),p.createElement(I.m,{href:Object(y.Bc)(n.username||""),className:t(G)},p.createElement(I.a,{display:"flex",alignItems:"center"},p.createElement(D.a,{className:t(q)}),p.createElement(p.Fragment,null,"Responses")))),p.createElement(I.a,{display:"flex",flexGrow:"1",alignItems:"flex-end"},p.createElement("div",{className:t([V,Y(o)]),onClick:d},p.createElement(I.a,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(k.d,{user:n,scale:"S"}),p.createElement("div",{className:t([z,K(o)])},p.createElement(I.a,null,n.name),p.createElement(I.a,null,p.createElement(I.m,{href:Object(y.ob)(e,n.username||"")},"@",n.username))))))):p.createElement("div",{className:t([U,$(o)])},p.createElement("div",{className:t([F,W(o)])},p.createElement(I.a,{margin:"20px 15px"},p.createElement(v.e,null)),p.createElement(I.m,{href:Object(y.cb)(),className:t(G)},p.createElement(I.a,{display:"flex",alignItems:"center"},p.createElement(L.a,{className:t(q)}),p.createElement(p.Fragment,null,"Home"))),p.createElement(I.a,null,p.createElement(I.a,{margin:"20px"},p.createElement(T.a,{scale:"M",color:"LIGHTER"},"Trending Topics"),p.createElement(I.a,{marginTop:"10px"},p.createElement(S,{topics:H}))),p.createElement(I.a,{margin:"20px"},p.createElement(T.a,{scale:"M",color:"LIGHTER"},"Others in ...")))),p.createElement(I.a,{display:"flex",flexGrow:"1",alignItems:"flex-end"},p.createElement("div",{className:t([V,Y(o)]),onClick:d},p.createElement(I.a,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(v.a,null),p.createElement("div",{className:t([z,K(o)])},p.createElement(R.b,{source:{susiEntry:"post_sidebar"}},p.createElement(C.a,{operation:"login"},p.createElement(I.a,{display:"flex",justifyContent:"space-between"},"Log In or Sign Up"," ",p.createElement(A.a,{className:t({transform:"rotate(-90deg)"})})))))))))})))},X=n("./src/components/analytics/ParselyReporter.tsx"),J=n("./src/components/branch-banner/helpers/index.ts"),Z=n("./src/components/collection/CollectionMetabar.tsx"),ee=n("./src/components/collection/theming/CustomBackgroundWrapper.tsx"),te=n("./src/components/collection/theming/CustomStyleWrapper.tsx"),ne=n("./src/components/collection/theming/customStyleSheet.ts"),re=n("./src/components/debug/GoogleAnalytics.tsx"),oe=n("./src/components/footer/GlobalFooter.tsx"),ae=n("./src/components/metabar/Metabar.tsx"),se=n("./src/components/metabar/MetabarLayout.tsx"),ie=n("./src/components/meter/PayWall.tsx"),le=n("./src/components/meter/RegWall.tsx"),ce=n("./src/components/session/useViewer.tsx");function ue(){var e=o()(["\n  mutation AddCollaboratorMutation($postId: ID!) {\n    addCollaborator(postId: $postId)\n  }\n"]);return ue=function(){return e},e}function de(){var e=o()(["\n  fragment AddCollaborator_post on Post {\n    isPublished\n    id\n  }\n"]);return de=function(){return e},e}var me=Object(u.gql)(de()),pe=Object(u.gql)(ue()),fe=n("./src/components/optimizely/helpers/index.ts"),ge=n("./src/components/post/MaybeRedirectToEditor.tsx");function be(){var e=o()(["\n  fragment NextPostButton_post on Post {\n    id\n    nextPostId\n  }\n"]);return be=function(){return e},e}var he={transform:"rotate(-90deg)",fill:"white"},ve={transition:"width 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",color:"white",width:"0px",overflow:"hidden",display:"inline",whiteSpace:"nowrap"},Ee=function(e){return e?{width:"75px",margin:"0px 0px 0px 15px"}:{}},xe=function(e){var t="undefined"!=typeof window?window.innerHeight:0,n="undefined"!=typeof window?window.innerWidth:0;return{transition:"margin 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",position:"fixed",top:"".concat(Math.max(t-50,0),"px"),left:"".concat(Math.max(n-50,0),"px"),backgroundColor:e.baseColor.fill.darker,borderRadius:"20px"}},ye=function(e){var t,n=e.postId,r=Object(x.useCx)(),o=Object(g.f)((function(e){return{authDomain:e.config.authDomain}})).authDomain,a=p.useState(!1),s=l()(a,2),i=s[0],c=s[1];return"undefined"!=typeof window&&n?p.createElement("div",{className:r([xe,(t=i,t?{margin:"0 0 0 -95px"}:{})]),onMouseOver:function(){return c(!0)},onMouseOut:function(){return c(!1)}},p.createElement(I.m,{href:Object(y.Ib)(o,n)},p.createElement("div",{className:r({display:"flex",alignItems:"center",justifyContent:"space-between"})},p.createElement("div",{className:r([ve,Ee(i)])},"Next Story"),p.createElement(A.a,{className:r(he)})))):null},Oe=Object(u.gql)(be()),je=n("./src/components/post/PostBodyInserts.tsx"),we=n("./src/components/post/PostHeader.tsx"),_e=n("./src/components/post/PostMetadata.tsx"),Se=n("./src/components/post/PostPublishedDialog.tsx"),Pe=n("./src/components/publisher/auroraHooks.ts"),Ce=n("./src/components/session/useFlag.tsx"),ke=n("./src/components/style/UnboundFellThemeProvider.tsx"),Ie=n("./src/util/theme.ts");function Te(){var e=o()(["\n  fragment PostScreenThemeProvider_post on Post {\n    collection {\n      colorPalette {\n        ...customDefaultBackgroundTheme_colorPalette\n      }\n      ...auroraHooks_publisher\n    }\n    creator {\n      ...auroraHooks_publisher\n    }\n    customStyleSheet {\n      ...customDefaultBackgroundTheme_customStyleSheet\n      ...customStyleSheetFontTheme_customStyleSheet\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return Te=function(){return e},e}var Re=function(e){var t=e.children,n=e.post,r=Object(Pe.b)(n.collection||n.creator),o=!!Object(Ce.a)("enable_sohne"),a=!!Object(Ce.a)("enable_unbound"),s=Object(x.useTheme)();if(r){var i,l=Object(Ie.j)(n.customStyleSheet,Object(Ie.g)(n.customStyleSheet,s,null===(i=n.collection)||void 0===i?void 0:i.colorPalette),o||a);return p.createElement(x.ThemeProvider,{theme:l},t)}var c,u=Object(Ie.g)(null,s,null===(c=n.collection)||void 0===c?void 0:c.colorPalette);return p.createElement(x.ThemeProvider,{theme:u},p.createElement(ke.a,null,t))},Le=Object(u.gql)(Te(),Pe.a,Ie.h,Ie.i,Ie.k),Ae=n("./src/components/post/PostSidebar.tsx"),Me=n("./src/components/post/ResponsesSidebarContext.tsx"),Be=n("./src/components/post/TableOfContents.tsx"),De=n("./src/components/post/body/InteractivePostBody.tsx"),Ne=n("./src/components/post/bookmark/PostPageBookmarkContext.tsx"),He=n("./src/components/post/footer/PostFooter.tsx"),Ue=n("./src/components/post/helpers/loggedOutHistory.ts"),Fe=n("./src/components/publisher/MetaHeader.tsx"),Ve=n("./src/components/responses/ResponsesSidebar.tsx"),ze=n("./src/components/session/RequireFlag.tsx"),qe=n("./src/framework/design-system/type/index.ts"),Ge=n("./src/store/actions/navigation.ts"),We=n("./src/styles/colors.ts");function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ke=f.a.createElement("path",{fill:"#fff",d:"M0 0h49v57H0z"}),Ye=f.a.createElement("path",{d:"M45.95 17.53v-.04l-.05-1.55a5.32 5.32 0 0 0-5.04-5.17c-5.8-.32-10.3-2.2-14.13-5.89l-.03-.03a3.26 3.26 0 0 0-4.4 0l-.03.03c-3.84 3.7-8.33 5.57-14.13 5.89-2.79.15-5 2.42-5.04 5.18l-.05 1.54v.1c-.11 5.84-.25 13.12 2.21 19.73 1.36 3.63 3.41 6.79 6.1 9.38 3.07 2.96 7.09 5.3 11.94 6.98a3.74 3.74 0 0 0 2.4 0c4.85-1.68 8.86-4.03 11.93-6.98 2.69-2.6 4.74-5.76 6.1-9.39 2.47-6.63 2.33-13.92 2.22-19.78zm-5 18.77c-2.6 6.96-7.9 11.74-16.23 14.62a.67.67 0 0 1-.45 0c-8.32-2.87-13.63-7.65-16.23-14.61-2.27-6.1-2.14-12.78-2.03-18.67v-.03c.03-.5.04-1.04.05-1.62.02-1.22 1-2.23 2.24-2.3 3.29-.18 6.17-.81 8.83-1.92 2.64-1.1 5-2.67 7.19-4.77.1-.1.25-.1.36 0a23.11 23.11 0 0 0 7.2 4.77 26.27 26.27 0 0 0 8.82 1.92 2.36 2.36 0 0 1 2.24 2.3c0 .58.02 1.12.05 1.62.11 5.9.24 12.59-2.04 18.69z",fill:"#757575"}),Qe=f.a.createElement("path",{d:"M24.5 17.76c-7.11 0-12.9 5.4-12.9 12.04 0 6.64 5.79 12.04 12.9 12.04s12.9-5.4 12.9-12.04c0-6.64-5.79-12.04-12.9-12.04zm0 21.25c-5.44 0-9.86-4.13-9.86-9.2 0-5.08 4.42-9.21 9.86-9.21 5.44 0 9.86 4.13 9.86 9.2 0 5.08-4.42 9.2-9.86 9.2z",fill:"#757575"}),Xe=f.a.createElement("path",{d:"M28.08 25.1l-5.64 6.12-1.53-1.66c-.56-.6-1.46-.6-2.02 0-.55.6-.55 1.59 0 2.2l2.54 2.75c.28.3.65.45 1.01.45.37 0 .73-.15 1.01-.45l6.65-7.22c.55-.6.55-1.59 0-2.2-.56-.6-1.47-.6-2.02 0z",fill:"#757575"}),Je=function(e){return f.a.createElement("svg",$e({width:49,height:57,viewBox:"0 0 49 57",fill:"none"},e),Ke,Ye,Qe,Xe)};var Ze=Object(g.c)()((function(e){var t=e.dispatch,n=e.isVisible,r=e.hide;return p.createElement(I.g,{isVisible:n,hide:r,withCloseButton:!1,withTransparentOverlay:!0},p.createElement(I.a,{display:"flex",justifyContent:"center",paddingTop:"100px"},p.createElement(I.a,{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative",textAlign:"center",background:We.B,boxShadow:"0 2px 10px ".concat(Object(We.y)(.15)),borderRadius:"4px",height:"550px",width:"900px",paddingBottom:"14px",md:{width:"600px",height:"auto",padding:"14px 8px"},sm:{width:"95vw !important",padding:"14px 8px"}},p.createElement(I.a,{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"},p.createElement(I.a,{paddingBottom:"24px"},p.createElement(Je,null)),p.createElement(I.a,{paddingBottom:"24px",paddingRight:"24px",paddingLeft:"24px"},p.createElement(qe.c,{scale:"L"},"The following content was reported as a potential violation of Medium’s rules and is under investigation.")),p.createElement(I.a,{padding:"0 0 24px 0"},p.createElement(I.b,{buttonStyle:"BRAND",size:"REGULAR",onClick:function(){r(),t(Object(Ge.m)({duration:"FOREVER",message:"",toastStyle:"LIMITED_STATE_BANNER"}))}},"I understand and want to proceed anyway"),p.createElement(I.A,null,(function(e){var t=e.isVisible,n=e.toggle,r=e.hide;return p.createElement(I.p,{isVisible:t,hide:r,display:"block",customZIndex:800,popoverRenderFn:function(){return p.createElement(I.a,{padding:"15px 20px",width:"400px"},p.createElement(qe.b,{scale:"S"},"Anyone can publish on Medium, provided the content adheres to Medium’s rules and policies. When Medium is made aware of potential violations, the content is manually evaluated and appropriate action taken. Some features may be disabled while the content is under review."))},placement:"top",targetDistance:15},p.createElement(I.a,{paddingTop:"10px"},p.createElement(I.m,{onClick:n},p.createElement("u",null,p.createElement(qe.b,{scale:"S"},"Why am I seeing this?")))))})))),p.createElement(I.a,{display:"flex",justifyContent:"center"},p.createElement(qe.b,{scale:"M"},"View our"," ",p.createElement(I.m,{href:"https://medium.com/policy/medium-rules-30e5502c4eb4",linkStyle:"OBVIOUS",inline:!0},"Rules,")," ",p.createElement(I.m,{href:"https://medium.com/policy/medium-terms-of-service-9db0094a1e0f",linkStyle:"OBVIOUS",inline:!0},"Terms of Service")," ","&"," ",p.createElement(I.m,{href:"https://medium.com/policy/medium-partner-program-terms-fcfe9cf777b8",linkStyle:"OBVIOUS",inline:!0},"Partner Program Terms"))))))}));function et(){var e=o()(["\n  fragment LimitedStateInterstitial_post on Post {\n    creator {\n      id\n    }\n    isLimitedState\n  }\n"]);return et=function(){return e},e}var tt=function(e){return function(){return{filter:e?"blur(10px)":"blur(0)"}}};function nt(e){var t=e.post,n=t.creator,r=t.isLimitedState,o=e.viewerId,a=e.children,s=Object(x.useCx)(),i=p.useState(!1),c=l()(i,2),u=c[0],d=c[1];return p.useEffect((function(){d(!0)}),[]),r&&(n&&n.id)!==o?p.createElement(I.A,{initialVisibility:!0},(function(e){var t=e.isVisible,n=e.hide;return p.createElement(p.Fragment,null,p.createElement("div",{className:s(tt(t))},a),u&&p.createElement(Ze,{isVisible:t,hide:n}))})):a}var rt=Object(u.gql)(et()),ot=n("./src/components/tns/SuspendedBannerLoader.tsx"),at=n("./src/components/ui/banners/AlternateUserTopBanner.tsx"),st=n("./src/components/ui/banners/SignInConfirmationBanner.tsx"),it=n("./src/framework/reporter/index.ts"),lt=n("./src/framework/track/index.ts"),ct=n("./src/schema-types/globalTypes.ts"),ut=n("./src/screens/helpers/users.ts"),dt=n("./src/screens/helpers/visits.ts"),mt=n("./src/store/actions/auroraPage.ts"),pt=n("./src/store/actions/branch.ts"),ft=n("./node_modules/serialize-javascript/index.js"),gt=n.n(ft);function bt(e){var t={__html:'<script type="application/json">'.concat(gt()(e.json,{isJSON:!0}),"<\/script>")};return p.createElement("amp-analytics",{id:"medium-analytics",dangerouslySetInnerHTML:t})}var ht=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),vt=n.n(ht);function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){vt()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yt=Object(g.c)((function(e){return{googleAnalyticsCode:e.config.googleAnalyticsCode}}))((function(e){var t=e.googleAnalyticsCode,n=e.collectionGoogleAnalyticsId,r={triggers:xt({},{trackPageview:{on:"visible",request:"pageview",vars:{account:t}}},{},n?{trackCollectionPageview:{on:"visible",request:"pageview",vars:{account:n}}}:{})},o={__html:'<script type="application/json">'.concat(gt()(r,{isJSON:!0}),"<\/script>")};return p.createElement("amp-analytics",{type:"googleanalytics",id:"google-analytics",dangerouslySetInnerHTML:o})}));function Ot(){var e={__html:'<script type="application/json">'.concat(gt()({vars:{apikey:"medium.com"}},{isJSON:!0}),"<\/script>")};return p.createElement("amp-analytics",{type:"parsely",id:"parsely-amp-analytics",dangerouslySetInnerHTML:e})}var jt=n("./src/util/hooks/useIsEligibleToViewNewResponses.tsx"),wt=n("./src/util/hooks/usePrevious.tsx"),_t=n("./src/util/richText.ts");function St(){var e=o()(["\n  fragment PostScreen_post on Post {\n    id\n    canonicalUrl\n    collection {\n      id\n      domain\n      googleAnalyticsId\n      slug\n      ...CollectionMetabar_collection\n      ...MetaHeader_publisher\n      ...auroraHooks_publisher\n    }\n    # please note that the postMeteringOptions are defined in the postHandler file\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      validatedShareKey\n    }\n    creator {\n      ...SuspendedBannerLoader_user\n      ...MetaHeader_publisher\n      ...auroraHooks_publisher\n    }\n    customStyleSheet {\n      id\n      postBody {\n        ...SupportedContainerStyles_styleNode\n      }\n      ...CustomBackgroundWrapper_customStyleSheet\n      ...InteractivePostBody_customStyleSheet\n      ...MetaHeader_customStyleSheet\n    }\n    firstPublishedAt\n    isLocked\n    isPublished\n    isShortform\n    isEmail\n    layerCake\n    primaryTopic {\n      name\n      slug\n    }\n    title\n    ...AddCollaborator_post\n    ...InteractivePostBody_post\n    ...LimitedStateInterstitial_post\n    ...MaybeRedirectToEditor_post\n    ...Metabar_post\n    ...PayWall_post\n    ...PostBodyInserts_post\n    ...PostFooter_post\n    ...PostHeader_post\n    ...PostMetadata_post\n    ...PostPublishedDialog_prerequisite_post\n    ...PostReadTracker_post\n    ...PostScreenThemeProvider_post\n    ...PostScrollTracker_post\n    ...PostSidebar_post\n    ...RegWall_post\n    ...SuspendedBannerLoader_post\n    ...buildBranchViewData_post\n    ...optimizelyData_post\n    ...TableOfContents_post\n    ...NextPostButton_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return St=function(){return e},e}function Pt(){var e=o()(["\n  fragment PostScreen_meteringInfo on MeteringInfo {\n    __typename\n    postIds\n    maxUnlockCount\n    unlocksRemaining\n    ...PostHeader_meteringInfo\n    ...RegWall_meteringInfo\n    ...buildBranchViewData_meteringInfo\n  }\n  ","\n  ","\n  ","\n"]);return Pt=function(){return e},e}function Ct(e){var t,n=e.meteringInfo,r=e.post,o=e.viewer,a=r.id,s=r.isPublished,i=r.isLocked,d=r.isShortform,f=r.isEmail,v=r.content,E=r.collection,x=r.canonicalUrl,O=Object(g.e)(),j=Object(it.c)(),w=Object(g.f)((function(e){return{authDomain:e.config.authDomain,isAmp:e.config.isAmp,isBot:e.client.isBot,inAppBrowser:e.client.inAppBrowserName,currentHash:e.navigation.currentHash,postPublishedType:e.navigation.postPublishedType,referrer:e.navigation.referrer,referrerSource:e.navigation.referrerSource,responsesOpen:e.navigation.responsesOpen,sessionUserId:e.session.user.id}}),g.d),_=w.authDomain,S=w.currentHash,P=w.isAmp,C=w.isBot,k=w.inAppBrowser,I=w.postPublishedType,T=w.referrer,R=w.referrerSource,L=w.responsesOpen,A=w.sessionUserId,M=p.useState(!1),B=l()(M,2),D=B[0],N=B[1],H=p.useState(r.readingList===ct.r.READING_LIST_QUEUE||r.readingList===ct.r.READING_LIST_ARCHIVE),U=l()(H,2),F=U[0],V=U[1],z=p.useRef(null),q=!!o,G=E||{},W=G.id,$=G.slug,K=G.googleAnalyticsId,Y=v||{},Z=Y.isLockedPreviewOnly,ae=Y.validatedShareKey,se=K?[K]:null;Object(re.b)(se,C,P),Object(lt.h)(z,r),Object(lt.g)(!!q,z,r),function(e){var t=Object(ce.b)().value,n=Object(u.useMutation)(pe,{variables:{postId:e.id}}),r=l()(n,2),o=r[0],a=r[1].called;p.useEffect((function(){!e.isPublished&&(null==t?void 0:t.id)&&!a&&o()}),[t])}(r);var ue=Object(Ce.a)("enable_norway_sidebar"),de=Object(Pe.b)(E||r.creator),me=d&&de,be=Object(wt.a)(de),he=Object(jt.a)(),ve=he&&L,Ee=p.useState(Boolean(ve)),xe=l()(Ee,2),Oe=xe[0],ke=xe[1],Ie=p.useState(void 0),Te=l()(Ie,2),Le=Te[0],Be=Te[1],Fe=p.useState(!1),qe=l()(Fe,2),We=qe[0],$e=qe[1];We||lt.a.on("load",(function(){return $e(!0)}));var Ke=Object(je.b)(r);p.useEffect((function(){if(s){q||(r.isLocked?Object(dt.m)():Object(dt.n)());var e=Object(J.a)({inAppBrowser:k,post:r,meteringInfo:n,referrer:T,referrerSource:R,viewer:o,currentUserId:A});E&&E.domain&&(e.data.$canonical_url=Object(y.Ib)(_,r.id));var t=o&&o.name?Object(ut.b)(o.name):void 0;Object(fe.c)({post:r},t),Object(J.g)(e),O(Object(pt.h)(e)),O(Object(pt.j)()),j.event("post.clientViewed",{postId:a,collectionId:W,collectionSlug:$,context:1,isFriendLink:!!ae})}else j.event("post.draftViewed",{postId:a});switch(q||Object(Ue.b)(a),I){case"initial":N(!f),O(Object(Ge.k)());break;case"repub":O(Object(Ge.m)({duration:3e3,message:"Your changes have been published."})),O(Object(Ge.k)())}return function(){O(Object(pt.g)())}}),[a,s]);var Ye=Object(b.g)().search,Qe=Object(c.parse)(Ye.slice(1));if(m.a.canUseDOM&&"string"==typeof Qe.readmore){var Xe=document.getElementById(_t.i);if(Xe){var Je,Ze=window.matchMedia&&(null===(Je=window.matchMedia("(prefers-reduced-motion: reduce)"))||void 0===Je?void 0:Je.matches);setTimeout((function(){var e=Math.max(Xe.offsetTop-window.innerHeight/2,0);window.scrollY<=e&&window.scrollTo({top:e,behavior:Ze?void 0:"smooth"})}))}}be!==de&&O(Object(mt.b)(de));var et,tt,rt,ft=Z&&(q?p.createElement(ie.a,{post:r}):p.createElement(le.a,{post:r,meteringInfo:n})),gt=i?{className:"meteredContent"}:{};if(S){var ht=S.split("-");et=ht[0],tt=ht[1]}return p.createElement(p.Fragment,null,p.createElement(X.a,null),p.createElement(ge.a,{post:r},p.createElement(_e.b,{isAmp:P,post:r}),(null==o?void 0:o.id)===(null===(t=r.creator)||void 0===t?void 0:t.id)?p.createElement(ot.c,{post:r,user:r.creator}):p.createElement(ze.a,{name:"can_view_suspended_content"},p.createElement(ot.c,{post:r,user:r.creator})),p.createElement(Re,{post:r},p.createElement(ee.a,{customStyleSheet:r.customStyleSheet},p.createElement(kt,{post:r}),he&&We&&p.createElement(Ve.a,{isResponsesSidebarVisible:Oe,setIsResponsesSidebarVisible:ke,inResponseToQuote:Le,parentPost:r,setInResponseToQuote:Be}),p.createElement(te.a,{rule:(rt=r.customStyleSheet,Object(ne.j)(null==rt?void 0:rt.postBody))},p.createElement(h.c,null,p.createElement(Ne.a.Provider,{value:{isFirstLoadAndInReadingList:F,setIsFirstLoadAndInReadingList:V}},p.createElement(at.a,null),p.createElement(st.a,null),p.createElement("article",gt,p.createElement(we.a,{post:r,meteringInfo:n}),p.createElement(Me.a.Provider,{value:{openSidebarToRespondToHighlight:function(e){Be(e),ke(!0)}}},p.createElement(nt,{post:r,viewerId:null==o?void 0:o.id},p.createElement(De.c,{activeGrafId:et,activeNoteId:tt,isAuroraPostPageEnabled:de,post:r,postBodyInserts:Ke,customStyleSheet:r.customStyleSheet,ref:z})))),!Z&&!!s&&!me&&(ue?p.createElement(Q,null):p.createElement(Ae.a,{post:r,setIsResponsesSidebarVisible:ke})),ft,!Z&&p.createElement(He.c,{post:r,setIsResponsesSidebarVisible:ke})))),p.createElement(Se.a,{hide:function(){return N(!1)},isVisible:D,post:r}),!!s&&p.createElement(oe.a,{slimFooter:de}),ue&&p.createElement(ye,{postId:r.nextPostId}))),P&&p.createElement(p.Fragment,null,p.createElement(bt,{json:{requests:{base:Object(y.g)(_),pageview:Object(y.d)(_),scrollPing:Object(y.f)(_)},vars:{postId:a,collectionId:W,canonicalUrl:x,referrer:T},triggers:{defaultPageview:{on:"visible",request:"pageview"},scrollDepths:{on:"scroll",scrollSpec:{verticalBoundaries:[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100]},request:"scrollPing"}},transport:{beacon:!1,xhrpost:!1,image:!0}}}),p.createElement(yt,{collectionGoogleAnalyticsId:K}),p.createElement(Ot,null))))}var kt=function(e){var t=e.post,n=t.collection,r=n||t.creator,o=Object(Pe.b)(r),a=Object(Ce.a)("enable_post_page_nav_stickiness_removal"),i=Object(g.f)((function(e){return e.config.isAmp}));if(Object(Ce.a)("enable_norway_sidebar"))return null;if(r&&o)return p.createElement(Fe.a,{publisher:r,customStyleSheet:t.customStyleSheet,post:t,forceSmall:!0});var l={behavior:se.b.Aggressive,isAmp:i,isFixed:!a,post:t};if(n)return p.createElement(Z.a,s()({},l,{collection:n}));var c=t.layerCake,u=t.primaryTopic,d=c&&(1===c||2===c||3===c),m=d?u:null;return p.createElement(ae.a,s()({},l,{isMonogramOnly:!d,marginBottom:0,marginBottomSm:0,topic:m}))},It=Object(u.gql)(Pt(),we.b,le.b,J.b),Tt=Object(u.gql)(St(),me,Z.c,ee.b,De.b,De.a,rt,ge.b,ae.b,Fe.b,Fe.c,ie.b,je.a,He.b,we.c,_e.a,Se.b,lt.d,Le,lt.e,Ae.c,le.c,ne.b,ot.a,ot.b,Pe.a,J.c,fe.b,Be.a,Oe)},"./src/screens/SuspendedScreen.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("./node_modules/react/index.js"),o=n("./src/components/session/WithFlag.tsx"),a=n("./src/framework/design-system/components/index.ts"),s=n("./src/framework/design-system/type/index.ts"),i=n("./src/framework/reporter/index.ts"),l=n("./src/screens/ContentErrorScreen.tsx"),c=n("./src/util/routes.ts"),u=function(e){var t=e.suspension,n=Object(i.c)();return r.createElement(l.a,{code:410,title:"410 ".concat(t," suspended — Medium"),description:r.createElement(o.a,{name:"enable_new_suspended_page"},(function(e){return e?r.createElement(r.Fragment,null,r.createElement(a.a,{display:"flex",marginTop:"-30px"},r.createElement(s.f,{scale:"S"},"This ",t," is under investigation or was found in violation of the Medium Rules."," ")),r.createElement(a.a,{display:"flex",marginTop:"80px"},r.createElement(s.f,{color:"DARKER",scale:"M"},"There are thousands of stories to read on Medium. Visit our homepage ",r.createElement("br",null)," to find one that’s right for you.")),r.createElement(a.a,{display:"flex",marginTop:"15px"},r.createElement(a.b,{buttonStyle:"SUBTLE",href:Object(c.cb)(),onClick:function(){n.event("suspendedPage.backToHomeClicked",{})}},"Take me to Medium"))):r.createElement(r.Fragment,null,"This ",t," is under investigation or was found in violation of the"," ",r.createElement(a.m,{href:"https://medium.com/policy/30e5502c4eb4",display:"inline-block",inline:!0,target:"_blank",linkStyle:"OBVIOUS"},"Medium Rules"))}))})}},"./src/screens/helpers/users.ts":function(e,t,n){"use strict";function r(e){if((e.match(/ /g)||[]).length>1)return"";var t=e.indexOf(" ");return e.substring(0,t)}function o(e){return e.google?"google":e.facebook?"facebook":e.twitter?"twitter":"medium"}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},"./src/svg/arrow-down-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M4 7.33L10.03 14l.5.55.5-.55 5.96-6.6-.98-.9-5.98 6.6h1L4.98 6.45z",fillRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21,viewBox:"0 0 21 21"},e),s)}},"./src/svg/audio-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},o.a.createElement("path",{d:"M17.4 7s2.64 3.56 0 6.88M15 8.56s1.6 2.38 0 4.4"})),i=o.a.createElement("path",{d:"M11.9 3.01a.19.19 0 0 0-.19.04L6.47 7.7H3.2c-.09 0-.21.06-.21.14v5.28c0 .08.12.3.21.3h3.14L11.72 18h.18a.17.17 0 0 0 .1-.15V3.14a.14.14 0 0 0-.1-.14z"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21},e),s,i)}},"./src/svg/bookmark-25px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z",fillRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({width:25,height:25,viewBox:"0 0 25 25"},e),s)}},"./src/svg/bookmark-archive-25px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.47 9.95h17v-3h-17v3zm16 1h1a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-17a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v9a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-9zm-1 0h-13v9h13v-9z"}),i=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.47 12.45c0-.28.21-.5.48-.5h6.04c.27 0 .48.22.48.5 0 .27-.21.5-.48.5H9.95a.49.49 0 0 1-.48-.5z"});t.a=function(e){return o.a.createElement("svg",a({width:25,height:25,viewBox:"0 1 25 25",fill:"#757575"},e),s,i)}},"./src/svg/bookmark-filled-25px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13c.2.18.52.17.71-.03a.5.5 0 0 0 .12-.29H19V6z"});t.a=function(e){return o.a.createElement("svg",a({width:25,height:25,viewBox:"0 0 25 25"},e),s)}},"./src/svg/bookmark-remove-25px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.48 7.45H3.46v10.13H16a.47.47 0 1 1 0 .94H3.46c-.54 0-.99-.42-.99-.94V7.45c0-.52.45-.93 1-.93h17c.55 0 1 .41 1 .93v5.57a.5.5 0 0 1-1 0V7.45zM5.47 10.02c0-.28.22-.5.5-.5h9.11a.5.5 0 1 1 0 1H5.97a.5.5 0 0 1-.5-.5zm.51 2.5a.5.5 0 0 0-.51.5c0 .27.23.5.51.5h5.98a.5.5 0 0 0 .51-.5.5.5 0 0 0-.51-.5H5.98zm12.52 3.02c.2-.2.5-.2.7 0l1.77 1.77 1.77-1.77a.5.5 0 1 1 .7.7l-1.76 1.78 1.76 1.76a.5.5 0 1 1-.7.71l-1.77-1.77-1.77 1.77a.5.5 0 0 1-.7-.7l1.76-1.77-1.76-1.77a.5.5 0 0 1 0-.7z"});t.a=function(e){return o.a.createElement("svg",a({width:25,height:25,viewBox:"0 0 25 25",fill:"#757575"},e),s)}},"./src/svg/clap-25px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"}));t.a=function(e){return o.a.createElement("svg",a({width:25,height:25,viewBox:"0 0 25 25"},e),s)}},"./src/svg/clap-filled-19px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M6.93 15.34l-2.06-2.06c-2.16-2.16-3.53-3.15-2.9-3.79.33-.32.8-.39 1.2 0l2.13 2.2c.08.08.16.07.38.13.21.05.36-.05.54-.23.17-.16.07-.6-.09-.77L3.5 8.2c-.37-.36-.5-1-.1-1.39.37-.37.8-.19 1.14.15.39.38 2.7 2.76 2.7 2.76a.42.42 0 0 0 .3.13.54.54 0 0 0 .33-.16c.17-.16.25-.46.09-.63 0 0-1.34-1.4-1.82-1.88-.71-.72-.77-1.22-.46-1.54.45-.44 1.05-.3 1.86.62l3.58 3.89-.75-1.95s-.47-1.25 0-1.5.84.4 1.17.9l1.86 3.34c1.01 1.65.69 3.8-.73 5.19-1.87 1.87-4.07.87-5.73-.78zM10.26.04H8.73l.77 3.3zM13.93 1.2L12.5.7l-.4 3.36zM6.5.57l-1.44.52L6.9 3.93z"}),o.a.createElement("path",{d:"M14.3 7.03c-.34-.5-.9-.52-1.25-.24-.25.19-.21.6-.2.9l1.51 2.64c1.17 1.9 1.33 3.66 0 5.45.4-.19.52-.23.9-.61 1.52-1.52 1.86-3.32.85-4.96l-1.8-3.18z"}));t.a=function(e){return o.a.createElement("svg",a({width:19,height:19,viewBox:"0 0 19 19"},e),s)}},"./src/svg/clap-filled-25px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M11.74 0l.76 2.97.76-2.97zM16.63 1.22L15.2.75l-.4 3.03zM9.79.75l-1.43.47 1.84 2.56zM22.47 13.3L19.45 8c-.29-.43-.69-.7-1.12-.78a1.16 1.16 0 0 0-.91.22c-.3.23-.48.52-.54.84l.05.07 2.85 5c1.95 3.56 1.32 6.97-1.85 10.14a8.46 8.46 0 0 1-.55.5 5.75 5.75 0 0 0 3.36-1.76c3.26-3.27 3.04-6.75 1.73-8.91M12.58 9.89c-.16-.83.1-1.57.7-2.15l-2.5-2.49c-.5-.5-1.38-.5-1.88 0-.18.18-.27.4-.33.63l4.01 4z"}),o.a.createElement("path",{d:"M15.81 9.04a1.37 1.37 0 0 0-.88-.6.81.81 0 0 0-.64.15c-.18.13-.72.55-.24 1.56l1.43 3.03a.54.54 0 1 1-.87.61L7.2 6.38a.99.99 0 1 0-1.4 1.4l4.4 4.4a.54.54 0 1 1-.76.76l-4.4-4.4L3.8 7.3a.99.99 0 0 0-1.4 0 .98.98 0 0 0 0 1.39l1.25 1.24 4.4 4.4a.54.54 0 0 1 0 .76.54.54 0 0 1-.76 0l-4.4-4.4a1 1 0 0 0-1.4 0 .98.98 0 0 0 0 1.4l1.86 1.85 2.76 2.77a.54.54 0 0 1-.76.76L2.58 14.7a.98.98 0 0 0-1.4 0 .99.99 0 0 0 0 1.4l5.33 5.32c3.37 3.37 6.64 4.98 10.49 1.12 2.74-2.74 3.27-5.54 1.62-8.56l-2.8-4.94z"}));t.a=function(e){return o.a.createElement("svg",a({width:25,height:25},e),s)}},"./src/svg/creative-commons-by-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M10.48 2c2.4 0 4.4.82 6.04 2.46A8.2 8.2 0 0 1 19 10.5c0 2.39-.81 4.38-2.43 5.96A8.4 8.4 0 0 1 10.49 19c-2.3 0-4.3-.83-5.98-2.5C2.84 14.82 2 12.83 2 10.5s.83-4.34 2.5-6.04A8.14 8.14 0 0 1 10.48 2zm.03 1.53c-1.93 0-3.56.68-4.9 2.04a6.84 6.84 0 0 0-.01 9.82 6.71 6.71 0 0 0 4.92 2.06c1.89 0 3.54-.69 4.94-2.07a6.47 6.47 0 0 0 2-4.87c0-1.93-.67-3.57-2.03-4.93a6.72 6.72 0 0 0-4.91-2.03zM12.8 8.4v3.48h-.97v4.12H9.18v-4.12h-.97V8.39A.53.53 0 0 1 8.37 8a.53.53 0 0 1 .39-.16h3.49c.14 0 .27.06.38.16a.52.52 0 0 1 .16.39zM9.32 6.2c0-.8.39-1.2 1.18-1.2.79 0 1.18.4 1.18 1.2 0 .8-.4 1.19-1.18 1.19-.79 0-1.18-.4-1.18-1.18z",fillRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21},e),s)}},"./src/svg/creative-commons-nc-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M10.48 2c2.4 0 4.4.82 6.04 2.46C18.18 6.1 19 8.11 19 10.5s-.81 4.38-2.43 5.96A8.4 8.4 0 0 1 10.49 19c-2.31 0-4.3-.84-5.98-2.52A8.16 8.16 0 0 1 2 10.5c0-2.33.83-4.34 2.5-6.04A8.14 8.14 0 0 1 10.48 2zM3.91 8.2a6.68 6.68 0 0 0-.38 2.3c0 1.88.7 3.51 2.07 4.89a6.77 6.77 0 0 0 4.92 2.05c1.9 0 3.56-.7 4.94-2.08a6.2 6.2 0 0 0 1.17-1.5l-3.2-1.42c-.1.54-.38.98-.8 1.32a2.8 2.8 0 0 1-1.53.58v1.3h-.98v-1.3a3.95 3.95 0 0 1-2.58-1.02l1.16-1.18c.56.51 1.19.77 1.9.77.3 0 .54-.07.75-.2.2-.13.31-.35.31-.65a.66.66 0 0 0-.23-.52l-.82-.35-1-.45-1.35-.6L3.92 8.2zm6.6-4.68a6.6 6.6 0 0 0-4.9 2.05 8 8 0 0 0-.94 1.14l3.25 1.45c.14-.44.41-.8.8-1.07a2.68 2.68 0 0 1 1.39-.44V5.33h.98v1.3c.78.04 1.49.3 2.13.8L12.1 8.56c-.48-.33-.96-.5-1.46-.5-.26 0-.5.05-.7.15-.21.1-.31.28-.31.52 0 .07.02.14.07.2l1.08.49.75.33 1.37.6 4.36 1.94c.14-.6.22-1.21.22-1.83 0-1.95-.67-3.6-2.03-4.93a6.64 6.64 0 0 0-4.92-2.05z",fillRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21},e),s)}},"./src/svg/creative-commons-nd-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M10.48 2c2.38 0 4.4.82 6.04 2.47A8.17 8.17 0 0 1 19 10.5a8.1 8.1 0 0 1-2.43 5.98A8.39 8.39 0 0 1 10.49 19c-2.3 0-4.3-.83-5.99-2.5a8.18 8.18 0 0 1-2.5-6 8.3 8.3 0 0 1 2.5-6.03A8.15 8.15 0 0 1 10.48 2zm.03 1.53a6.6 6.6 0 0 0-4.9 2.05 6.78 6.78 0 0 0-2.08 4.92c0 1.9.7 3.52 2.07 4.89a6.71 6.71 0 0 0 4.91 2.06c1.9 0 3.55-.69 4.95-2.07a6.5 6.5 0 0 0 2-4.87c0-1.94-.67-3.58-2.03-4.9a6.67 6.67 0 0 0-4.91-2.06zm3.2 4.97v1.45H7.55V8.5h6.18zm0 2.73v1.45H7.55v-1.45h6.18z",fillRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21},e),s)}},"./src/svg/creative-commons-sa-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M10.48 2c2.38 0 4.4.82 6.04 2.47A8.17 8.17 0 0 1 19 10.5a8.1 8.1 0 0 1-2.43 5.98A8.39 8.39 0 0 1 10.49 19c-2.3 0-4.3-.83-5.99-2.5a8.18 8.18 0 0 1-2.5-6c0-2.32.83-4.33 2.5-6.03A8.15 8.15 0 0 1 10.48 2zm.03 1.53a6.6 6.6 0 0 0-4.9 2.05 6.79 6.79 0 0 0-2.08 4.92c0 1.9.7 3.52 2.07 4.89a6.71 6.71 0 0 0 4.92 2.06c1.89 0 3.54-.7 4.94-2.08a6.5 6.5 0 0 0 2-4.87c0-1.94-.67-3.58-2.03-4.92a6.64 6.64 0 0 0-4.91-2.05zM6.72 9.3a3.8 3.8 0 0 1 1.26-2.42 3.7 3.7 0 0 1 2.47-.86c1.34 0 2.4.43 3.2 1.3a4.7 4.7 0 0 1 1.18 3.3c0 1.3-.41 2.4-1.23 3.26a4.2 4.2 0 0 1-3.2 1.3 3.8 3.8 0 0 1-2.48-.87 3.7 3.7 0 0 1-1.26-2.46H8.8c.05 1.03.67 1.55 1.87 1.55.6 0 1.08-.26 1.44-.78.36-.52.54-1.21.54-2.07 0-.9-.17-1.6-.5-2.06a1.68 1.68 0 0 0-1.45-.71c-1.14 0-1.77.5-1.92 1.5h.62l-1.68 1.68-1.68-1.68h.66z",fillRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21},e),s)}},"./src/svg/creative-commons-zero-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M10.5 5.68c-2.76 0-3.46 2.61-3.46 4.82 0 2.21.7 4.82 3.46 4.82s3.46-2.6 3.46-4.82c0-2.21-.7-4.82-3.46-4.82zm0 1.82c.11 0 .21 0 .31.04.2.17.3.4.1.73l-1.83 3.38A9.1 9.1 0 0 1 9 10.49c0-.98.07-3 1.5-3zm1.38 1.55c.1.52.1 1.06.1 1.44 0 .97-.06 3-1.48 3-.11 0-.22-.01-.31-.04l-.06-.02-.1-.03c-.31-.14-.51-.38-.22-.81l2.06-3.55z"}),o.a.createElement("path",{d:"M10.48 2c-2.36 0-4.34.82-5.96 2.47a8.6 8.6 0 0 0-1.88 2.8A8.35 8.35 0 0 0 2 10.5c0 1.13.21 2.21.64 3.23a8.58 8.58 0 0 0 1.85 2.76 8.84 8.84 0 0 0 2.76 1.87 8.4 8.4 0 0 0 3.23.64c1.13 0 2.22-.22 3.27-.66a8.7 8.7 0 0 0 2.82-1.88 7.72 7.72 0 0 0 1.81-2.68A8.62 8.62 0 0 0 19 10.5a8.6 8.6 0 0 0-.62-3.27 8.12 8.12 0 0 0-1.82-2.74A8.3 8.3 0 0 0 10.48 2zm.04 1.53a6.7 6.7 0 0 1 4.93 2.05 6.81 6.81 0 0 1 1.5 2.25 6.97 6.97 0 0 1 .52 2.67c0 1.95-.67 3.57-2 4.87a7.33 7.33 0 0 1-2.31 1.54 6.92 6.92 0 0 1-5.29 0 7.17 7.17 0 0 1-2.26-1.51 7.33 7.33 0 0 1-1.55-2.27 6.8 6.8 0 0 1 0-5.3 7.3 7.3 0 0 1 1.55-2.28 6.6 6.6 0 0 1 4.9-2.03z"}));t.a=function(e){return o.a.createElement("svg",a({width:21,height:21},e),s)}},"./src/svg/link-slim.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M16.94 1.1A3.7 3.7 0 0 0 14.3 0c-1 0-1.94.39-2.64 1.1L7.43 5.3c-.91.92-2.09 3.2 0 5.27a.75.75 0 0 0 .82.16c.09-.03.17-.09.24-.15a.74.74 0 0 0 0-1.06c-1.16-1.15-.77-2.39-.02-3.16l4.24-4.22a2.2 2.2 0 0 1 1.58-.65c.6 0 1.16.23 1.58.65.86.87.86 2.29 0 3.16L12.7 8.47a.74.74 0 0 0 1.04 1.05l3.17-3.16a3.73 3.73 0 0 0 0-5.27h.03zM9.54 7.4a.74.74 0 0 0 0 1.06c1.16 1.15.76 2.39 0 3.16l-4.22 4.22c-.42.42-.99.65-1.59.65a2.23 2.23 0 0 1-1.58-3.82l3.17-3.16A.73.73 0 0 0 5.54 9a.78.78 0 0 0-.22-.52.77.77 0 0 0-1.05 0L1.1 11.64A3.72 3.72 0 0 0 3.74 18c1 0 1.94-.39 2.65-1.1l4.23-4.2c.21-.22.94-1.02 1.13-2.2.18-1.12-.2-2.15-1.12-3.07-.27-.27-.78-.27-1.06 0l-.02-.02z",clipRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({fill:"none",viewBox:"0 0 18 18","aria-labelledby":"link-slim-svg"},e),s)}},"./src/svg/response-25px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z",fillRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({width:25,height:25},e),s)}},"./src/svg/response-filled-19px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M16.19 9.42c0 1.67-.72 2.84-2.03 4l-.1.09v.13a4.3 4.3 0 0 0 .15.85c.17.6.46 1.2.86 1.8a4.94 4.94 0 0 1-2.46-.84c-.26-.17-.33-.2-.54-.4l-.13-.12-.16.05c-.68.2-2.75.46-4.88-.16a5.9 5.9 0 0 1-4.1-5.4c0-3.37 3-6.12 6.7-6.12s6.69 2.75 6.69 6.12z",fillRule:"evenodd"});t.a=function(e){return o.a.createElement("svg",a({width:19,height:19,viewBox:"0 0 19 19"},e),s)}},"./src/svg/twitter-filled-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("path",{d:"M18.5 4.43a6.9 6.9 0 0 1-2.18.88 3.45 3.45 0 0 0-2.55-1.12 3.49 3.49 0 0 0-3.49 3.48c0 .28.03.55.07.81a9.91 9.91 0 0 1-7.17-3.67 3.9 3.9 0 0 0-.5 1.74 3.6 3.6 0 0 0 1.56 2.92 3.36 3.36 0 0 1-1.55-.44.15.15 0 0 0 0 .06c0 1.67 1.2 3.08 2.8 3.42-.3.06-.6.1-.94.12l-.62-.06A3.5 3.5 0 0 0 7.17 15a7.33 7.33 0 0 1-4.36 1.49L2 16.44A9.96 9.96 0 0 0 7.36 18c6.4 0 9.91-5.32 9.9-9.9v-.5A6.55 6.55 0 0 0 19 5.79a6.18 6.18 0 0 1-2 .56 3.33 3.33 0 0 0 1.5-1.93"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21,viewBox:"0 0 21 21"},e),s)}},"./src/svg/unlisted-19px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M4.13 12.21a15.4 15.4 0 0 1-2.54-2.28 6.61 6.61 0 0 1-.16-.2l-.25-.3.25-.3a13.08 13.08 0 0 1 .63-.7 15.4 15.4 0 0 1 1.7-1.51C5.55 5.54 7.5 4.7 9.51 4.7c.62 0 1.28.13 1.98.37l-.8.78a4.54 4.54 0 0 0-1.18-.18c-1.76 0-3.52.76-5.18 2.02-.58.45-1.12.93-1.58 1.41-.28.3-.28.36 0 .65a14.43 14.43 0 0 0 2.08 1.77l-.71.7zm3.05 1.57a6.32 6.32 0 0 0 4.61-.11c1-.38 2.04-.98 3.1-1.72a25.27 25.27 0 0 0 2.68-2.17l.37-.35-.37-.36a23.05 23.05 0 0 0-.76-.68 25.26 25.26 0 0 0-2.28-1.73l-.72.7a24.05 24.05 0 0 1 2.37 1.77c.2.17.2.42 0 .59-.57.49-1.2.97-1.84 1.43-1.01.7-2 1.26-2.9 1.61a5.4 5.4 0 0 1-1.92.42A6.6 6.6 0 0 1 8 13l-.81.78z"}),o.a.createElement("path",{d:"M12.05 9.06a2.68 2.68 0 0 1-2.7 3A2.74 2.74 0 0 1 9 12l3.06-2.96zM9.72 6.79a2.83 2.83 0 0 0-.37-.02 2.68 2.68 0 0 0-2.7 3l3.07-2.98zM3.6 14.3l-.35.34.68.7.35-.34 10.4-10.08.36-.34-.68-.7-.35.34z"}));t.a=function(e){return o.a.createElement("svg",a({width:19,height:19,viewBox:"0 0 19 19"},e),s)}},"./src/util/hooks/postRecircHooks.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("./node_modules/react-redux/es/index.js"),o=n("./src/store/selectors/session.ts");function a(){var e=Object(r.f)((function(e){var t=e.session;return{user:t.user,isSpoofed:t.isSpoofed}})),t=e.user.id,n=e.isSpoofed;return!(t&&Object(o.a)(t)||n)}},"./src/util/hooks/useInterval.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/react/index.js");function o(e,t){var n=r.useRef(e);function o(){n.current&&n.current()}r.useEffect((function(){n.current=e}),[e]),r.useEffect((function(){if(null!==t){var e=setInterval(o,t);return function(){clearInterval(e)}}}),[t])}},"./src/util/hooks/useIsEligibleToViewNewResponses.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("./src/components/session/useFlag.tsx"),o=n("./src/components/session/useViewer.tsx"),a=function(){var e=Boolean(Object(r.a)("enable_responses_2")),t=Boolean(Object(r.a)("enable_responses_all")),n=Boolean(Object(r.a)("is_super_user")),a=Object(o.b)().value;return e&&(n||Boolean(null==a?void 0:a.isEligibleToViewNewResponses))||t}},"./src/util/hooks/usePrevious.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/react/index.js");function o(e){var t=r.useRef();return r.useEffect((function(){t.current=e}),[e]),t.current}},"./src/util/hooks/useTimer.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/react/index.js"),o=function(){var e=r.useRef(null),t=function(){e.current&&clearTimeout(e.current)};return r.useEffect((function(){return t})),function(n,r){return t(),e.current=setTimeout(n,r),t}}},"./src/util/post/claps.ts":function(e,t,n){"use strict";function r(e,t){return!!t&&e[t.id]||{clapCount:(null==t?void 0:t.clapCount)||0,viewerClapCount:(null==t?void 0:t.viewerClapCount)||0,viewerHasClappedSinceFetch:!1}}n.d(t,"a",(function(){return r}))},"./src/util/post/metaDescription.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return g}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@apollo/client/index.js"),s=n("./src/schema-types/globalTypes.ts"),i=n("./src/util/post/metaHelpers.ts"),l=n("./src/util/string.ts");function c(){var e=o()(["\n  fragment shortformPostMetaDescription_post on Post {\n    id\n    metaDescription\n    seoDescription\n    shortformType\n    title\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=o()(["\n  fragment postMetaDescription_post on Post {\n    id\n    title\n    seoDescription\n    metaDescription\n    creator {\n      id\n      name\n    }\n    collection {\n      id\n      name\n    }\n    previewContent {\n      subtitle\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return u=function(){return e},e}var d=function(e){var t=e.metaDescription,n=e.seoDescription,r=e.title||"";if(n)return n;if(t)return t;var o=function(e){var t=Object(i.a)(e,250);return t&&Object(l.b)(t,200)}(e);if(o.length>150)return o;var a=e.previewContent&&e.previewContent.subtitle||"";if(a.length>140)return a;a.length>0&&(a+=".");var s=(r.length?r+". ":"")+a;if(s.length>140)return s;var c="“".concat(r,"” is published");return e.creator&&e.creator.name&&(c+=" by ".concat(e.creator.name)),e.collection&&e.collection.name&&(c+=" in ".concat(e.collection.name)),"".concat(a," ").concat(c,".")},m=function(e){return d(e).trim()},p=function(e,t){var n=e.metaDescription,r=e.seoDescription,o=e.shortformType,a=o===s.s.SHORTFORM_TYPE_NOTE||!o;if(r)return r;if(n)return n;if(a&&t){var c=Object(i.a)(e,350,0);return Object(l.b)(c,300)}return""},f=Object(a.gql)(u(),i.b),g=Object(a.gql)(c(),i.b)},"./src/util/post/metaHelpers.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return C})),n.d(t,"g",(function(){return T})),n.d(t,"h",(function(){return R})),n.d(t,"e",(function(){return L})),n.d(t,"f",(function(){return A})),n.d(t,"i",(function(){return M})),n.d(t,"j",(function(){return B})),n.d(t,"k",(function(){return D})),n.d(t,"l",(function(){return N}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),s=n.n(a),i=n("./node_modules/@apollo/client/index.js"),l=n("./node_modules/date-fns/index.js"),c=n("./src/components/post/NormalizePostBodyModel.ts"),u=n("./src/schema-types/globalTypes.ts"),d=n("./src/util/post/titleHelpers.ts"),m=n("./src/util/string.ts");function p(){var e=s()(["\n  fragment shouldIndex_post on Post {\n    id\n    firstPublishedAt\n    isLimitedState\n    isShortform\n    shortformType\n    visibility\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=s()(["\n  fragment shortformPostTitle_post on Post {\n    id\n    title\n    seoTitle\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      ...maybeAppendProductName_collection\n    }\n  }\n  ","\n  ","\n  ","\n"]);return f=function(){return e},e}function g(){var e=s()(["\n  fragment getTitleForPost_post on Post {\n    id\n    title\n    ...postTitle_post\n    ...getTitleDetails_post\n  }\n  ","\n  ","\n"]);return g=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){var e=s()(["\n  fragment postTitle_post on Post {\n    id\n    title\n    seoTitle\n    firstPublishedAt\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      id\n      name\n      domain\n      ...maybeAppendProductName_collection\n    }\n    creator {\n      name\n    }\n    previewContent {\n      subtitle\n    }\n  }\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function E(){var e=s()(["\n  fragment maybeAppendProductName_collection on Collection {\n    id\n    domain\n  }\n"]);return E=function(){return e},e}function x(){var e=s()(["\n  fragment getTitleDetails_post on Post {\n    id\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        ...GetTitleIndexMap_bodyModel\n      }\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}function y(){var e=s()(["\n  fragment getPostContentAsString_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          text\n          type\n          mixtapeMetadata {\n            href\n          }\n        }\n      }\n    }\n  }\n"]);return y=function(){return e},e}function O(){var e=s()(["\n  fragment appendPostContext_post on Post {\n    id\n    sequence {\n      title\n    }\n    collection {\n      name\n    }\n    creator {\n      name\n    }\n  }\n"]);return O=function(){return e},e}function j(e,t){var n,r,o;return(null===(n=t.sequence)||void 0===n?void 0:n.title)?e+=" - ".concat(t.sequence.title):(null===(r=t.collection)||void 0===r?void 0:r.name)?e+=" - ".concat(t.collection.name):(null===(o=t.creator)||void 0===o?void 0:o.name)&&(e+=" - ".concat(t.creator.name)),e}var w=Object(i.gql)(O());function _(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeMixtapeHref:!1},s=a.includeMixtapeHref,i=(null===(t=e.content)||void 0===t||null===(n=t.bodyModel)||void 0===n?void 0:n.paragraphs)||[],l="",c=!0,u=!1,d=void 0;try{for(var m,p=i[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){var f=m.value,g=f.mixtapeMetadata,b=f.text,h=f.type;if(s&&(null==g?void 0:g.href)?l+=l?" ".concat(g.href):g.href:"P"===h&&b&&b.length>o&&(l+=l?" ".concat(b):b),l.length>r)break}}catch(e){u=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}return l}var S=Object(i.gql)(y());function P(e){var t=!1,n="";if(e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs){var r=e.content.bodyModel.paragraphs,o=Object(c.d)(r).titleIndex;"number"==typeof o&&(n=r[o].text,t=!0)}return{hasTitleGraf:t,latestTitle:n}}var C=Object(i.gql)(x(),S,c.b);function k(e,t,n){return(null==n?void 0:n.domain)?e:"".concat(e," - ").concat(t)}var I=Object(i.gql)(E());function T(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.seoTitle,s=e.title||"",i=(null===(n=e.previewContent)||void 0===n?void 0:n.subtitle)||"";if(a)return Object(d.a)(a,e.collection&&e.collection.name,t);if(!o)return s.length>50?s:s=k(s=j(s,e),t,e.collection);s.length<33&&i&&(i=Object(m.b)(i,40),s+=". ".concat(i)),(null===(r=e.creator)||void 0===r?void 0:r.name)&&(s+=" | by ".concat(e.creator.name));var c="",u=Date.now()-5184e6;e.firstPublishedAt>=u&&(c=" | ".concat(Object(l.format)(e.firstPublishedAt,"MMM, YYYY")));var p=e.collection;return p?p.domain?s+="".concat(c," | ").concat(p.name):s+=" | ".concat(p.name).concat(c," | ").concat(t):s+="".concat(c," | ").concat(t),s}var R=Object(i.gql)(v(),S,w,I);function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P(e),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.title||"",a=n.latestTitle||o,s=h({},e,{title:a});return T(s,t,r).trim()}var A=Object(i.gql)(g(),R,C);function M(e,t,n){var r=e.seoTitle,o=e.title||"";return r?Object(d.a)(r,e.collection&&e.collection.name,t):o=k(o=j(o=function(e,t,n){var r=t.shortformType,o=r===u.s.SHORTFORM_TYPE_NOTE||!r;return n||(o?e=_(t,250,0):r===u.s.SHORTFORM_TYPE_LINK&&(e=_(t,250,0,{includeMixtapeHref:!0}))),Object(m.b)(e,200)}(o,e,n),e),t,e.collection)}var B=Object(i.gql)(f(),S,w,I);function D(e){var t=e.firstPublishedAt,n=e.isLimitedState,r=e.isShortform,o=e.shortformType,a=e.visibility,s=o===u.s.SHORTFORM_TYPE_NOTE||!o;return!!t&&(("PUBLIC"===a||"LOCKED"===a)&&(!n&&(!r||(s?_(e,10,0).length>10:_(e,10,0).length>0))))}var N=Object(i.gql)(p(),S)},"./src/util/post/titleHelpers.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r=function(e){return e||"Untitled story"},o=function(e,t,n){return t?"".concat(e," | ").concat(t):n?"".concat(e," | ").concat(n):e}},"./src/util/quote.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return g}));var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(a),i=n("./node_modules/lodash/cloneDeep.js"),l=n.n(i),c=n("./node_modules/@apollo/client/index.js"),u=n("./src/schema-types/globalTypes.ts");function d(){var e=o()(["\n  fragment buildQuotePreviewParagraph_quote on Quote {\n    paragraphs {\n      id\n      text\n      type\n      markups {\n        end\n        start\n        type\n      }\n    }\n    startOffset\n    endOffset\n  }\n"]);return d=function(){return e},e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(e){if(1!==e.paragraphs.length)return null;var t=l()(e.paragraphs[0]),n=t.text||"",r=0,o=e.startOffset||0,a=e.endOffset||n.length;if(n.length-a>100&&(n=n.substring(0,a+100)+"…"),o>100){var s=o-100;n="…"+n.substring(s),r=s-1}t.text=n,t.type=u.m.P,t.markups.unshift({end:a,start:o,type:u.i.HIGHLIGHT});var i=!0,c=!1,d=void 0;try{for(var m,p=t.markups[Symbol.iterator]();!(i=(m=p.next()).done);i=!0){var f=m.value;f.start-=r,f.end-=r}}catch(e){c=!0,d=e}finally{try{i||null==p.return||p.return()}finally{if(c)throw d}}return t},f=function(e){if(1!==e.paragraphs.length)return null;var t=e.paragraphs[0].text||"",n=e.startOffset||0,r=e.endOffset||t.length,o=t.slice(n,r);return o.length>=185&&(o=o.substring(0,185)+"..."),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.paragraphs[0],{text:o,type:u.m.P,markups:[{end:o.length,start:0,type:u.i.HIGHLIGHT,anchorType:null,href:null,linkMetadata:null,userId:null}],hasDropCap:null,dropCapImage:null})},g=Object(c.gql)(d())},"./src/util/string.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e){return/^[\s\xa0]*$/.test(e)},o=function(e,t){if(e.length<t)return e;var n=e.substr(0,t),r=n.charCodeAt(n.length-1),o=n.charCodeAt(n.length-2);return r>=55296&&r<=57343&&!(o>=55296&&o<=57343)&&(n=n.substr(0,n.length-1)),(n=(n=n.replace(/(\s+\S+|\s+)$/,"")).replace(/[.,:;?!-]+$/,""))+"…"}}}]);
//# sourceMappingURL=Post.b333ab44.chunk.js.map